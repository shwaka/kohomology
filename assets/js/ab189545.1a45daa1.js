"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[185],{5178:(e,t,r)=>{r.r(t),r.d(t,{default:()=>_t});var n=r(7743),a=r(7294),o=r(1262),l=r(1927),s=r(7357);function i(){return new Worker(r.p+"assets/js/kohomology.worker.15e97e50.worker.js")}var c=r(3811),u=r(3156),m=r(6447),d=r(7720),g=r(3321),p=r(2890),f=r(480),v=r(9033),E=r(657),y=r(7645),b=r(1703),h=r(44),w=r(6514),x=r(1425),k=r(2734);function Z(){return(0,k.Z)().breakpoints.down("sm")}function C(e){let{currentTabKey:t,tabKeyForPanel:r,children:n}=e;return a.createElement("div",{hidden:t!==r},n)}function S(e){var t,r;let{tabItems:n,tabKeys:o,currentTabKey:l,handleChangeTabKey:s,submit:i,tryToQuit:c,open:u,closeDialog:m}=e;const d=Z();return a.createElement(E.Z,{open:u,onClose:c,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{[d]:{margin:0,width:"calc(100% - 5pt)"}}}},a.createElement(y.Z,null,a.createElement(b.Z,{value:l,onChange:(e,t)=>s(t)},o.map((e=>a.createElement(h.Z,{value:e,key:e,label:n[e].label,sx:{textTransform:"none"}}))))),a.createElement(w.Z,{sx:{[d]:{padding:1}}},o.map((e=>a.createElement(C,{currentTabKey:l,tabKeyForPanel:e,key:e},n[e].render(m))))),a.createElement(x.Z,null,a.createElement(g.Z,{onClick:i,variant:"contained",disabled:null==(t=(r=n[l]).disableSubmit)?void 0:t.call(r)},"Apply"),a.createElement(g.Z,{onClick:c,variant:"outlined"},"Cancel")))}var A=r(7462),D=r(6761),I=r(9699),T=r(2428),P=r(1737),J=r(1903),O=r(3984),V=r(3946),j=r(8617),N=r(7536),$=r(887),L=r(2339),M=r(5587),_=r(4285);function G(e){let{id:t,RowComponent:r,index:n,formData:o,externalData:l}=e;const{attributes:s,listeners:i,setNodeRef:c,transform:u,transition:m}=(0,M.nB)({id:t}),d={transform:_.ux.Transform.toString(u),transition:m},g={draggableProps:{...s,...i},index:n,formData:o,externalData:l};return a.createElement("div",{ref:c,style:d},a.createElement(r,g))}function W(e){let{fields:t,move:r,formData:n,RowComponent:o,Container:l,externalData:s}=e;const i=(0,$.Dy)((0,$.VT)($.we),(0,$.VT)($.Lg,{coordinateGetter:M.is})),{trigger:c}=n;return a.createElement(l,null,a.createElement($.LB,{sensors:i,collisionDetection:$.pE,onDragEnd:function(e){let{active:n,over:a}=e;if(c(),null===a)throw new Error("over is null");if(n.id!==a.id){console.log(`replace: ${n.id}, ${a.id}`);const e=t.map((e=>e.id)).indexOf(n.id),o=t.map((e=>e.id)).indexOf(a.id);r(e,o)}},modifiers:[L.F4]},a.createElement(M.Fo,{items:t,strategy:M.qw},t.map(((e,t)=>a.createElement(G,{key:e.id,id:e.id,index:t,formData:n,RowComponent:o,externalData:s}))))))}function F(e){return z(JSON.parse(e))}function z(e){return`[\n${e.map((e=>`  ["${e[0]}", ${e[1]}, "${e[2]}"]`)).join(",\n")}\n]`}function R(){const e=(0,a.useRef)(null);return(0,a.useCallback)(((t,r)=>{null!==e.current&&clearTimeout(e.current);const n=setTimeout(t,r);e.current=n}),[])}function B(e){return JSON.parse(e).map((e=>{let[t,r,n]=e;return{name:t,degree:r,differentialValue:n}}))}function Q(e){return z(e.map((e=>{let{name:t,degree:r,differentialValue:n}=e;return[t,isNaN(r)?1:r,n]})))}function q(e){const t=e.map((e=>e.name)),r="xyzuvwabc".split("");for(const n of r)if(!t.includes(n))return n;return""}function K(e){const{handleSubmit:t,register:r,getValues:n,reset:o,trigger:l,control:s,formState:{errors:i}}=(0,N.cI)({mode:"onBlur",reValidateMode:"onBlur",criteriaMode:"all",defaultValues:{generatorArray:B(e.json)}}),{fields:c,append:u,remove:m,move:d}=(0,N.Dq)({control:s,name:"generatorArray"});function g(r){t((t=>{let{generatorArray:n}=t;e.updateDgaWrapper(Q(n)),r()}))()}const p={register:r,errors:i,fields:c,append:u,remove:m,getValues:n,trigger:l,move:d};return{label:"Array",onSubmit:g,beforeOpen:function(){const t=B(e.json);o({generatorArray:t})},preventQuit:function(){return Q(n().generatorArray)!==e.json?"Your input is not saved. Are you sure you want to quit?":void 0},disableSubmit:function(){return void 0!==i.generatorArray||void 0!==i.dummy},render:e=>a.createElement(Y,(0,A.Z)({submit:()=>g(e)},p))}}function H(e){var t,r;let{errors:n,index:a,key:o}=e;return void 0!==(null==(t=n.generatorArray)||null==(r=t[a])?void 0:r[o])}function U(e){let{draggableProps:t,index:r,formData:{register:n,errors:o,remove:l,getValues:s,trigger:i}}=e;const c=s().generatorArray[r].name,u=R(),d=(0,a.useCallback)((()=>u((async()=>await i()),1e3)),[u,i]);return a.createElement("div",{"data-testid":"ArrayEditor-row"},a.createElement(m.Z,{spacing:1},a.createElement(m.Z,{direction:"row",spacing:1},a.createElement(J.Z,(0,A.Z)({label:"generator",sx:{width:90},size:"small"},n(`generatorArray.${r}.name`,{required:"Please enter the name.",validate:e=>{const t=(0,j.validateGeneratorName)(e);switch(t.type){case"success":return!0;case"error":return t.message;default:throw new Error("This can't happen!")}},onChange:d}),{onBlur:()=>i(),error:H({errors:o,index:r,key:"name"}),inputProps:{"data-testid":"ArrayEditor-input-name"}})),a.createElement(J.Z,(0,A.Z)({label:`deg(${c})`,type:"number",sx:{width:80},size:"small"},n(`generatorArray.${r}.degree`,{valueAsNumber:!0,required:"Please enter the degree.",validate:e=>0!==e||"The degree cannot be 0.",onChange:d}),{onBlur:()=>i(),error:H({errors:o,index:r,key:"degree"}),inputProps:{"data-testid":"ArrayEditor-input-degree"}})),a.createElement(J.Z,(0,A.Z)({label:`d(${c})`,sx:{width:200},size:"small"},n(`generatorArray.${r}.differentialValue`,{validate:e=>function(e,t,r){if(e[t].differentialValue!==r)throw new Error("generatorArray[index] and value do not match.");const n=Q(e.slice(0,t+1)),a=(0,j.validateDifferentialValueOfTheLast)(n);return"success"===a.type||a.message}(s().generatorArray,r,e),required:"Please enter the value of the differential.",onChange:d}),{onBlur:()=>i(),error:H({errors:o,index:r,key:"differentialValue"}),inputProps:{"data-testid":"ArrayEditor-input-differentialValue"}})),a.createElement(O.Z,{title:"Delete this generator"},a.createElement(V.Z,{onClick:()=>{l(r),i()},size:"small"},a.createElement(D.Z,{fontSize:"small"}))),a.createElement(V.Z,(0,A.Z)({},t,{style:{cursor:"grab",touchAction:"none"}}),a.createElement(I.Z,null))),function(e){var t;let{errors:r,index:n}=e;const o=null==(t=r.generatorArray)?void 0:t[n];if(void 0!==o)return a.createElement(m.Z,{spacing:.3},["name","degree","differentialValue"].map((e=>{const t=o[e];if(void 0!==t&&void 0!==t.message)return a.createElement(P.Z,{severity:"error",key:e,sx:{whiteSpace:"pre-wrap"}},t.message)})))}({errors:o,index:r})))}function X(e){let{children:t}=e;return a.createElement(m.Z,{spacing:2},t)}function Y(e){let{register:t,errors:r,fields:n,append:o,remove:l,getValues:s,trigger:i,move:c,submit:u}=e;const d={register:t,remove:l,errors:r,getValues:s,trigger:i};return a.createElement("form",{onSubmit:e=>{e.preventDefault(),u()}},a.createElement(m.Z,{spacing:2,sx:{marginTop:1}},a.createElement(W,{RowComponent:U,Container:X,externalData:void 0,fields:n,move:c,formData:d}),a.createElement(g.Z,{variant:"outlined",onClick:()=>o({name:q(s().generatorArray),degree:1,differentialValue:"0"}),startIcon:a.createElement(T.Z,null),sx:{textTransform:"none"}},"Add a generator"),a.createElement("input",(0,A.Z)({hidden:!0,value:"dummy"},t("dummy",{validate:{positiveAndNegativeDegree:e=>function(e){const t=e.filter((e=>e.degree>0)).length,r=e.filter((e=>e.degree<0)).length;return!(t>0&&r>0)||"Cannot mix generators of positive and negative degrees."}(s().generatorArray),duplicatedNames:e=>function(e){const t=e.map((e=>e.name)),r=t.filter(((e,r)=>t.indexOf(e)!==r));return 0===r.length||"Generator names must be unique. Duplicated names are "+r.map((e=>`"${e}"`)).join(", ")}(s().generatorArray)}}))),function(e){const t=e.dummy;if(void 0===t)return;const r=t.types;return void 0!==r?a.createElement(a.Fragment,null,Object.entries(r).map((e=>{let[t,r]=e;return a.createElement(P.Z,{severity:"error",key:t},r)}))):void 0}(r)),a.createElement("button",{hidden:!0,type:"submit"}))}var ee=r(913),te=r(3841),re=r(5018),ne=r(3599);const ae=["text","math"],oe=["success","error"];function le(e){return e.strings.map((e=>e.content)).join("")}function se(e,t){return{messageType:e,strings:[{stringType:"text",content:t}]}}const ie="messageSuccess__4xu",ce="messageError_Skkc";function ue(e){let{content:t}=e;const r=t.split("\n");return a.createElement("span",null,r.map(((e,t)=>t<r.length-1?a.createElement(a.Fragment,{key:t},e,a.createElement("br",null)):a.createElement(a.Fragment,{key:t},e))))}function me(e){let{styledString:t}=e;const r={"\\deg":"|#1|"};switch(t.stringType){case"text":return a.createElement(ue,{content:t.content});case"math":return a.createElement(c.Z,{math:t.content,settings:{output:"html",macros:r}})}}function de(e){let t,{styledMessage:r}=e;switch(r.messageType){case"success":t=ie;break;case"error":t=ce}return a.createElement("div",{className:t,"data-styled-message":le(r)},r.strings.map(((e,t)=>a.createElement(me,{styledString:e,key:t}))))}function ge(e){const t=e.stringType;if(!ae.includes(t))throw new Error(`Invalid stringType: ${t}`);return{stringType:t,content:e.content}}function pe(e){const t=e.messageType;if(!oe.includes(t))throw new Error(`Invalid messageType: ${t}`);return{messageType:t,strings:e.strings.map(ge)}}function fe(e){if(!Number.isInteger(e))throw new Error("dim must be an integer");if(e<=0)throw new Error("dim must be positive");return e%2==0?`[\n  ["x", ${e}, "0"],\n  ["y", ${2*e-1}, "x^2"]\n]`:`[\n  ["x", ${e}, "0"]\n]`}function ve(e){if(!Number.isInteger(e))throw new Error("dim must be an integer");if(e<=0)throw new Error("dim must be positive");return`[\n  ["c", 2, "0"],\n  ["x", ${2*e+1}, "c^${e+1}"]\n]`}const Ee=["S^n","CP^3","7-mfd","arkowitz-lupton"];function ye(e){try{return e()}catch(t){return}}function be(e,t){const[r,n]=(0,a.useState)(2);return{json:ye((()=>e(r))),renderSelectItem:t,renderForm:()=>a.createElement(J.Z,{label:"n",value:r,type:"number",onChange:e=>n(parseInt(e.target.value)),sx:{width:100},size:"small"})}}function he(e){const[t,r]=(0,a.useState)(""),n={"S^n":be(fe,(()=>a.createElement(c.Z,{math:"S^n"}))),"CP^3":be(ve,(()=>a.createElement(c.Z,{math:"\\mathbb CP^n"}))),"7-mfd":{json:'[\n  ["a", 2, "0"],\n  ["b", 2, "0"],\n  ["x", 3, "a^2"],\n  ["y", 3, "a*b"],\n  ["z", 3, "b^2"]\n]',renderSelectItem:()=>a.createElement("span",null,"a 7-manifold")},"arkowitz-lupton":{json:'[\n  ["x_1", 10, "0"],\n  ["x_2", 12, "0"],\n  ["y_1", 41, "x_1^3 * x_2"],\n  ["y_2", 43, "x_1^2 * x_2^2"],\n  ["y_3", 45, "x_1 * x_2^3"],\n  ["z", 119, "x_2 * (y_1*x_2 - x_1*y_2) * (y_2*x_2 - x_1*y_3) + x_1^12 + x_2^10"]\n]',renderSelectItem:()=>a.createElement("span",null,"Arkowitz-Lupton's example")}},o=""===t?void 0:n[t],l=null==o?void 0:o.json;const s="Select an example",i="label-select-dga-example";return{label:"Examples",onSubmit:function(t){void 0!==l&&(e.updateDgaWrapper(l),t())},beforeOpen:function(){r("")},disableSubmit:function(){return void 0===l},render:e=>a.createElement(m.Z,{spacing:2,sx:{marginTop:1}},a.createElement(ee.Z,null,a.createElement(te.Z,{id:i},s),a.createElement(re.Z,{labelId:i,label:s,value:t,onChange:e=>r(e.target.value),sx:{width:300}},Ee.map((e=>a.createElement(ne.Z,{value:e,key:e},n[e].renderSelectItem()))))),null==o||null==o.renderForm?void 0:o.renderForm(),void 0!==o&&a.createElement(m.Z,null,function(e){return void 0===e?[se("error","Error")]:new j.FreeDGAWrapper(e).dgaInfo().map(pe)}(o.json).map(((e,r)=>a.createElement(de,{styledMessage:e,key:`${t}-${r}`})))))}}function we(e){const{register:t,handleSubmit:r,getValues:n,reset:o,formState:{errors:l}}=(0,N.cI)({mode:"onBlur",reValidateMode:"onBlur",shouldUnregister:!1,defaultValues:{json:e.json}});const s={register:t,errors:l};return{label:"JSON",preventQuit:function(){return n().json!==e.json?"Your JSON is not saved. Are you sure you want to quit?":void 0},onSubmit:function(t){r((r=>{let{json:n}=r;e.updateDgaWrapper(n),t()}))()},beforeOpen:function(){o({json:e.json})},disableSubmit:function(){return void 0!==l.json},render:e=>a.createElement(ke,s)}}function xe(e){const t=(0,j.validateJson)(e);return"success"===t.type||t.message}function ke(e){let{register:t,errors:r}=e;return a.createElement(m.Z,{spacing:2,sx:{marginTop:1}},a.createElement(J.Z,(0,A.Z)({label:"Input your DGA",multiline:!0,inputProps:{"data-testid":"JsonEditorDialog-input-json"}},t("json",{validate:xe}),{error:void 0!==r.json})),void 0!==r.json&&a.createElement(P.Z,{severity:"error"},r.json.message))}const Ze=["array","json","example"];function Ce(e,t){const r=function(e,t,r){const[n,o]=(0,a.useState)(!1),[l,s]=(0,a.useState)(r),i=e[l],c=()=>o(!1);function u(){if(void 0===i.preventQuit)return!0;const e=i.preventQuit();return void 0===e||window.confirm(e)}return{tabDialogProps:{tabItems:e,tabKeys:t,currentTabKey:l,handleChangeTabKey:function(t){var r,n;u()&&(s(t),null==(r=(n=e[t]).beforeOpen)||r.call(n))},tryToQuit:function(){u()&&(null==i.onQuit||i.onQuit(),o(!1))},submit:function(){i.onSubmit(c)},open:n,closeDialog:c},openDialog:function(){null==i.beforeOpen||i.beforeOpen(),o(!0)}}}({array:K({json:e,updateDgaWrapper:t}),json:we({json:e,updateDgaWrapper:t}),example:he({updateDgaWrapper:t})},Ze,"array");return{TabDialog:S,...r}}function Se(e){let{draggableProps:t,index:r,formData:{register:n,errors:o,remove:l,getValues:s,trigger:i},externalData:{validateGenerator:c}}=e;const u=R(),d=(0,a.useCallback)((()=>u((async()=>await i()),1e3)),[u,i]);return a.createElement(m.Z,{spacing:1},a.createElement(m.Z,{direction:"row",spacing:1},a.createElement(J.Z,(0,A.Z)({label:"generator",sx:{width:300},size:"small"},n(`generatorArray.${r}.text`,{required:"Please enter the generator.",validate:c,onChange:d}))),a.createElement(O.Z,{title:"Delete this generator"},a.createElement(V.Z,{onClick:()=>{l(r),i()},size:"small"},a.createElement(D.Z,{fontSize:"small"}))),a.createElement(V.Z,(0,A.Z)({},t,{style:{cursor:"grab",touchAction:"none"}}),a.createElement(I.Z,null))),function(e){var t,r;let{errors:n,index:o}=e;const l=null==(t=n.generatorArray)?void 0:t[o];if(void 0===l)return;const s=null==(r=l.text)?void 0:r.message;return void 0!==s?a.createElement(P.Z,{severity:"error",sx:{whiteSpace:"pre-wrap"}},s):void 0}({errors:o,index:r}))}function Ae(e){return JSON.parse(e).map((e=>({text:e})))}function De(e){const t=e.map((e=>{let{text:t}=e;return t}));return JSON.stringify(t)}function Ie(e){let{children:t}=e;return a.createElement(m.Z,{spacing:2},t)}function Te(e){let{register:t,getValues:r,errors:n,trigger:o,control:l,validateGenerator:s,validateGeneratorArray:i}=e;const{fields:c,append:u,remove:d,move:p}=(0,N.Dq)({control:l,name:"generatorArray"}),f={register:t,remove:d,errors:n,getValues:r,trigger:o},v={validateGenerator:s};return a.createElement("div",null,a.createElement(m.Z,{spacing:2,sx:{marginTop:1}},a.createElement(W,{RowComponent:Se,Container:Ie,fields:c,move:p,formData:f,externalData:v}),a.createElement(g.Z,{variant:"outlined",onClick:()=>u({text:""}),startIcon:a.createElement(T.Z,null),sx:{textTransform:"none"}},"Add a generator"),a.createElement("input",(0,A.Z)({hidden:!0,value:"dummy"},t("dummy",{validate:e=>{const t=r().generatorArray.map((e=>e.text));return i(t)}}))),function(e){if(void 0!==e.generatorArray)return;const t=e.dummy;if(void 0===t)return;const r=t.types;return void 0!==r?a.createElement(a.Fragment,null,Object.entries(r).map((e=>{let[t,r]=e;return a.createElement(P.Z,{severity:"error",key:t},r)}))):void 0}(n)))}function Pe(e){let{idealJson:t,setIdealJson:r,validateGenerator:n,validateGeneratorArray:o}=e;const[l,s]=(0,a.useState)(!1),{idealEditorProps:i,getOnSubmit:c,beforeOpen:u,disableSubmit:m,preventQuit:d}=function(e){let{idealJson:t,setIdealJson:r,validateGenerator:n,validateGeneratorArray:o}=e;const{handleSubmit:l,register:s,getValues:i,reset:c,trigger:u,control:m,formState:{errors:d}}=(0,N.cI)({mode:"onBlur",reValidateMode:"onBlur",criteriaMode:"all",defaultValues:{generatorArray:Ae(t)}}),g=(0,a.useCallback)((e=>{l((t=>{let{generatorArray:n}=t;r(De(n)),e()}))()}),[r,l]),p=(0,a.useCallback)((()=>{const e=Ae(t);c({generatorArray:e})}),[t,c]);return{idealEditorProps:{register:s,getValues:i,errors:d,trigger:u,control:m,validateGenerator:n,validateGeneratorArray:o},getOnSubmit:g,beforeOpen:p,disableSubmit:(0,a.useCallback)((()=>void 0!==d.generatorArray||void 0!==d.dummy),[d]),preventQuit:(0,a.useCallback)((()=>De(i().generatorArray)!==t?"Your input is not saved. Are you sure you want to quit?":void 0),[i,t])}}({idealJson:t,setIdealJson:r,validateGenerator:n,validateGeneratorArray:o}),g=(0,a.useCallback)((()=>{u(),s(!0)}),[s,u]),p=(0,a.useCallback)((()=>{s(!1)}),[s]),f=(0,a.useCallback)((()=>{c(p)}),[c,p]),v=(0,a.useCallback)((()=>{const e=d();return void 0===e||window.confirm(e)}),[d]),E=(0,a.useCallback)((()=>{v()&&p()}),[v,p]);return{openDialog:g,idealEditorDialogProps:(0,a.useMemo)((()=>({open:l,onSubmit:f,tryToQuit:E,idealEditorProps:i,disableSubmit:m})),[l,f,E,i,m])}}function Je(e){let{open:t,onSubmit:r,tryToQuit:n,idealEditorProps:o,disableSubmit:l}=e;const s=Z();return a.createElement(E.Z,{open:t,onClose:n,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{[s]:{margin:0,width:"calc(100% - 5pt)"}}}},a.createElement(w.Z,null,a.createElement(Te,o)),a.createElement(x.Z,null,a.createElement(g.Z,{onClick:r,variant:"contained",sx:{textTransform:"none"},disabled:l()},"Apply"),a.createElement(g.Z,{onClick:n,variant:"outlined"},"Cancel")))}function Oe(e){let{setIdealJson:t,idealInfo:r,idealJson:n,validateGenerator:o,validateGeneratorArray:l}=e;const{openDialog:s,idealEditorDialogProps:i}=Pe({setIdealJson:t,idealJson:n,validateGenerator:o,validateGeneratorArray:l});return a.createElement("div",null,a.createElement(P.Z,{severity:"warning"},"Currently, computation for \u039bV/I is an experimental feature! Its UI is bad and it may contain some bugs."),a.createElement(de,{styledMessage:r}),a.createElement(g.Z,{onClick:s,variant:"contained",sx:{textTransform:"none"}},"Edit ideal"),a.createElement(Je,i))}const Ve="dgaJson",je="dgaDsv",Ne="target";function $e(e){const t=JSON.parse(e);return function(e){if(!Array.isArray(e))return!1;for(const t of e)if(!Array.isArray(t)||3!==t.length||"string"!=typeof t[0]||"number"!=typeof t[1]||"string"!=typeof t[2]||t[0].includes(".")||t[2].includes("."))return!1;return!0}(t)?t.map((e=>{let[t,r,n]=e;return`${t}.${r}.${n}`})).join("."):null}function Le(e,t){switch(t){case"json":{const t=function(e){try{const t=JSON.parse(e);return JSON.stringify(t,null,void 0)}catch(t){if(t instanceof SyntaxError)return null;throw t}}(e);return null===t?null:[Ve,t]}case"dsv":{const t=$e(e);return null===t?null:[je,t]}case"auto":{const t=Le(e,"dsv");if(null!==t)return t;const r=Le(e,"json");return null!==r?r:null}}}var Me=r(6775);function _e(){const{search:e}=(0,Me.TH)();return(0,a.useMemo)((()=>new URLSearchParams(e)),[e])}function Ge(e){const t=e.get(Ve);if(null!==t)return t;const r=e.get(je);return null!==r?function(e){const t=e.split("."),r=t.length/3;if(t.length%3!=0)throw new Error(`Invalid data from URL: "${t}"\nIts length must be divisible by 3, but was ${t.length}`);const n=[];for(let a=0;a<r;a++)n.push([t[3*a],parseInt(t[3*a+1]),t[3*a+2]]);return JSON.stringify(n)}(r):null}const We=["self","freeLoopSpace","cyclic","derivation","idealQuot"],Fe=["basis","dim"];function ze(e,t,r){return(0,a.useEffect)((()=>{"error"===e.type&&r(e.message)}),[r,e.type,e.message]),"success"===e.type?e.value:t}var Re=r(9368),Be=r(8456);function Qe(e){let{value:t}=e;return null===t?a.createElement(Be.Z,{size:20}):a.createElement(Be.Z,{variant:"determinate",value:t,size:20})}function qe(e){let{computing:t,progress:r,...n}=e;const o=n.disabled??!1,l=null===(s=r)?null:Math.floor(100*s);var s;return a.createElement(g.Z,(0,A.Z)({},n,{disabled:o||t}),function(e,t){return e?null===t?"Computing":`Computing (${t}%)`:"Compute"}(t,l),t&&a.createElement(Qe,{value:l}))}function Ke(e){let{label:t,value:r,setValue:n,width:o,disabled:l}=e;return a.createElement(J.Z,{label:t,value:r,type:"number",onChange:e=>n(e.target.value),sx:{width:o},size:"small",disabled:l})}function He(e){let{label:t,defaultValue:r,width:n,disabled:o}=e;const[l,s]=(0,a.useState)(r.toString()),i={label:t,value:l,setValue:s,width:void 0!==n?n:70,disabled:void 0!==o&&o};return[parseInt(l),i]}function Ue(e){let{label:t,value:r,setValue:n,width:o,disabled:l}=e;return a.createElement(J.Z,{label:t,value:r,onChange:e=>n(e.target.value),sx:{width:o},size:"small",disabled:l})}function Xe(e){switch(e){case"self":return"\\Lambda V";case"freeLoopSpace":return"\\Lambda V \\otimes \\Lambda \\overline{V}";case"cyclic":return"\\Lambda u \\otimes\\Lambda V \\otimes \\Lambda \\overline{V}";case"derivation":return"\\mathrm{Der}(\\Lambda V)";case"idealQuot":return"\\Lambda V / I"}}function Ye(e,t){void 0===t&&(t=void 0);return`H^{${void 0!==t?t:"*"}}(${Xe(e)})`}function et(e){let{targetName:t,degree:r}=e;return a.createElement(c.Z,{math:Ye(t,r)})}function tt(e){switch(e){case"self":return"H^*(X)";case"freeLoopSpace":return"H^*(LX)";case"cyclic":return"H^*_{S^1}(LX)";case"derivation":return"\\pi_{-*}(\\mathrm{aut}_1(X))\\otimes\\mathbb{Q}";case"idealQuot":return"H^*(\\Lambda V / I)"}}function rt(e){let{targetName:t}=e;return a.createElement(c.Z,{math:tt(t)})}function nt(e){return{computing:"computing"===e.status,workerProgress:"computing"===e.status?e.progress:null}}function at(e){let{targetName:t,postMessageToWorker:r,visible:n,workerInfo:o}=e;const[l,s]=He({label:"",defaultValue:0}),[i,u]=He({label:"",defaultValue:20}),[d,g]=(0,a.useState)("basis"),E=(0,a.useCallback)((e=>{e.preventDefault();r({command:"computeCohomology",targetName:t,minDegree:l,maxDegree:i,showCohomology:d})}),[t,l,i,d,r]);if(!n)return a.createElement(a.Fragment,null);const y=lt(t,"cohomology"),{computing:b,workerProgress:h}=nt(o);return a.createElement("form",{onSubmit:E,"data-testid":"ComputeCohomologyForm"},a.createElement(m.Z,{spacing:1},a.createElement("span",null,"Compute cohomology ",a.createElement(et,{targetName:t,degree:"n"})," for"),a.createElement(m.Z,{direction:"row",alignItems:"center",justifyContent:"center",spacing:1},a.createElement(Ke,s),a.createElement(c.Z,{math:"\\leq n \\leq"}),a.createElement(Ke,u)),a.createElement(p.Z,{row:!0,value:d,onChange:e=>g(e.target.value)},Fe.map((e=>a.createElement(f.Z,{key:e,value:e,control:a.createElement(v.Z,null),label:e})))),a.createElement(qe,{type:"submit",variant:"contained",disabled:!y,computing:b,progress:h}),!y&&a.createElement(P.Z,{severity:"info"},"Currently, this type of computation is not supported.")))}function ot(e){let{targetName:t,postMessageToWorker:r,visible:n,workerInfo:o}=e;const l=lt(t,"class"),[s,i]=function(e){let{label:t,defaultValue:r,width:n,disabled:o}=e;const[l,s]=(0,a.useState)(r);return[l,{label:t,value:l,setValue:s,width:void 0!==n?n:70,disabled:void 0!==o&&o}]}({label:"",defaultValue:"x^2",width:200,disabled:!l}),[u,d]=(0,a.useState)(!0),g=(0,a.useCallback)((e=>{e.preventDefault();r({command:"computeCohomologyClass",targetName:t,cocycleString:s,showBasis:u})}),[t,s,u,r]);if(!n)return a.createElement(a.Fragment,null);const{computing:p,workerProgress:v}=nt(o);return a.createElement("form",{onSubmit:g,"data-testid":"ComputeClassForm"},a.createElement(m.Z,{spacing:1},a.createElement("span",null,"Compute cohomology class ",a.createElement(c.Z,{math:`[\\omega] \\in ${Ye(t)}`})," for"),a.createElement(m.Z,{direction:"row",alignItems:"center",justifyContent:"center",spacing:1},a.createElement(c.Z,{math:"\\omega ="}),a.createElement(Ue,i)),a.createElement(f.Z,{control:a.createElement(Re.Z,null),label:"Show basis",checked:u,onChange:e=>d(e.target.checked)}),a.createElement(qe,{type:"submit",variant:"contained",disabled:!l,computing:p,progress:v}),!l&&a.createElement(P.Z,{severity:"info"},"Currently, this type of computation is not supported.")))}function lt(e,t){switch(e){case"self":case"freeLoopSpace":case"cyclic":case"idealQuot":return!0;case"derivation":switch(t){case"cohomology":return!0;case"class":return!1}}}function st(e){let{targetName:t,postMessageToWorker:r,workerInfo:n}=e;const[o,l]=(0,a.useState)("cohomology");return a.createElement(a.Fragment,null,a.createElement(b.Z,{value:o,onChange:(e,t)=>{l(t)}},a.createElement(h.Z,{value:"cohomology",label:"Cohomology group",sx:{textTransform:"none"}}),a.createElement(h.Z,{value:"class",label:"Cohomology class",sx:{textTransform:"none"}})),a.createElement(at,{targetName:t,postMessageToWorker:r,visible:"cohomology"===o,workerInfo:n}),a.createElement(ot,{targetName:t,postMessageToWorker:r,visible:"class"===o,workerInfo:n}))}function it(e){let{setOpen:t}=e;return a.createElement(g.Z,{variant:"contained",size:"small",onClick:()=>t(!0)},"Restart")}function ct(e){let{open:t,setOpen:r,restart:n}=e;return a.createElement(E.Z,{open:t,onClose:()=>r(!1)},a.createElement(w.Z,null,"Are you sure to restart the background process (WebWorker)? This will stop the current computation (if exists) and clear the cache."),a.createElement(x.Z,null,a.createElement(g.Z,{onClick:()=>{n(),r(!1)},variant:"contained"},"Restart"),a.createElement(g.Z,{onClick:()=>r(!1),variant:"outlined"},"Cancel")))}var ut=r(4996),mt=r(2263),dt=r(1160);function gt(e){let{setOpen:t}=e;return a.createElement(g.Z,{onClick:()=>t(!0),sx:{textTransform:"none"},variant:"outlined",size:"small"},"Share this DGA")}function pt(e){let{text:t}=e;const[r,n]=(0,a.useState)(!1);return a.createElement(O.Z,{title:"Copied",open:r,onClose:()=>n(!1)},a.createElement(g.Z,{onClick:()=>{navigator.clipboard.writeText(t),n(!0)},variant:"contained",size:"small"},"copy"))}function ft(e){let{dgaJson:t,targetName:r}=e;const n=function(e){let{dgaJson:t,format:r,targetName:n}=e;const a=new URLSearchParams,o=Le(t,r);if(null!==o){const[e,t]=o;a.append(e,t)}return a.append(Ne,n),a}({dgaJson:t,format:"auto",targetName:r}),o=`${function(){const e=(0,mt.Z)();return(0,dt.b)()?window.location.origin:e.siteConfig.url}()}${(0,ut.Z)("calculator")}?${n.toString()}`;return a.createElement(a.Fragment,null,a.createElement(J.Z,{label:"url",value:o,sx:{width:300},size:"small",InputProps:{readOnly:!0},multiline:!0}),a.createElement(pt,{text:o}))}function vt(e){let{open:t,setOpen:r,dgaJson:n,targetName:o}=e;const l=Z();return a.createElement(E.Z,{open:t,onClose:()=>r(!1),PaperProps:{sx:{[l]:{margin:0,width:"calc(100% - 5pt)"}}}},a.createElement(w.Z,null,a.createElement(ft,{dgaJson:n,targetName:o})),a.createElement(x.Z,null,a.createElement(g.Z,{onClick:()=>r(!1),variant:"outlined"},"Close")))}var Et=r(6798);function yt(e){let{messages:t}=e;const[r,n]=(0,a.useState)(!0);if(0===t.length)return a.createElement(a.Fragment,null);const o=(e,t)=>{"clickaway"!==t&&n(!1)};return a.createElement(Et.Z,{open:r,anchorOrigin:{vertical:"top",horizontal:"center"},onClose:o},a.createElement(P.Z,{severity:"error",onClose:o,variant:"filled",elevation:6},t.map(((e,t)=>a.createElement("div",{key:t,style:{whiteSpace:"pre-wrap"}},e)))))}var bt=r(3905);const ht={toc:[]};function wt(e){let{components:t,...r}=e;return(0,bt.kt)("wrapper",(0,A.Z)({},ht,r,{components:t,mdxType:"MDXLayout"}),(0,bt.kt)("p",null,'Input a Sullivan algebra from the "Edit DGA" button'),(0,bt.kt)("p",null,"This calculator can compute the cohomology of the Sullivan algebra, its Hochschild homology (cohomology of the free loop space), and its cyclic homology (equivariant cohomology of the free loop space)."),(0,bt.kt)("p",null,'Note that "u" cannot be used as a generator when "cyclic" is selected, since "u" is reserved for the model of the cyclic homology.'))}function xt(e){let{setOpen:t}=e;return a.createElement(g.Z,{onClick:()=>t(!0),sx:{textTransform:"none"},variant:"outlined",size:"small"},"Show usage")}function kt(e){let{open:t,setOpen:r}=e;return a.createElement(E.Z,{open:t,onClose:()=>r(!1)},a.createElement(w.Z,null,a.createElement(wt,null)),a.createElement(x.Z,null,a.createElement(g.Z,{onClick:()=>r(!1),variant:"outlined"},"Close")))}wt.isMDXComponent=!0;var Zt=r(1688);function Ct(e){const t=(0,a.useContext)(e.reactContext),[r,n]=(0,a.useContext)(e.stateContext);(0,a.useEffect)((()=>{t.subscribe("__set_worker_state__",(e=>{const t=function(e){return"updateState"===e.type}(r=e)?{[r.key]:r.value}:null;var r;null!==t&&n((e=>({...e,...t})))}))}),[t,n]);const o=(0,a.useCallback)((e=>{const r="__useSyncExternalStore__";return t.subscribe(r,e),()=>t.unsubscribe(r)}),[t]),l=(0,a.useCallback)((()=>t.workerOutputLog),[t]),s=(0,Zt.useSyncExternalStore)(o,l),i=(0,a.useCallback)((e=>{const r={type:"input",value:e};t.postMessage(r)}),[t]),c=(0,a.useCallback)(((e,r)=>{t.subscribe(e,(e=>{"output"===e.type&&r(e.value)}))}),[t]),u=(0,a.useCallback)(((e,r)=>{t.subscribeRestart(e,r)}),[t]);return{postMessage:i,workerOutputLog:s,addListener:c,restart:(0,a.useCallback)((()=>t.restart()),[t]),addRestartListener:u,state:r,runAsync:(0,a.useCallback)((async(e,r)=>{const n=function(){const e=20,t=St.length,r=[];for(let n=0;n<e;n++)r.push(St.charAt(Math.floor(Math.random()*t)));return r.join("")}(),a={type:"callFunc",key:e,args:r,id:n},o=`runAsync-${n}`;return t.postMessage(a),new Promise(((r,a)=>{t.subscribe(o,(a=>{"funcResult"===a.type&&a.key===e&&a.id===n&&(t.unsubscribe(o),r(a.result))}))}))}),[t])}}const St="0123456789abcdef";class At{onmessageFunctions=new Map;onRestartFunctions=new Map;workerOutputLog=[];constructor(e){this.createWorker=e,this.worker=this.createWorker(),this.worker.onmessage=e=>this.onmessage(e.data)}log(){"undefined"==typeof jest&&console.log(...arguments)}subscribe(e,t){this.onmessageFunctions.set(e,t),this.log(`subscribe: ${e}`)}unsubscribe(e){this.onmessageFunctions.delete(e),this.log(`unsubscribe: ${e}`)}subscribeRestart(e,t){this.onRestartFunctions.set(e,t),this.log(`subscribe restart: ${e}`)}unsubscribeRestart(e){this.onRestartFunctions.delete(e)}postMessage(e){this.worker.postMessage(e)}onmessage(e){this.workerOutputLog=[...this.workerOutputLog,e],this.onmessageFunctions.forEach((t=>t(e)))}terminate(){console.log("Worker terminated"),this.worker.terminate()}restart(){this.worker.terminate(),this.worker=this.createWorker(),this.worker.onmessage=e=>this.onmessage(e.data),this.onRestartFunctions.forEach((e=>e()))}static default(){return new At((()=>({})))}}function Dt(e){const t=(0,a.useRef)(null);null===t.current&&(t.current=new At(e.createWorker));const r=(0,a.useState)(e.defaultState),n=e.context,o=e.stateContext;return a.createElement(n.Provider,{value:t.current},a.createElement(o.Provider,{value:r},e.children))}const It=function(){const e=(0,a.createContext)(At.default()),t=(0,a.createContext)([void 0,e=>{throw new Error("Not wrapped by provider")}]),r=function(e,t){return r=>{const n="defaultState"in r?r.defaultState:{};return a.createElement(Dt,{context:e,stateContext:t,createWorker:r.createWorker,defaultState:n},r.children)}}(e,t);return{reactContext:e,stateContext:t,Provider:r}}();function Tt(e){let{children:t,"data-testid":r}=e;return a.createElement("span",{"data-testid":r},a.createElement(u.Z,{disableGutters:!0,sx:{paddingLeft:1,paddingRight:1}},t))}function Pt(){const{array:e,push:t}=function(){const[e,t]=(0,a.useState)([]);return{array:e,push:(0,a.useCallback)((e=>{t((t=>[...t,e]))}),[t])}}(),r=ze(function(){const e=_e();try{const t=Ge(e);return null===t?{type:"unspecified"}:{type:"success",value:F(t)}}catch(t){return t instanceof SyntaxError?{type:"error",message:`[Error] Invalid JSON is given as URL parameter.\n${t.message}`}:t instanceof Error?{type:"error",message:t.message}:(console.error(t),{type:"error",message:"[Error] Some error occurred while parsing URL parameter"})}}(),fe(2),t),n=ze(function(){const e=_e().get(Ne);return null===e?{type:"unspecified"}:We.includes(e)?{type:"success",value:e}:{type:"error",message:`Invalid target name: ${e}`}}(),"self",t),{json:o,setJson:l,idealJson:s,setIdealJson:i,dgaInfo:u,idealInfo:E,workerInfo:y,postMessage:b,restart:h,runAsync:w}=function(e){let{defaultJson:t,onmessage:r}=e;const{postMessage:n,addListener:o,addRestartListener:l,restart:s,state:{json:i,dgaInfo:c,idealJson:u,idealInfo:m,workerInfo:d},runAsync:g}=Ct(It),p=(0,a.useCallback)((e=>{n({command:"updateJson",json:e})}),[n]),f=(0,a.useCallback)((e=>{n({command:"updateIdealJson",idealJson:e})}),[n]);return(0,a.useEffect)((()=>{o("useKohomologyWorker",r)}),[o,r]),(0,a.useEffect)((()=>{l("useKohomologyWorker",(()=>{p(i)}))}),[l,p,i]),(0,a.useEffect)((()=>{p(t),f("[]")}),[p,t,f]),{json:i,setJson:p,idealJson:u,setIdealJson:f,dgaInfo:c,idealInfo:m,workerInfo:d,postMessage:n,restart:s,runAsync:g}}({defaultJson:r,onmessage:e=>{}}),[x,k]=(0,a.useState)(n),{usageDialogProps:Z,usageButtonProps:C}=function(){const[e,t]=(0,a.useState)(!1);return{usageDialogProps:{open:e,setOpen:t},usageButtonProps:{setOpen:t}}}(),{restartDialogProps:S,restartButtonProps:A}=function(e){const[t,r]=(0,a.useState)(!1);return{restartDialogProps:{open:t,setOpen:r,restart:e},restartButtonProps:{setOpen:r}}}((()=>{h()})),{shareDGADialogProps:D,shareDGAButtonProps:I}=function(e){let{dgaJson:t,targetName:r}=e;const[n,o]=(0,a.useState)(!1);return{shareDGADialogProps:{open:n,setOpen:o,dgaJson:t,targetName:r},shareDGAButtonProps:{setOpen:o}}}({dgaJson:o,targetName:x}),{TabDialog:T,tabDialogProps:P,openDialog:J}=Ce(o,l),O=(0,a.useCallback)((async e=>await w("validateIdealGenerator",[e])),[w]),V=(0,a.useCallback)((async e=>await w("validateIdealGeneratorArray",[e])),[w]);return a.createElement(a.Fragment,null,a.createElement(yt,{messages:e}),a.createElement(m.Z,{direction:"column",spacing:2,divider:a.createElement(d.Z,{orientation:"horizontal"}),sx:{width:400,margin:1}},a.createElement(Tt,null,a.createElement(m.Z,{direction:"row",spacing:2},a.createElement(xt,C),a.createElement(kt,Z),a.createElement(it,A),a.createElement(ct,S))),a.createElement(Tt,{"data-testid":"CalculatorForm-StackItem-DGA"},"Input a Sullivan model of a space ",a.createElement(c.Z,{math:"X"}),":",a.createElement("div",null,u.map(((e,t)=>a.createElement(de,{styledMessage:e,key:t})))),a.createElement(m.Z,{direction:"row",spacing:2,sx:{marginTop:.5}},a.createElement(g.Z,{variant:"contained",size:"small",onClick:J,sx:{textTransform:"none"}},"Edit DGA"),a.createElement(T,P),a.createElement(gt,I),a.createElement(vt,D))),a.createElement(Tt,null,a.createElement(p.Z,{row:!0,value:x,onChange:e=>k(e.target.value)},We.map((e=>a.createElement(f.Z,{key:e,value:e,control:a.createElement(v.Z,{size:"small"}),label:a.createElement(rt,{targetName:e})})))),a.createElement(c.Z,{math:`\\cong ${Ye(x)}`}),"idealQuot"===x&&a.createElement(Oe,{setIdealJson:i,idealInfo:E,idealJson:s,validateGenerator:O,validateGeneratorArray:V})),a.createElement(Tt,null,a.createElement(st,{targetName:x,postMessageToWorker:e=>{b(e)},workerInfo:y}))))}var Jt=r(5113);function Ot(e){const t=(0,a.useRef)(null);return(0,a.useEffect)((()=>{(()=>{const e=t.current;null!==e&&void 0!==e.scrollTo&&function(e){return e.scrollTop+50>=e.scrollHeight-e.clientHeight}(e)&&setTimeout((()=>{e.scrollTo({top:e.scrollHeight,behavior:"smooth"})}))})()}),e),t}function Vt(e){let{messages:t}=e;const r=Ot([t]);return a.createElement(Jt.Z,{elevation:0,variant:"outlined",ref:r,"data-testid":"calculator-results",sx:{width:"700px",height:"700px",overflowY:"scroll",padding:"5px","@media screen and (max-width: 700px)":{width:"100%",height:"50vh",margin:"3px"}}},t.map(((e,t)=>a.createElement(de,{styledMessage:e,key:t}))))}function jt(){const{addListener:e,addRestartListener:t}=Ct(It),r=[se("success","Computation results will be shown here")],[n,o]=(0,a.useState)(r),l=(0,a.useCallback)((e=>{o(e instanceof Array?t=>t.concat(e):t=>t.concat([e]))}),[o]),s=(0,a.useCallback)((e=>{"printMessages"===e.command&&l(e.messages)}),[l]);return(0,a.useEffect)((()=>{e("MessageBoxForWorker",s)}),[e,s]),(0,a.useEffect)((()=>{t("MessageBoxForWorker",(()=>{l(se("success","The background process is restarted."))}))}),[t,l]),a.createElement(Vt,{messages:n})}var Nt=r(2949),$t=r(1265);function Lt(){const e=function(){const{colorMode:e}=(0,Nt.I)();return(0,a.useMemo)((()=>(0,$t.Z)({palette:{mode:e,primary:{main:"#7e6ca8"}}})),[e])}();return a.createElement(l.Z,{theme:e},a.createElement(s.Z,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"center",paddingTop:"10px",paddingBottom:"10px"}},a.createElement(It.Provider,{createWorker:()=>new i,defaultState:{json:"[]",idealJson:"[]",dgaInfo:[],idealInfo:se("success",""),workerInfo:{status:"idle"}}},a.createElement(Pt,null),a.createElement(jt,null))))}function Mt(){return a.createElement(o.Z,{fallback:a.createElement("div",null,"Loading...")},(()=>a.createElement(Lt,null)))}function _t(){return a.createElement(n.Z,{title:"Calculator"},a.createElement(Mt,null))}}}]);