"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[842],{37:(e,t,r)=>{r.r(t),r.d(t,{default:()=>wt});var n=r(6944),s=r(8445),o=r(2679),a=r(8478),i=r(5916),l=r(7733),c=r(6540),u=r(6036),d=r(3030),g=r(2259),p=r(6132),m=r(2007),f=r(1543),h=r(7512),x=r(8228),y=r(6071),b=r(1303),v=r(5159);const j=[{key:"name",label:"generator",width:90,getRegisterName:e=>`generatorArray.${e}.name`,isError:(e,t)=>A({errors:e,index:t,key:"name"}),inputProps:{"data-testid":"ArrayEditor-input-name"}},{key:"degree",label:(e,t)=>`deg(${e.generatorArray[t].name})`,width:80,type:"number",valueAsNumber:!0,getRegisterName:e=>`generatorArray.${e}.degree`,isError:(e,t)=>A({errors:e,index:t,key:"degree"})||function({errors:e}){return void 0!==e._global_errors?.generatorDegrees}({errors:e}),inputProps:{"data-testid":"ArrayEditor-input-degree"}},{key:"differentialValue",label:(e,t)=>`d(${e.generatorArray[t].name})`,width:200,getRegisterName:e=>`generatorArray.${e}.differentialValue`,isError:(e,t)=>A({errors:e,index:t,key:"differentialValue"}),inputProps:{"data-testid":"ArrayEditor-input-differentialValue"}}];function A({errors:e,index:t,key:r}){const n=e.generatorArray?.[t]?.[r];return void 0!==n}function w(e){return C(JSON.parse(e))}function C(e){return`[\n${e.map((e=>`  ["${e[0]}", ${e[1]}, "${e[2]}"]`)).join(",\n")}\n]`}function k(e){return C(e.map((({name:e,degree:t,differentialValue:r})=>[e,Number.isNaN(t)?1:t,r])))}var S=r(6500),T=r(4921);const D=S.z.string().min(1,"Please enter the name.").superRefine(((e,t)=>{const r=(0,T.validateGeneratorName)(e);switch(r.type){case"success":return;case"error":return void t.addIssue({code:S.z.ZodIssueCode.custom,message:r.message});default:throw new Error("This can't happen!")}})),I=function(e){return S.z.preprocess((e=>{if(!Number.isNaN(e))return e}),S.z.number({error:t=>void 0===t.input?e:void 0}))}("Please enter the degree.").refine((e=>0!==e),"The degree cannot be 0."),E=S.z.string().min(1,"Please enter the value of the differential."),N=S.z.object({name:D,degree:I,differentialValue:E});var J=r(2608);const M=S.z.array(N).superRefine(((e,t)=>{!function(e,t){e.forEach(((r,n)=>{const s=function(e,t,r){if(e[t].differentialValue!==r)throw new Error("generatorArray[index] and value do not match.");const n=k(e.slice(0,t+1)),s=(0,T.validateDifferentialValueOfTheLast)(n);switch(s.type){case"success":case"N/A":return!0;default:return s.message}}(e,n,r.differentialValue);"string"==typeof s&&t.addIssue({path:[n,"differentialValue"],code:S.z.ZodIssueCode.custom,message:s})}))}(e,t)})),_=S.z.object({generatorDegrees:S.z.null()}),O=S.z.object({generatorArray:M,_global_errors:_.optional()}).superRefine(((e,t)=>{!function(e,t){const r=function(e){const t=e.filter((e=>e.degree>0)).length,r=e.filter((e=>e.degree<0)).length;return!(t>0&&r>0)||"Cannot mix generators of positive and negative degrees."}(e);"string"==typeof r&&t.addIssue({path:["_global_errors","generatorDegrees"],code:S.z.ZodIssueCode.custom,message:r})}(e.generatorArray,t),function(e,t){const r=function(e){const t=e.map((e=>e.name)),r=new Map;return t.forEach(((e,n)=>{const s=t.indexOf(e);s!==n&&(r.set(n,`Generator names must be unique, but ${e} is already used.`),r.set(s,J._))})),r}(e);r.forEach(((e,r)=>{t.addIssue({path:["generatorArray",r,"name"],code:S.z.ZodIssueCode.custom,message:e})}))}(e.generatorArray,t)}));function P(e){const t=e._global_errors;if(void 0===t)return[];return Object.keys(_.shape).map((e=>t[e]))}function R(e){return{name:(0,v.b)({usedValues:e.map((e=>e.name)),candidates:"xyzuvwabc".split(""),fallback:""}),degree:1,differentialValue:"0"}}function L(e){const t=function(e){const t={generatorArray:(r=e.json,JSON.parse(r).map((([e,t,r])=>({name:e,degree:t,differentialValue:r}))))};var r;return(0,u.WE)({defaultValues:t,setValues:t=>{e.updateDgaWrapper(k(t.generatorArray))},getGlobalErrors:P,getNext:R,schema:O,arrayKey:"generatorArray",fieldOptionsList:j,getFieldErrorArray:z})}(e);return{label:"Array",editor:t}}function z({errors:e,index:t}){const r=e.generatorArray?.[t];return void 0===r?[]:["name","degree","differentialValue"].flatMap((e=>r[e]))}var V=r(3581),$=r(1729),F=r(8440),W=r(9368),G=r(421);function Q(e){if(!Number.isInteger(e))throw new Error("dim must be an integer");if(e<=0)throw new Error("dim must be positive");return e%2==0?`[\n  ["x", ${e}, "0"],\n  ["y", ${2*e-1}, "x^2"]\n]`:`[\n  ["x", ${e}, "0"]\n]`}function K(e){if(!Number.isInteger(e))throw new Error("dim must be an integer");if(e<=0)throw new Error("dim must be positive");return`[\n  ["c", 2, "0"],\n  ["x", ${2*e+1}, "c^${e+1}"]\n]`}function B(e){const t=e.stringType;if(!o.hM.includes(t))throw new Error(`Invalid stringType: ${t}`);return{stringType:t,content:e.content}}function H(e){const t=[{text:e.plainString,label:"Copy this line"}];return null!==e.dgaJson&&void 0!==e.dgaJson&&t.push({text:e.dgaJson,label:"Copy this DGA as JSON"}),t}function q(e){const t=e.messageType;if(!o.t_.includes(t))throw new Error(`Invalid messageType: ${t}`);return{messageType:t,strings:e.strings.map(B),plainString:e.plainString,options:H(e.options)}}var U=r(4848);const Z=["S^n","CP^3","7-mfd","arkowitz-lupton"];function X(e){try{return e()}catch{return}}function Y(e,t){const[r,n]=(0,c.useState)(2);return{json:X((()=>e(r))),renderSelectItem:t,renderForm:()=>(0,U.jsx)(V.A,{label:"n",value:r,type:"number",onChange:e=>n(parseInt(e.target.value)),sx:{width:100},size:"small"})}}function ee(e){if(void 0===e)return[(0,o.sH)("error","Error")];return new T.FreeDGAWrapper(e).dgaInfo().map(q)}function te(e){const[t,r]=(0,c.useState)(""),n={"S^n":Y(Q,(()=>(0,U.jsx)(g.A,{math:"S^n"}))),"CP^3":Y(K,(()=>(0,U.jsx)(g.A,{math:"\\mathbb CP^n"}))),"7-mfd":{json:'[\n  ["a", 2, "0"],\n  ["b", 2, "0"],\n  ["x", 3, "a^2"],\n  ["y", 3, "a*b"],\n  ["z", 3, "b^2"]\n]',renderSelectItem:()=>(0,U.jsx)("span",{children:"a 7-manifold"})},"arkowitz-lupton":{json:'[\n  ["x_1", 10, "0"],\n  ["x_2", 12, "0"],\n  ["y_1", 41, "x_1^3 * x_2"],\n  ["y_2", 43, "x_1^2 * x_2^2"],\n  ["y_3", 45, "x_1 * x_2^3"],\n  ["z", 119, "x_2 * (y_1*x_2 - x_1*y_2) * (y_2*x_2 - x_1*y_3) + x_1^12 + x_2^10"]\n]',renderSelectItem:()=>(0,U.jsx)("span",{children:"Arkowitz-Lupton's example"})}},s=""===t?void 0:n[t],o=s?.json;const a="Select an example",i="label-select-dga-example";return{label:"Examples",editor:{getOnSubmit:function(t){return async r=>{void 0!==o&&(e.updateDgaWrapper(o),t())}},beforeOpen:function(){r("")},disableSubmit:function(){return void 0===o},renderContent:e=>(0,U.jsxs)(m.A,{spacing:2,sx:{marginTop:1},children:[(0,U.jsxs)($.A,{children:[(0,U.jsx)(F.A,{id:i,children:a}),(0,U.jsx)(W.A,{labelId:i,label:a,value:t,onChange:e=>r(e.target.value),sx:{width:300},children:Z.map((e=>(0,U.jsx)(G.A,{value:e,children:n[e].renderSelectItem()},e)))})]}),s?.renderForm?.(),void 0!==s&&(0,U.jsx)(m.A,{children:ee(s.json).map(((e,r)=>(0,U.jsx)(d.Q,{styledMessage:e},`${t}-${r}`)))})]})}}}function re(e){const t=(0,T.validateJson)(e);return"success"===t.type||t.message}const ne=["array","json","example"];const se=[{key:"text",label:"generator",width:300,getRegisterName:e=>`generatorArray.${e}.text`,isError:(e,t)=>!1,inputProps:e=>({"data-testid":`IdealEditorItem-input-${e}`})}];function oe(e){return S.z.string().nonempty("Please enter the generator.").superRefine((async(t,r)=>{const n=await e(t);"string"==typeof n&&r.addIssue({path:[],code:S.z.ZodIssueCode.custom,message:n})}))}function ae(e){return S.z.object({text:oe(e)})}const ie=S.z.object({validateGeneratorArray:S.z.null()});function le(e,t){return function(e,t){return S.z.object({generatorArray:ae(e).array(),_global_errors:ie.optional()}).superRefine((async(e,r)=>{const n=e.generatorArray.map((e=>e.text)),s=await t(n);"string"==typeof s&&r.addIssue({path:["_global_errors","validateGeneratorArray"],code:S.z.ZodIssueCode.custom,message:s})}))}(e,t)}function ce({idealJson:e,setIdealJson:t,validateGenerator:r,validateGeneratorArray:n}){return(0,u.WE)({defaultValues:{generatorArray:ue(e)},setValues:e=>t(function(e){const t=e.map((({text:e})=>e));return JSON.stringify(t)}(e.generatorArray)),getGlobalErrors:de,getNext:e=>({text:""}),arrayKey:"generatorArray",schema:le(r,n),zodResolverMode:"async",fieldOptionsList:se,getFieldErrorArray:ge})}function ue(e){return JSON.parse(e).map((e=>({text:e})))}function de(e){if(void 0!==e.generatorArray)return[];const t=e._global_errors?.validateGeneratorArray;return void 0===t?[]:[t]}function ge({errors:e,index:t}){const r=e.generatorArray?.[t]?.text;return void 0===r?[]:[r]}function pe({setIdealJson:e,idealInfo:t,idealJson:r,validateGenerator:n,validateGeneratorArray:s}){const o=ce({idealJson:r,setIdealJson:e,validateGenerator:n,validateGeneratorArray:s}),{editorDialogProps:a,openDialog:i}=(0,u.$n)({editor:o});return(0,U.jsxs)("div",{children:[(0,U.jsx)(d.Q,{styledMessage:t}),(0,U.jsx)(h.A,{onClick:i,variant:"contained",sx:{textTransform:"none"},children:"Edit ideal"}),(0,U.jsx)(u.qC,{...a})]})}const me={parse:e=>e.split("."),stringify:e=>e.join(".")};function fe(e){const t=JSON.parse(e);if(!function(e){if(!Array.isArray(e))return!1;for(const t of e)if(!Array.isArray(t)||3!==t.length||"string"!=typeof t[0]||"number"!=typeof t[1]||"string"!=typeof t[2]||t[0].includes(".")||t[2].includes("."))return!1;return!0}(t))return null;const r=t.map((([e,t,r])=>[e,t.toString(),r])).flat();return me.stringify(r)}function he(e){const t=function(e){const t=e.length/3;if(e.length%3!=0)throw new Error(`Invalid data from URL: "${e}"\nIts length must be divisible by 3, but was ${e.length}`);const r=[];for(let n=0;n<t;n++)r.push([e[3*n],parseInt(e[3*n+1]),e[3*n+2]]);return r}(me.parse(e));return JSON.stringify(t)}function xe(e){const t=JSON.parse(e);return function(e){if(!Array.isArray(e))return!1;for(const t of e)if("string"!=typeof t)return!1;return!0}(t)?me.stringify(t):null}const ye={dgaJson:"dgaJson",dgaDsv:"dgaDsv",idealDsv:"idealDsv",taretName:"target"};function be(e,t){switch(t){case"json":{const t=function(e){try{const t=JSON.parse(e);return JSON.stringify(t,null,void 0)}catch(t){if(t instanceof SyntaxError)return null;throw t}}(e);return null===t?null:[ye.dgaJson,t]}case"dsv":{const t=fe(e);return null===t?null:[ye.dgaDsv,t]}case"auto":{const t=be(e,"dsv");if(null!==t)return t;const r=be(e,"json");return null!==r?r:null}}}var ve=r(6347);function je(){const{search:e}=(0,ve.zy)();return(0,c.useMemo)((()=>new URLSearchParams(e)),[e])}function Ae(){const e=je();try{const t=function(e){const t=e.get(ye.dgaJson);if(null!==t)return t;const r=e.get(ye.dgaDsv);return null!==r?he(r):null}(e);return null===t?{type:"unspecified"}:{type:"success",value:w(t)}}catch(t){return t instanceof SyntaxError?{type:"error",message:`[Error] Invalid JSON is given as URL parameter.\n${t.message}`}:t instanceof Error?{type:"error",message:t.message}:(console.error(t),{type:"error",message:"[Error] Some error occurred while parsing URL parameter"})}}const we=["self","freeLoopSpace","cyclic","derivation","idealQuot"],Ce=["basis","dim"];s.p;function ke(e,t,r){return(0,c.useEffect)((()=>{"error"===e.type&&r(e.message)}),[r,e.type,e.message]),"success"===e.type?e.value:t}var Se=r(8486),Te=r(8011),De=r(5611),Ie=r(6786),Ee=r(3246);function Ne({value:e}){return null===e?(0,U.jsx)(Ee.A,{size:20}):(0,U.jsx)(Ee.A,{variant:"determinate",value:e,size:20})}function Je(e,t){return e?null===t?"Computing":`Computing (${t}%)`:"Compute"}function Me({computing:e,progress:t,message:r,...n}){const s=n.disabled??!1,o=null===(a=t)?null:Math.floor(100*a);var a;return(0,U.jsxs)(m.A,{children:[(0,U.jsxs)(h.A,{...n,disabled:s||e,children:[Je(e,o),e&&(0,U.jsx)(Ne,{value:o})]}),r]})}function _e({label:e,value:t,setValue:r,width:n,disabled:s}){return(0,U.jsx)(V.A,{label:e,value:t,type:"number",onChange:e=>r(e.target.value),sx:{width:n},size:"small",disabled:s})}function Oe({label:e,defaultValue:t,width:r,disabled:n}){const[s,o]=(0,c.useState)(t.toString()),a={label:e,value:s,setValue:o,width:void 0!==r?r:70,disabled:void 0!==n&&n};return[parseInt(s),a]}function Pe({label:e,value:t,setValue:r,width:n,disabled:s}){return(0,U.jsx)(V.A,{label:e,value:t,onChange:e=>r(e.target.value),sx:{width:n},size:"small",disabled:s})}function Re(e){switch(e){case"self":return"\\Lambda V";case"freeLoopSpace":return"\\Lambda V \\otimes \\Lambda \\overline{V}";case"cyclic":return"\\Lambda u \\otimes\\Lambda V \\otimes \\Lambda \\overline{V}";case"derivation":return"\\mathrm{Der}(\\Lambda V)";case"idealQuot":return"\\Lambda V / I"}}function Le(e,t=void 0){return`H^{${void 0!==t?t:"*"}}(${Re(e)})`}function ze({targetName:e,degree:t}){return(0,U.jsx)(g.A,{math:Le(e,t)})}function Ve(e){switch(e){case"self":return"H^*(X)";case"freeLoopSpace":return"H^*(LX)";case"cyclic":return"H^*_{S^1}(LX)";case"derivation":return"\\pi_{-*}(\\mathrm{aut}_1(X))\\otimes\\mathbb{Q}";case"idealQuot":return"H^*(\\Lambda V / I)"}}function $e({targetName:e}){return(0,U.jsx)(g.A,{math:Ve(e)})}function Fe(e){return{computing:"computing"===e.status,workerProgress:"computing"===e.status?e.progress:null,message:"computing"===e.status?e.message:void 0}}function We({targetName:e,postMessageToWorker:t,visible:r,workerInfo:n}){const[s,o]=Oe({label:"",defaultValue:0}),[a,i]=Oe({label:"",defaultValue:20}),[l,u]=(0,c.useState)("basis"),d=(0,c.useCallback)((r=>{r.preventDefault();t({command:"computeCohomology",targetName:e,minDegree:s,maxDegree:a,showCohomology:l})}),[e,s,a,l,t]);if(!r)return(0,U.jsx)(c.Fragment,{});const p=Ke(e,"cohomology"),{computing:f,workerProgress:h}=Fe(n);return(0,U.jsx)("form",{onSubmit:d,"data-testid":"ComputeCohomologyForm",children:(0,U.jsxs)(m.A,{spacing:1,children:[(0,U.jsxs)("span",{children:["Compute cohomology ",(0,U.jsx)(ze,{targetName:e,degree:"n"})," for"]}),(0,U.jsxs)(m.A,{direction:"row",alignItems:"center",justifyContent:"center",spacing:1,children:[(0,U.jsx)(_e,{...o}),(0,U.jsx)(g.A,{math:"\\leq n \\leq"}),(0,U.jsx)(_e,{...i})]}),(0,U.jsx)(x.A,{row:!0,value:l,onChange:e=>u(e.target.value),children:Ce.map((e=>(0,U.jsx)(y.A,{value:e,control:(0,U.jsx)(b.A,{}),label:e},e)))}),(0,U.jsx)(Me,{type:"submit",variant:"contained",disabled:!p,computing:f,progress:h}),!p&&(0,U.jsx)(Se.A,{severity:"info",children:"Currently, this type of computation is not supported."})]})})}function Ge({targetName:e,postMessageToWorker:t,visible:r,workerInfo:n}){const s=Ke(e,"class"),[o,a]=function({label:e,defaultValue:t,width:r,disabled:n}){const[s,o]=(0,c.useState)(t);return[s,{label:e,value:s,setValue:o,width:void 0!==r?r:70,disabled:void 0!==n&&n}]}({label:"",defaultValue:"x^2",width:200,disabled:!s}),[i,l]=(0,c.useState)(!0),u=(0,c.useCallback)((r=>{r.preventDefault();t({command:"computeCohomologyClass",targetName:e,cocycleString:o,showBasis:i})}),[e,o,i,t]);if(!r)return(0,U.jsx)(c.Fragment,{});const{computing:d,workerProgress:p}=Fe(n);return(0,U.jsx)("form",{onSubmit:u,"data-testid":"ComputeClassForm",children:(0,U.jsxs)(m.A,{spacing:1,children:[(0,U.jsxs)("span",{children:["Compute cohomology class ",(0,U.jsx)(g.A,{math:`[\\omega] \\in ${Le(e)}`})," for"]}),(0,U.jsxs)(m.A,{direction:"row",alignItems:"center",justifyContent:"center",spacing:1,children:[(0,U.jsx)(g.A,{math:"\\omega ="}),(0,U.jsx)(Pe,{...a})]}),(0,U.jsx)(y.A,{control:(0,U.jsx)(Te.A,{}),label:"Show basis",checked:i,onChange:e=>l(e.target.checked)}),(0,U.jsx)(Me,{type:"submit",variant:"contained",disabled:!s,computing:d,progress:p}),!s&&(0,U.jsx)(Se.A,{severity:"info",children:"Currently, this type of computation is not supported."})]})})}function Qe({targetName:e,postMessageToWorker:t,visible:r,workerInfo:n}){const[s,o]=Oe({label:"",defaultValue:10}),a=(0,c.useCallback)((r=>{r.preventDefault();t({command:"computeMinimalModel",targetName:e,isomorphismUpTo:s})}),[e,s,t]);if(!r)return(0,U.jsx)(c.Fragment,{});const i=Ke(e,"minimal"),{computing:l,workerProgress:u,message:d}=Fe(n);return(0,U.jsx)("form",{onSubmit:a,"data-testid":"ComputeMinimalModel",children:(0,U.jsxs)(m.A,{spacing:1,children:[(0,U.jsxs)(m.A,{direction:"row",alignItems:"center",justifyContent:"center",spacing:1,children:["Compute minimal model until degree",(0,U.jsx)(_e,{...o})]}),(0,U.jsx)(Me,{type:"submit",variant:"contained",disabled:!i,computing:l,progress:u,message:d}),!i&&(0,U.jsx)(Se.A,{severity:"info",children:"Currently, this type of computation is not supported."})]})})}function Ke(e,t){switch(e){case"self":case"cyclic":case"idealQuot":return!0;case"freeLoopSpace":switch(t){case"cohomology":case"class":return!0;case"minimal":return!1}case"derivation":switch(t){case"cohomology":return!0;case"class":case"minimal":return!1}}}function Be({targetName:e,postMessageToWorker:t,workerInfo:r}){const[n,s]=(0,c.useState)("cohomology");return(0,U.jsxs)(c.Fragment,{children:[(0,U.jsxs)(De.A,{value:n,onChange:(e,t)=>{s(t)},children:[(0,U.jsx)(Ie.A,{value:"cohomology",label:"Cohomology group",sx:{textTransform:"none"}}),(0,U.jsx)(Ie.A,{value:"class",label:"Cohomology class",sx:{textTransform:"none"}}),(0,U.jsx)(Ie.A,{value:"minimal",label:"Minimal model",sx:{textTransform:"none"}})]}),(0,U.jsx)(We,{targetName:e,postMessageToWorker:t,visible:"cohomology"===n,workerInfo:r}),(0,U.jsx)(Ge,{targetName:e,postMessageToWorker:t,visible:"class"===n,workerInfo:r}),(0,U.jsx)(Qe,{targetName:e,postMessageToWorker:t,visible:"minimal"===n,workerInfo:r})]})}var He=r(3051),qe=r(8968),Ue=r(5993);function Ze({setOpen:e}){return(0,U.jsx)(h.A,{variant:"contained",size:"small",onClick:()=>e(!0),children:"Restart"})}function Xe({open:e,setOpen:t,restart:r}){return(0,U.jsxs)(He.A,{open:e,onClose:()=>t(!1),children:[(0,U.jsx)(qe.A,{children:"Are you sure to restart the background process (WebWorker)? This will stop the current computation (if exists) and clear the cache."}),(0,U.jsxs)(Ue.A,{children:[(0,U.jsx)(h.A,{onClick:()=>{r(),t(!1)},variant:"contained",children:"Restart"}),(0,U.jsx)(h.A,{onClick:()=>t(!1),variant:"outlined",children:"Cancel"})]})]})}var Ye=r(6025),et=r(1922),tt=r(4586),rt=r(1233);var nt=r(4238);function st({setOpen:e}){return(0,U.jsx)(h.A,{onClick:()=>e(!0),sx:{textTransform:"none"},variant:"outlined",size:"small",children:"Share this DGA"})}function ot({text:e}){const[t,r]=(0,c.useState)(!1);return(0,U.jsx)(et.A,{title:"Copied",open:t,onClose:()=>r(!1),children:(0,U.jsx)(h.A,{onClick:async()=>{await navigator.clipboard.writeText(e),r(!0)},variant:"contained",size:"small",children:"copy"})})}function at({dgaJson:e,idealJson:t,targetName:r}){const n=function({dgaJson:e,format:t,idealJson:r,targetName:n}){const s=new URLSearchParams,o=be(e,t);if(null!==o){const[e,t]=o;s.append(e,t)}const a=xe(r);return null!==a&&""!==a&&s.append(ye.idealDsv,a),s.append(ye.taretName,n),s}({dgaJson:e,format:"auto",idealJson:t,targetName:r}),s=`${function(){const e=(0,tt.A)();return(0,rt.D)()?window.location.origin:e.siteConfig.url}()}${(0,Ye.Ay)("calculator")}?${n.toString()}`;return(0,U.jsxs)(c.Fragment,{children:[(0,U.jsx)(V.A,{label:"url",value:s,sx:{width:300},size:"small",InputProps:{readOnly:!0},multiline:!0}),(0,U.jsx)(ot,{text:s})]})}function it({open:e,setOpen:t,dgaJson:r,idealJson:n,targetName:s}){const o=(0,nt.C)();return(0,U.jsxs)(He.A,{open:e,onClose:()=>t(!1),PaperProps:{sx:{[o]:{margin:0,width:"calc(100% - 5pt)"}}},children:[(0,U.jsx)(qe.A,{children:(0,U.jsx)(at,{dgaJson:r,idealJson:n,targetName:s})}),(0,U.jsx)(Ue.A,{children:(0,U.jsx)(h.A,{onClick:()=>t(!1),variant:"outlined",children:"Close"})})]})}var lt=r(1278);function ct({messages:e}){const[t,r]=(0,c.useState)(!0);if(0===e.length)return(0,U.jsx)(c.Fragment,{});const n=(e,t)=>{"clickaway"!==t&&r(!1)};return(0,U.jsx)(lt.A,{open:t,anchorOrigin:{vertical:"top",horizontal:"center"},onClose:n,children:(0,U.jsx)(Se.A,{severity:"error",onClose:n,variant:"filled",elevation:6,children:e.map(((e,t)=>(0,U.jsx)("div",{style:{whiteSpace:"pre-wrap"},children:e},t)))})})}var ut=r(8453);function dt(e){const t={p:"p",...(0,ut.R)(),...e.components};return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(t.p,{children:'Input a Sullivan algebra from the "Edit DGA" button'}),"\n",(0,U.jsx)(t.p,{children:"This calculator can compute the cohomology of the Sullivan algebra, its Hochschild homology (cohomology of the free loop space), and its cyclic homology (equivariant cohomology of the free loop space)."}),"\n",(0,U.jsx)(t.p,{children:'Note that "u" cannot be used as a generator when "cyclic" is selected, since "u" is reserved for the model of the cyclic homology.'})]})}function gt(e={}){const{wrapper:t}={...(0,ut.R)(),...e.components};return t?(0,U.jsx)(t,{...e,children:(0,U.jsx)(dt,{...e})}):dt(e)}function pt({setOpen:e}){return(0,U.jsx)(h.A,{onClick:()=>e(!0),sx:{textTransform:"none"},variant:"outlined",size:"small",children:"Show usage"})}function mt({open:e,setOpen:t}){return(0,U.jsxs)(He.A,{open:e,onClose:()=>t(!1),children:[(0,U.jsx)(qe.A,{children:(0,U.jsx)(gt,{})}),(0,U.jsx)(Ue.A,{children:(0,U.jsx)(h.A,{onClick:()=>t(!1),variant:"outlined",children:"Close"})})]})}var ft=r(7472);const ht=(0,ft.Q)((()=>new Worker(new URL(r.p+r.u(714),r.b))));function xt(e){const t=e.get(ye.idealDsv);return null===t||""===t?null:function(e){const t=me.parse(e);return JSON.stringify(t)}(t)}function yt({children:e,"data-testid":t}){return(0,U.jsx)("span",{"data-testid":t,children:(0,U.jsx)(p.A,{disableGutters:!0,sx:{paddingLeft:1,paddingRight:1},children:e})})}function bt(){const{array:e,push:t}=function(){const[e,t]=(0,c.useState)([]);return{array:e,push:(0,c.useCallback)((e=>{t((t=>[...t,e]))}),[t])}}(),r=ke(Ae(),Q(2),t),n=ke(function(){const e=je();try{const t=xt(e);return null===t?{type:"unspecified"}:{type:"success",value:t}}catch(t){return t instanceof Error?{type:"error",message:t.message}:(console.error(t),{type:"error",message:"[Error] Some error occurred while parsing URL parameter"})}}(),"[]",t),s=ke(function(){const e=je().get(ye.taretName);return null===e?{type:"unspecified"}:we.includes(e)?{type:"success",value:e}:{type:"error",message:`Invalid target name: ${e}`}}(),"self",t),{json:o,setJson:a,idealJson:i,setIdealJson:l,dgaInfo:p,idealInfo:v,workerInfo:j,postMessage:A,restart:w,runAsync:C}=function({defaultJson:e,defaultIdealJson:t,onmessage:r}){const{postMessage:n,addListener:s,addRestartListener:o,restart:a,state:{json:i,dgaInfo:l,idealJson:u,idealInfo:d,workerInfo:g},runAsync:p}=(0,ft.q)(ht),m=(0,c.useCallback)((e=>{n({command:"updateJson",json:e})}),[n]),f=(0,c.useCallback)((e=>{n({command:"updateIdealJson",idealJson:e})}),[n]);return(0,c.useEffect)((()=>{s("useKohomologyWorker",r)}),[s,r]),(0,c.useEffect)((()=>{o("useKohomologyWorker",(()=>{m(i)}))}),[o,m,i]),(0,c.useEffect)((()=>{m(e),f(t)}),[m,e,f,t]),{json:i,setJson:m,idealJson:u,setIdealJson:f,dgaInfo:l,idealInfo:d,workerInfo:g,postMessage:n,restart:a,runAsync:p}}({defaultJson:r,defaultIdealJson:n,onmessage:e=>{}}),[k,S]=(0,c.useState)(s),{usageDialogProps:T,usageButtonProps:D}=function(){const[e,t]=(0,c.useState)(!1);return{usageDialogProps:{open:e,setOpen:t},usageButtonProps:{setOpen:t}}}(),{restartDialogProps:I,restartButtonProps:E}=function(e){const[t,r]=(0,c.useState)(!1);return{restartDialogProps:{open:t,setOpen:r,restart:e},restartButtonProps:{setOpen:r}}}((()=>{w()})),{shareDGADialogProps:N,shareDGAButtonProps:J}=function({dgaJson:e,idealJson:t,targetName:r}){const[n,s]=(0,c.useState)(!1);return{shareDGADialogProps:{open:n,setOpen:s,dgaJson:e,idealJson:t,targetName:r},shareDGAButtonProps:{setOpen:s}}}({dgaJson:o,idealJson:i,targetName:k}),{editorDialogProps:M,openDialog:_}=function(e,t){const r={array:L({json:e,updateDgaWrapper:t}),json:(n={json:e,updateDgaWrapper:t},{label:"JSON",editor:(0,u.Qu)({text:n.json,setText:n.updateDgaWrapper,preventPrompt:"Your JSON is not saved. Are you sure you want to quit?",fieldLabel:"Input your DGA",fieldTestid:"JsonEditorDialog-input-json",validate:re})}),example:te({updateDgaWrapper:t})};var n;const s=(0,u.KD)({tabItems:r,tabKeys:ne,defaultTabKey:"array"}),{editorDialogProps:o,openDialog:a}=(0,u.$n)({editor:s});return{editorDialogProps:o,openDialog:a}}(o,a),O=(0,c.useCallback)((async e=>await C("validateIdealGenerator",[e])),[C]),P=(0,c.useCallback)((async e=>await C("validateIdealGeneratorArray",[e])),[C]);return(0,U.jsxs)(c.Fragment,{children:[(0,U.jsx)(ct,{messages:e}),(0,U.jsxs)(m.A,{direction:"column",spacing:2,divider:(0,U.jsx)(f.A,{orientation:"horizontal"}),sx:{width:400,margin:1},children:[(0,U.jsx)(yt,{children:(0,U.jsxs)(m.A,{direction:"row",spacing:2,children:[(0,U.jsx)(pt,{...D}),(0,U.jsx)(mt,{...T}),(0,U.jsx)(Ze,{...E}),(0,U.jsx)(Xe,{...I})]})}),(0,U.jsxs)(yt,{"data-testid":"CalculatorForm-StackItem-DGA",children:["Input a Sullivan model of a space ",(0,U.jsx)(g.A,{math:"X"}),":",(0,U.jsx)("div",{"data-testid":"CalculatorForm-dga-info","data-dga-json":o,children:p.map(((e,t)=>(0,U.jsx)(d.Q,{styledMessage:e},t)))}),(0,U.jsxs)(m.A,{direction:"row",spacing:2,sx:{marginTop:.5},children:[(0,U.jsx)(h.A,{variant:"contained",size:"small",onClick:_,sx:{textTransform:"none"},children:"Edit DGA"}),(0,U.jsx)(u.qC,{...M}),(0,U.jsx)(st,{...J}),(0,U.jsx)(it,{...N})]})]}),(0,U.jsxs)(yt,{"data-testid":"CalculatorForm-StackItem-SelectTarget",children:[(0,U.jsx)(x.A,{row:!0,value:k,onChange:e=>S(e.target.value),children:we.map((e=>(0,U.jsx)(y.A,{value:e,control:(0,U.jsx)(b.A,{size:"small"}),label:(0,U.jsx)($e,{targetName:e})},e)))}),(0,U.jsx)(g.A,{math:`\\cong ${Le(k)}`}),"idealQuot"===k&&(0,U.jsx)(pe,{setIdealJson:l,idealInfo:v,idealJson:i,validateGenerator:O,validateGeneratorArray:P})]}),(0,U.jsx)(yt,{children:(0,U.jsx)(Be,{targetName:k,postMessageToWorker:e=>{A(e)},workerInfo:j})})]})]})}var vt=r(6398);function jt(){const e=(0,vt.Q)();return(0,U.jsx)(i.A,{theme:e,children:(0,U.jsx)(l.A,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"center",paddingTop:"10px",paddingBottom:"10px"},children:(0,U.jsxs)(ht.Provider,{defaultState:{json:"[]",idealJson:"[]",dgaInfo:[],idealInfo:(0,o.sH)("success",""),workerInfo:{status:"idle"}},children:[(0,U.jsx)(bt,{}),(0,U.jsx)(s.C,{context:ht})]})})})}function At(){return(0,U.jsx)(a.A,{fallback:(0,U.jsx)("div",{children:"Loading..."}),children:()=>(0,U.jsx)(jt,{})})}function wt(){return(0,U.jsx)(n.A,{title:"Calculator",children:(0,U.jsx)(At,{})})}},723:(e,t,r)=>{r.d(t,{d:()=>s});var n=r(6540);function s(){const e=(0,n.useRef)(null);return(0,n.useCallback)(((t,r)=>{null!==e.current&&clearTimeout(e.current);const n=setTimeout(t,r);e.current=n}),[])}},1450:(e,t,r)=>{r.d(t,{Q:()=>g});var n=r(9785),s=r(6540),o=r(2608),a=r(2007),i=r(3581),l=r(723),c=r(4848);function u({register:e,errors:t,fieldLabel:r,fieldTestid:n,validate:u,trigger:g}){const p=(0,l.d)(),m=(0,s.useCallback)((()=>p((async()=>await g()),1e3)),[p,g]);return(0,c.jsxs)(a.A,{spacing:2,sx:{marginTop:1},children:[(0,c.jsx)(i.A,{label:r,multiline:!0,inputProps:void 0!==n?{"data-testid":n}:void 0,...e("text",{validate:u,onChange:m}),error:void 0!==t.text}),(0,c.jsx)(o.J,{fieldErrorArray:d(t)})]})}function d(e){const t=e.text;return void 0===t?[]:[t]}function g({text:e,setText:t,preventPrompt:r,fieldLabel:s,fieldTestid:o,validate:a}){const{register:i,handleSubmit:l,getValues:d,reset:g,trigger:p,formState:{errors:m}}=(0,n.mN)({mode:"onBlur",reValidateMode:"onBlur",shouldUnregister:!1,defaultValues:{text:e}});const f={register:i,errors:m,trigger:p,fieldLabel:s,fieldTestid:o,validate:a};return{preventQuit:function(){return d().text!==e?r:void 0},getOnSubmit:function(e){return l((({text:r})=>{t(r),e()}))},beforeOpen:function(){g({text:e})},disableSubmit:function(){return void 0!==m.text},renderContent:e=>(0,c.jsx)(u,{...f})}}},2137:(e,t,r)=>{r.d(t,{q:()=>o});var n=r(6540),s=r(9888);function o(e){const t=(0,n.useContext)(e.reactContext),[r,o]=(0,n.useContext)(e.stateContext);(0,n.useEffect)((()=>{t.subscribe("__set_worker_state__",(e=>{const t=function(e){return"updateState"===e.type}(r=e)?{[r.key]:r.value}:null;var r;null!==t&&o((e=>({...e,...t})))}))}),[t,o]);const i=(0,n.useCallback)((e=>{const r="__useSyncExternalStore__";return t.subscribe(r,e),()=>t.unsubscribe(r)}),[t]),l=(0,n.useCallback)((()=>t.workerOutputLog),[t]),c=(0,s.useSyncExternalStore)(i,l),u=(0,n.useCallback)((e=>{const r={type:"input",value:e};t.postMessage(r)}),[t]),d=(0,n.useCallback)(((e,r)=>{t.subscribe(e,(e=>{"output"===e.type&&r(e.value)}))}),[t]),g=(0,n.useCallback)(((e,r)=>{t.subscribeRestart(e,r)}),[t]);return{postMessage:u,workerOutputLog:c,addListener:d,restart:(0,n.useCallback)((()=>t.restart()),[t]),addRestartListener:g,state:r,runAsync:(0,n.useCallback)((async(e,r)=>{const n=function(){const e=20,t=a.length,r=[];for(let n=0;n<e;n++)r.push(a.charAt(Math.floor(Math.random()*t)));return r.join("")}(),s={type:"callFunc",key:e,args:r,id:n},o=`runAsync-${n}`,i=new Promise(((r,s)=>{t.subscribe(o,(s=>{"funcResult"===s.type&&s.key===e&&s.id===n&&(t.unsubscribe(o),r(s.result))}))}));return t.postMessage(s),i}),[t])}}const a="0123456789abcdef"},2608:(e,t,r)=>{function n(e){if(void 0===e)return[];const t=e?.message;if(void 0===t)return[];return[{type:e.type,message:t}]}function s(e){const t=e?.types;return void 0===t?n(e):Object.entries(t).map((([e,t])=>({type:e,message:o(t)})))}function o(e){return void 0===e||"string"==typeof e?e:"boolean"==typeof e?e?void 0:"Unknown error":e.join("\n")}r.d(t,{J:()=>l,_:()=>a._});var a=r(8145),i=r(4848);function l({fieldErrorArray:e,criteriaMode:t="firstError"}){const r=function({fieldErrorArray:e,criteriaMode:t}){switch(t){case"all":return e.flatMap(s);case"firstError":return e.flatMap(n)}}({fieldErrorArray:e,criteriaMode:t});return(0,i.jsx)(a.D,{messages:r})}},2679:(e,t,r)=>{r.d(t,{hM:()=>n,sH:()=>o,t_:()=>s});const n=["text","math"],s=["success","error"];function o(e,t){return{messageType:e,strings:[{stringType:"text",content:t}],plainString:t,options:[{text:t,label:"Copy this line"}]}}},3030:(e,t,r)=>{r.d(t,{Q:()=>b});var n=r(6540),s=r(4083);function o(e){return 1}var a=r(5293),i=r(5044),l=r(4671),c=r(6978),u=r(421),d=r(4848);function g({containerClass:e,handleClick:t,handleClose:r,open:s,anchorEl:o,options:a,showAll:g}){return(0,d.jsxs)(n.Fragment,{children:[(0,d.jsx)(l.A,{size:"small",onClick:t,sx:{paddingTop:0,paddingBottom:0,position:"absolute",bottom:"4px",right:0,visibility:"hidden",[`.${e}:hover &`]:{visibility:"visible"}},"data-testid":"OptionsButton",children:(0,d.jsx)(i.A,{fontSize:"small"})}),(0,d.jsxs)(c.A,{anchorEl:o,open:s,onClose:r,children:[a.map((e=>(0,d.jsx)(p,{text:e.text,label:e.label,handleClose:r},e.label))),(0,d.jsx)(u.A,{onClick:()=>{g(),r()},children:"Show all"})]})]})}function p({text:e,label:t,handleClose:r}){return(0,d.jsx)(u.A,{onClick:async()=>{null!==e&&await navigator.clipboard.writeText(e),r()},disabled:null===e,children:t})}var m=r(2259);function f({content:e}){const t=e.split("\n");return(0,d.jsx)("span",{children:t.map(((e,r)=>r<t.length-1?(0,d.jsxs)(n.Fragment,{children:[e,(0,d.jsx)("br",{})]},r):(0,d.jsx)(n.Fragment,{children:e},r)))})}function h({styledString:e}){const t={"\\deg":"|#1|"};switch(e.stringType){case"text":return(0,d.jsx)(f,{content:e.content});case"math":return(0,d.jsx)(m.A,{math:e.content,settings:{output:"html",macros:t}})}}function x(e){switch(e){case"light":return"aquamarine";case"dark":return"darkslateblue"}}function y(e){switch(e){case"light":return"peachpuff";case"dark":return"darkred"}}function b({styledMessage:e}){const t="show-styled-message",{visibleItems:r,commands:{showAll:i},isTruncated:l}=function(e,{minWeight:t,step:r,getWeight:a=o}){const[i,l]=(0,n.useState)(t),c=(0,n.useMemo)((()=>s.a(e,a)),[e,a]),u=(0,n.useMemo)((()=>function(e,t,r){const n=[];let s=0;for(const o of e){const e=r(o);if(!(s+e<=t))break;n.push(o),s+=e}return n}(e,i,a)),[e,i,a]),d=e.length,g=u.length,p=g<d,m=(0,n.useCallback)((()=>{l((e=>Math.min(e+r,c)))}),[r,c]),f=(0,n.useCallback)((()=>{l((e=>Math.min(e-r,c)))}),[r,c]),h=(0,n.useCallback)((()=>{l(c)}),[c]),x=(0,n.useCallback)((()=>{l(t)}),[t]),y=i<c,b=i>t;return{visibleItems:u,visibleCount:g,isTruncated:p,commands:{showMore:m,showLess:f,showAll:h,showMin:x},availableCommands:{showMore:y,showLess:b,showAll:y,showMin:b}}}(e.strings,{minWeight:300,step:100,getWeight:e=>e.content.replace(/\\[a-zA-Z]+/g,"").replace(/[{}^_ ]/g,"").length}),{optionsButtonProps:c,open:u}=function({containerClass:e,options:t,showAll:r}){const[s,o]=(0,n.useState)(null),a=Boolean(s);return{optionsButtonProps:{containerClass:e,handleClick:e=>{o(e.currentTarget)},handleClose:()=>{o(null)},open:a,anchorEl:s,options:t,showAll:r},open:a}}({containerClass:t,options:e.options,showAll:i}),p=function(e,t){const{colorMode:r}=(0,a.G)();if(t)return{background:x(r)};switch(e){case"success":return{};case"error":return{background:y(r)}}}(e.messageType,u);return(0,d.jsxs)("div",{className:t,"data-styled-message":e.plainString,"data-testid":"show-styled-message",style:{...p,borderBottom:"1px solid lightGray",position:"relative"},children:[r.map(((e,t)=>(0,d.jsx)(h,{styledString:e},t))),l&&(0,d.jsx)("span",{children:"..."}),(0,d.jsx)(g,{...c})]})}},4238:(e,t,r)=>{r.d(t,{C:()=>s});var n=r(4675);function s(){return(0,n.A)().breakpoints.down("sm")}},5159:(e,t,r)=>{function n({usedValues:e,candidates:t,fallback:r}){for(const n of t)if(!e.includes(n))return n;return r}r.d(t,{b:()=>n})},5994:(e,t,r)=>{r.d(t,{K:()=>c});var n=r(2790),s=r(8831),o=r(3627),a=r(4979),i=r(4848);function l({id:e,RowComponent:t,index:r,formData:n,externalData:s}){const{attributes:l,listeners:c,setNodeRef:u,transform:d,transition:g}=(0,o.gl)({id:e}),p={transform:a.Ks.Transform.toString(d),transition:g},m={draggableProps:{...l,...c},index:r,formData:n,externalData:s};return(0,i.jsx)("div",{ref:u,style:p,children:(0,i.jsx)(t,{...m})})}function c({fields:e,move:t,formData:r,RowComponent:a,Container:c,externalData:u}){const d=(0,n.FR)((0,n.MS)(n.AN),(0,n.MS)(n.uN,{coordinateGetter:o.JR})),{trigger:g}=r;return(0,i.jsx)(c,{children:(0,i.jsx)(n.Mp,{sensors:d,collisionDetection:n.fp,onDragEnd:async function({active:r,over:n}){if(null===n)throw new Error("over is null");if(r.id!==n.id){console.log(`replace: ${r.id}, ${n.id}`);const s=e.map((e=>e.id)).indexOf(r.id),o=e.map((e=>e.id)).indexOf(n.id);t(s,o)}await g()},modifiers:[s.gj],children:(0,i.jsx)(o.gB,{items:e,strategy:o._G,children:e.map(((e,t)=>(0,i.jsx)(l,{id:e.id,index:t,formData:r,RowComponent:a,externalData:u},e.id)))})})})}},6036:(e,t,r)=>{r.d(t,{qC:()=>m,WE:()=>A.W,HX:()=>u,$n:()=>d,KD:()=>j,Qu:()=>f.Q});var n=r(6540),s=r(3051),o=r(8968),a=r(5993),i=r(7512),l=r(4848);function c({open:e,resolveConfirm:t,prompt:r,trueText:n,falseText:c}){return(0,l.jsxs)(s.A,{open:e,onClose:()=>t?.(!1),children:[(0,l.jsx)(o.A,{children:r}),(0,l.jsxs)(a.A,{children:[(0,l.jsx)(i.A,{onClick:()=>t?.(!0),variant:"contained",children:n}),(0,l.jsx)(i.A,{onClick:()=>t?.(!1),variant:"outlined",children:c})]})]})}function u(e){const{confirm:t,confirmDialog:r}=function({trueText:e,falseText:t}){const[r,s]=(0,n.useState)(!1),[o,a]=(0,n.useState)(null),[i,u]=(0,n.useState)("__DEFAULT_PROMPT__"),d={open:r,resolveConfirm:o,prompt:i,trueText:e,falseText:t};return{confirm:function(e){return u(e),s(!0),new Promise((e=>{a((t=>t=>{e(t),s(!1)}))}))},confirmDialog:(0,l.jsx)(c,{...d})}}(e);return{canQuit:async e=>{const r=e?.();return void 0===r||t(r)},confirmDialog:r}}function d({editor:{renderContent:e,renderTitle:t,getOnSubmit:r,preventQuit:s,disableSubmit:o,beforeOpen:a,onQuit:i}}){const[l,c]=(0,n.useState)(!1),{canQuit:d,confirmDialog:g}=u({trueText:"Quit",falseText:"Resume"});const p=()=>c(!1);return{editorDialogProps:{renderContent:e,renderTitle:t,open:l,closeDialog:p,tryToQuit:async function(){await d(s)&&(i?.(),c(!1))},disableSubmit:o,onSubmit:r(p),confirmDialog:g},openDialog:function(){a?.(),c(!0)}}}var g=r(6831),p=r(4238);function m({renderContent:e,renderTitle:t,open:r,closeDialog:n,tryToQuit:c,disableSubmit:u,onSubmit:d,confirmDialog:m}){const f=(0,p.C)();return(0,l.jsxs)(s.A,{open:r,onClose:c,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{[f]:{margin:0,width:"calc(100% - 5pt)"}}},children:[void 0!==t&&(0,l.jsx)(g.A,{children:t()}),(0,l.jsx)(o.A,{sx:{[f]:{padding:1}},children:e(n)}),(0,l.jsxs)(a.A,{children:[(0,l.jsx)(i.A,{onClick:d,variant:"contained",disabled:u?.(),children:"Apply"}),(0,l.jsx)(i.A,{onClick:c,variant:"outlined",children:"Cancel"})]}),m]})}var f=r(1450);function h({tabItems:e,tabKeys:t,currentTabKey:r,closeDialog:s}){return(0,l.jsx)(n.Fragment,{children:t.map((t=>(0,l.jsx)(x,{currentTabKey:r,tabKeyForPanel:t,children:e[t].editor.renderContent(s)},t)))})}function x({currentTabKey:e,tabKeyForPanel:t,children:r}){return(0,l.jsx)("div",{hidden:e!==t,children:r})}var y=r(5611),b=r(6786);function v({tabItems:e,tabKeys:t,currentTabKey:r,setCurrentTabKey:s}){const{canQuit:o,confirmDialog:a}=u({trueText:"Quit",falseText:"Resume"});return(0,l.jsxs)(n.Fragment,{children:[(0,l.jsx)(y.A,{value:r,onChange:async(t,n)=>await async function(t){await o(e[r].editor.preventQuit)&&(s(t),e[t].editor.beforeOpen?.())}(n),children:t.map((t=>(0,l.jsx)(b.A,{value:t,label:e[t].label,sx:{textTransform:"none"}},t)))}),a]})}function j({tabItems:e,tabKeys:t,defaultTabKey:r}){const[s,o]=(0,n.useState)(r),a=e[s],i=(0,n.useCallback)((r=>(0,l.jsx)(h,{tabItems:e,tabKeys:t,currentTabKey:s,closeDialog:r})),[e,t,s]),c=(0,n.useCallback)((()=>(0,l.jsx)(v,{tabItems:e,tabKeys:t,currentTabKey:s,setCurrentTabKey:o})),[e,t,s,o]);return(0,n.useMemo)((()=>({renderContent:i,renderTitle:c,getOnSubmit:a.editor.getOnSubmit,preventQuit:a.editor.preventQuit,disableSubmit:a.editor.disableSubmit,beforeOpen:a.editor.beforeOpen,onQuit:a.editor.onQuit})),[i,c,a])}var A=r(8908)},6398:(e,t,r)=>{r.d(t,{Q:()=>a});var n=r(6540),s=r(5293),o=r(467);function a(){const{colorMode:e}=(0,s.G)();return(0,n.useMemo)((()=>(0,o.A)({palette:{mode:e,primary:{main:"#7e6ca8"}}})),[e])}},7472:(e,t,r)=>{r.d(t,{Q:()=>l,q:()=>n.q});var n=r(2137),s=r(6540);class o{onmessageFunctions=new Map;onRestartFunctions=new Map;workerOutputLog=[];constructor(e){this.createWorker=e,this.worker=this.createWorker(),this.worker.onmessage=e=>this.onmessage(e.data)}log(...e){"undefined"==typeof jest&&console.log(...e)}subscribe(e,t){this.onmessageFunctions.set(e,t),this.log(`subscribe: ${e}`)}unsubscribe(e){this.onmessageFunctions.delete(e),this.log(`unsubscribe: ${e}`)}subscribeRestart(e,t){this.onRestartFunctions.set(e,t),this.log(`subscribe restart: ${e}`)}unsubscribeRestart(e){this.onRestartFunctions.delete(e)}postMessage(e){this.worker.postMessage(e)}onmessage(e){this.workerOutputLog=[...this.workerOutputLog,e],this.onmessageFunctions.forEach((t=>t(e)))}terminate(){console.log("Worker terminated"),this.worker.terminate()}restart(){this.worker.terminate(),this.worker=this.createWorker(),this.worker.onmessage=e=>this.onmessage(e.data),this.onRestartFunctions.forEach((e=>e()))}static default(){return new o((()=>({})))}}var a=r(4848);function i(e){const t=(0,s.useRef)(null);null===t.current&&(t.current=new o(e.createWorker));const r=(0,s.useState)(e.defaultState),n=e.context,i=e.stateContext;return(0,a.jsx)(n.Provider,{value:t.current,children:(0,a.jsx)(i.Provider,{value:r,children:e.children})})}function l(e){const t=(0,s.createContext)(o.default()),r=(0,s.createContext)([void 0,e=>{throw new Error("Not wrapped by provider")}]),n=function(e,t,r){return n=>{const s="defaultState"in n?n.defaultState:{};return(0,a.jsx)(i,{context:e,stateContext:t,createWorker:r,defaultState:s,children:n.children})}}(t,r,e);return{reactContext:t,stateContext:r,Provider:n}}},8145:(e,t,r)=>{r.d(t,{D:()=>l,_:()=>i});var n=r(8486),s=r(4660),o=r(1987),a=r(4848);const i="_HIDE_THIS_ERROR_";function l({messages:e}){return(0,a.jsx)(s.N,{mode:"sync",children:e.map((({message:e,type:t})=>{if(void 0!==e&&e!==i)return(0,a.jsx)(o.P.div,{...c,children:(0,a.jsx)(u,{message:e})},`motion-${t}-${e}`)}))})}const c={initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},style:{overflow:"hidden",color:"red",marginTop:4}};function u({message:e}){return(0,a.jsx)(n.A,{severity:"error",sx:{whiteSpace:"pre-wrap",paddingTop:0,paddingBottom:0,paddingLeft:"5px",paddingRight:"5px"},children:e})}},8445:(e,t,r)=>{r.d(t,{C:()=>g,p:()=>d});var n=r(6540),s=r(2679),o=r(7472),a=r(7416),i=r(3030);function l(e){const t=(0,n.useRef)(null);return(0,n.useEffect)((()=>{(()=>{const e=t.current;null!==e&&void 0!==e.scrollTo&&function(e){return e.scrollTop+50>=e.scrollHeight-e.clientHeight}(e)&&setTimeout((()=>{e.scrollTo({top:e.scrollHeight,behavior:"smooth"})}))})()}),e),t}var c=r(4848);function u({messages:e}){const t=l([e]);return(0,c.jsx)(a.A,{elevation:0,variant:"outlined",ref:t,"data-testid":"calculator-results",sx:{width:"700px",height:"700px",overflowY:"scroll",padding:"5px","@media screen and (max-width: 700px)":{width:"100%",height:"50vh",margin:"3px"}},children:e.map(((e,t)=>(0,c.jsx)(i.Q,{styledMessage:e},t)))})}const d="printMessages";function g({context:e}){const{addListener:t,addRestartListener:r}=(0,o.q)(e),a=[(0,s.sH)("success","Computation results will be shown here")],[i,l]=(0,n.useState)(a),d=(0,n.useCallback)((e=>{l(e instanceof Array?t=>t.concat(e):t=>t.concat([e]))}),[l]),g=(0,n.useCallback)((e=>{"printMessages"===e.command&&d(e.messages)}),[d]);return(0,n.useEffect)((()=>{t("MessageBoxForWorker",g)}),[t,g]),(0,n.useEffect)((()=>{r("MessageBoxForWorker",(()=>{d((0,s.sH)("success","The background process is restarted."))}))}),[r,d]),(0,c.jsx)(u,{messages:i})}},8908:(e,t,r)=>{r.d(t,{W:()=>j});var n=r(2608),s=r(5994),o=r(9682),a=r(2007),i=r(7512),l=r(4848);function c({register:e,errors:t,fields:r,append:c,remove:d,getValues:g,trigger:p,move:m,onSubmit:f,getGlobalErrors:h,getNext:x,RowComponent:y,arrayKey:b}){const v={register:e,remove:d,errors:t,getValues:g,trigger:p};return(0,l.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),await f(e)},children:[(0,l.jsxs)(a.A,{spacing:2,sx:{marginTop:1},children:[(0,l.jsx)(s.K,{RowComponent:y,Container:u,externalData:void 0,fields:r,move:m,formData:v}),(0,l.jsx)(i.A,{variant:"outlined",onClick:()=>c(x(g()[b])),startIcon:(0,l.jsx)(o.A,{}),sx:{textTransform:"none"},children:"Add a generator"}),(0,l.jsx)(n.J,{fieldErrorArray:h(t)})]}),(0,l.jsx)("button",{hidden:!0,type:"submit"})]})}function u({children:e}){return(0,l.jsx)(a.A,{spacing:2,children:e})}var d=r(8871),g=r(9785);var p=r(6540),m=r(7110),f=r(797),h=r(3581),x=r(1922),y=r(4671),b=r(723);function v({rowComponentProps:e,rowComponentData:{fieldOptionsList:t,getFieldErrorArray:r}}){const{draggableProps:s,index:o,formData:{register:i,getValues:c,errors:u,remove:d,trigger:g}}=e,v=(0,b.d)(),j=(0,p.useCallback)((()=>v((async()=>await g()),1e3)),[v,g]);return(0,l.jsx)("div",{"data-testid":"ArrayEditor-row",children:(0,l.jsxs)(a.A,{spacing:1,children:[(0,l.jsxs)(a.A,{direction:"row",spacing:1,children:[t.map((({key:e,label:t,width:r,type:n,valueAsNumber:s,getRegisterName:a,isError:d,inputProps:p})=>(0,l.jsx)(h.A,{label:"function"==typeof t?t(c(),o):t,type:n,sx:{width:r},size:"small",...i(a(o),{valueAsNumber:s,onChange:j}),onBlur:()=>g(),error:d(u,o),inputProps:"function"==typeof p?p(o):p},e))),(0,l.jsx)(x.A,{title:"Delete this generator",children:(0,l.jsx)(y.A,{onClick:async()=>{d(o),await g()},size:"small",children:(0,l.jsx)(m.A,{fontSize:"small"})})}),(0,l.jsx)(y.A,{...s,style:{cursor:"grab",touchAction:"none"},children:(0,l.jsx)(f.A,{})})]}),(0,l.jsx)(n.J,{fieldErrorArray:r({errors:u,index:o})})]})})}function j({fieldOptionsList:e,getFieldErrorArray:t,...r}){const n=function({fieldOptionsList:e,getFieldErrorArray:t}){return(0,p.useCallback)((r=>(0,l.jsx)(v,{rowComponentProps:r,rowComponentData:{fieldOptionsList:e,getFieldErrorArray:t}})),[e,t])}({fieldOptionsList:e,getFieldErrorArray:t}),{editorWithoutRender:s,arrayEditorPropsPartial:o}=function({defaultValues:e,setValues:t,getGlobalErrors:r,getNext:n,schema:s,arrayKey:o,zodResolverMode:a}){const{handleSubmit:i,register:l,getValues:c,reset:u,trigger:p,control:m,formState:{errors:f,isValid:h}}=(0,g.mN)({mode:"onBlur",reValidateMode:"onBlur",criteriaMode:"all",defaultValues:e,resolver:(0,d.u)(s,void 0,{mode:a})}),{fields:x,append:y,remove:b,move:v}=(0,g.jz)({control:m,name:o});return{editorWithoutRender:{getOnSubmit:function(e){return i((r=>{t(r),e()}))},beforeOpen:function(){u(e)},preventQuit:function(){return JSON.stringify(c())!==JSON.stringify(e)?"Your input is not saved. Are you sure you want to quit?":void 0},disableSubmit:function(){return!h}},arrayEditorPropsPartial:{register:l,errors:f,fields:x,append:y,remove:b,getValues:c,trigger:p,move:v,getGlobalErrors:r,getNext:n,arrayKey:o}}}({...r});return{...s,renderContent:e=>(0,l.jsx)(c,{onSubmit:s.getOnSubmit(e),RowComponent:n,...o})}}}}]);