"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[842],{6574:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Cr});var n=r(2954),s=r(6540),o=r(5363),a=r(5916),i=r(7733);function l(){return new Worker(r.p+"assets/js/kohomology.worker.0d2f5523.worker.js")}var u=r(2259),c=r(6132),d=r(2007),g=r(1543),p=r(7512),m=r(8228),f=r(6071),x=r(1303),h=r(3051),b=r(8968),y=r(5993),j=r(4848);function v(e){let{open:t,resolveConfirm:r,prompt:n,trueText:s,falseText:o}=e;return(0,j.jsxs)(h.A,{open:t,onClose:()=>r?.(!1),children:[(0,j.jsx)(b.A,{children:n}),(0,j.jsxs)(y.A,{children:[(0,j.jsx)(p.A,{onClick:()=>r?.(!0),variant:"contained",children:s}),(0,j.jsx)(p.A,{onClick:()=>r?.(!1),variant:"outlined",children:o})]})]})}function A(e){const{confirm:t,confirmDialog:r}=function(e){let{trueText:t,falseText:r}=e;const[n,o]=(0,s.useState)(!1),[a,i]=(0,s.useState)(null),[l,u]=(0,s.useState)("__DEFAULT_PROMPT__"),c={open:n,resolveConfirm:a,prompt:l,trueText:t,falseText:r};return{confirm:function(e){return u(e),o(!0),new Promise((e=>{i((t=>t=>{e(t),o(!1)}))}))},confirmDialog:(0,j.jsx)(v,{...c})}}(e);return{canQuit:async e=>{const r=e?.();return void 0===r||t(r)},confirmDialog:r}}function w(e){let{editor:{renderContent:t,renderTitle:r,getOnSubmit:n,preventQuit:o,disableSubmit:a,beforeOpen:i,onQuit:l}}=e;const[u,c]=(0,s.useState)(!1),{canQuit:d,confirmDialog:g}=A({trueText:"Quit",falseText:"Resume"});const p=()=>c(!1);return{editorDialogProps:{renderContent:t,renderTitle:r,open:u,closeDialog:p,tryToQuit:async function(){await d(o)&&(l?.(),c(!1))},disableSubmit:a,onSubmit:n(p),confirmDialog:g},openDialog:function(){i?.(),c(!0)}}}var C=r(6831),S=r(4675);function k(){return(0,S.A)().breakpoints.down("sm")}function T(e){let{renderContent:t,renderTitle:r,open:n,closeDialog:s,tryToQuit:o,disableSubmit:a,onSubmit:i,confirmDialog:l}=e;const u=k();return(0,j.jsxs)(h.A,{open:n,onClose:o,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{[u]:{margin:0,width:"calc(100% - 5pt)"}}},children:[void 0!==r&&(0,j.jsx)(C.A,{children:r()}),(0,j.jsx)(b.A,{sx:{[u]:{padding:1}},children:t(s)}),(0,j.jsxs)(y.A,{children:[(0,j.jsx)(p.A,{onClick:i,variant:"contained",disabled:a?.(),children:"Apply"}),(0,j.jsx)(p.A,{onClick:o,variant:"outlined",children:"Cancel"})]}),l]})}function D(e){let{tabItems:t,tabKeys:r,currentTabKey:n,closeDialog:o}=e;return(0,j.jsx)(s.Fragment,{children:r.map((e=>(0,j.jsx)(I,{currentTabKey:n,tabKeyForPanel:e,children:t[e].editor.renderContent(o)},e)))})}function I(e){let{currentTabKey:t,tabKeyForPanel:r,children:n}=e;return(0,j.jsx)("div",{hidden:t!==r,children:n})}var E=r(5611),O=r(6786);function J(e){let{tabItems:t,tabKeys:r,currentTabKey:n,setCurrentTabKey:o}=e;const{canQuit:a,confirmDialog:i}=A({trueText:"Quit",falseText:"Resume"});return(0,j.jsxs)(s.Fragment,{children:[(0,j.jsx)(E.A,{value:n,onChange:async(e,r)=>await async function(e){await a(t[n].editor.preventQuit)&&(o(e),t[e].editor.beforeOpen?.())}(r),children:r.map((e=>(0,j.jsx)(O.A,{value:e,label:t[e].label,sx:{textTransform:"none"}},e)))}),i]})}function N(e,t,r){const{editor:n}=function(e){let{tabItems:t,tabKeys:r,defaultTabKey:n}=e;const[o,a]=(0,s.useState)(n),i=t[o],l=(0,s.useCallback)((e=>(0,j.jsx)(D,{tabItems:t,tabKeys:r,currentTabKey:o,closeDialog:e})),[t,r,o]),u=(0,s.useCallback)((()=>(0,j.jsx)(J,{tabItems:t,tabKeys:r,currentTabKey:o,setCurrentTabKey:a})),[t,r,o,a]);return{editor:(0,s.useMemo)((()=>({renderContent:l,renderTitle:u,getOnSubmit:i.editor.getOnSubmit,preventQuit:i.editor.preventQuit,disableSubmit:i.editor.disableSubmit,beforeOpen:i.editor.beforeOpen,onQuit:i.editor.onQuit})),[l,u,i])}}({tabItems:e,tabKeys:t,defaultTabKey:r}),{editorDialogProps:o,openDialog:a}=w({editor:n});return{tabDialogProps:o,openDialog:a}}function P(e){return(0,j.jsx)(T,{...e})}var _=r(8486),M=r(4660),z=r(1987);function R(e){if(void 0===e)return[];const t=e?.message;if(void 0===t)return[];return[{type:e.type,message:t}]}const V="_HIDE_THIS_ERROR_";function L(e){let{fieldErrorArray:t,criteriaMode:r="firstError"}=e;const n=function(e){let{fieldErrorArray:t,criteriaMode:r}=e;switch(r){case"all":return t.flatMap((e=>{const t=e?.types;return void 0===t?R(e):Object.entries(t).map((e=>{let[t,r]=e;return{type:t,message:r}}))}));case"firstError":return t.flatMap(R)}}({fieldErrorArray:t,criteriaMode:r});return(0,j.jsx)(M.N,{mode:"sync",children:n.map((e=>{let{message:t,type:r}=e;if(void 0!==t&&t!==V)return(0,j.jsx)(z.P.div,{...$,children:(0,j.jsx)(_.A,{severity:"error",sx:{whiteSpace:"pre-wrap",paddingTop:0,paddingBottom:0,paddingLeft:"5px",paddingRight:"5px"},children:t})},`motion-${r}-${t}`)}))})}const $={initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},style:{overflow:"hidden",color:"red",marginTop:4}};var F=r(2790),W=r(8831),G=r(3627),B=r(4979);function Q(e){let{id:t,RowComponent:r,index:n,formData:s,externalData:o}=e;const{attributes:a,listeners:i,setNodeRef:l,transform:u,transition:c}=(0,G.gl)({id:t}),d={transform:B.Ks.Transform.toString(u),transition:c},g={draggableProps:{...a,...i},index:n,formData:s,externalData:o};return(0,j.jsx)("div",{ref:l,style:d,children:(0,j.jsx)(r,{...g})})}function K(e){let{fields:t,move:r,formData:n,RowComponent:s,Container:o,externalData:a}=e;const i=(0,F.FR)((0,F.MS)(F.AN),(0,F.MS)(F.uN,{coordinateGetter:G.JR})),{trigger:l}=n;return(0,j.jsx)(o,{children:(0,j.jsx)(F.Mp,{sensors:i,collisionDetection:F.fp,onDragEnd:async function(e){let{active:n,over:s}=e;if(null===s)throw new Error("over is null");if(n.id!==s.id){console.log(`replace: ${n.id}, ${s.id}`);const e=t.map((e=>e.id)).indexOf(n.id),o=t.map((e=>e.id)).indexOf(s.id);r(e,o)}await l()},modifiers:[W.gj],children:(0,j.jsx)(G.gB,{items:t,strategy:G._G,children:t.map(((e,t)=>(0,j.jsx)(Q,{id:e.id,index:t,formData:n,RowComponent:s,externalData:a},e.id)))})})})}var H=r(9682),q=r(7110),U=r(3178),Z=r(3581),X=r(1922),Y=r(4671);function ee(){const e=(0,s.useRef)(null);return(0,s.useCallback)(((t,r)=>{null!==e.current&&clearTimeout(e.current);const n=setTimeout(t,r);e.current=n}),[])}function te(e){let{draggableProps:t,index:r,formData:{register:n,errors:o,remove:a,getValues:i,trigger:l}}=e;const u=i().generatorArray[r].name,c=ee(),g=(0,s.useCallback)((()=>c((async()=>await l()),1e3)),[c,l]);return(0,j.jsx)("div",{"data-testid":"ArrayEditor-row",children:(0,j.jsxs)(d.A,{spacing:1,children:[(0,j.jsxs)(d.A,{direction:"row",spacing:1,children:[(0,j.jsx)(Z.A,{label:"generator",sx:{width:90},size:"small",...n(`generatorArray.${r}.name`,{onChange:g}),onBlur:()=>l(),error:ne({errors:o,index:r,key:"name"}),inputProps:{"data-testid":"ArrayEditor-input-name"}}),(0,j.jsx)(Z.A,{label:`deg(${u})`,type:"number",sx:{width:80},size:"small",...n(`generatorArray.${r}.degree`,{valueAsNumber:!0,onChange:g}),onBlur:()=>l(),error:ne({errors:o,index:r,key:"degree"})||se({errors:o}),inputProps:{"data-testid":"ArrayEditor-input-degree"}}),(0,j.jsx)(Z.A,{label:`d(${u})`,sx:{width:200},size:"small",...n(`generatorArray.${r}.differentialValue`,{onChange:g}),onBlur:()=>l(),error:ne({errors:o,index:r,key:"differentialValue"}),inputProps:{"data-testid":"ArrayEditor-input-differentialValue"}}),(0,j.jsx)(X.A,{title:"Delete this generator",children:(0,j.jsx)(Y.A,{onClick:async()=>{a(r),await l()},size:"small",children:(0,j.jsx)(q.A,{fontSize:"small"})})}),(0,j.jsx)(Y.A,{...t,style:{cursor:"grab",touchAction:"none"},children:(0,j.jsx)(U.A,{})})]}),(0,j.jsx)(re,{errors:o,index:r})]})})}function re(e){let{errors:t,index:r}=e;const n=t.generatorArray?.[r],s=function(e){let{error:t}=e;if(void 0===t)return[];return["name","degree","differentialValue"].flatMap((e=>t[e]))}({error:n});return(0,j.jsx)(L,{fieldErrorArray:s})}function ne(e){let{errors:t,index:r,key:n}=e;const s=t.generatorArray?.[r]?.[n];return void 0!==s}function se(e){let{errors:t}=e;return void 0!==t._global_errors?.generatorDegrees}var oe=r(4476),ae=r(4921);const ie=oe.z.string().min(1,"Please enter the name.").superRefine(((e,t)=>{const r=(0,ae.validateGeneratorName)(e);switch(r.type){case"success":return;case"error":return void t.addIssue({code:oe.z.ZodIssueCode.custom,message:r.message});default:throw new Error("This can't happen!")}})),le=(ue="Please enter the degree.",oe.z.preprocess((e=>{if(!Number.isNaN(e))return e}),oe.z.number({required_error:ue}))).refine((e=>0!==e),"The degree cannot be 0.");var ue;const ce=oe.z.string().min(1,"Please enter the value of the differential."),de=oe.z.object({name:ie,degree:le,differentialValue:ce});function ge(e){return pe(JSON.parse(e))}function pe(e){return`[\n${e.map((e=>`  ["${e[0]}", ${e[1]}, "${e[2]}"]`)).join(",\n")}\n]`}function me(e){return pe(e.map((e=>{let{name:t,degree:r,differentialValue:n}=e;return[t,Number.isNaN(r)?1:r,n]})))}function fe(e){return JSON.parse(e).map((e=>{let[t,r,n]=e;return{name:t,degree:r,differentialValue:n}}))}const xe=oe.z.array(de).superRefine(((e,t)=>{!function(e,t){e.forEach(((r,n)=>{const s=function(e,t,r){if(e[t].differentialValue!==r)throw new Error("generatorArray[index] and value do not match.");const n=me(e.slice(0,t+1)),s=(0,ae.validateDifferentialValueOfTheLast)(n);switch(s.type){case"success":case"N/A":return!0;default:return s.message}}(e,n,r.differentialValue);"string"==typeof s&&t.addIssue({path:[n,"differentialValue"],code:oe.z.ZodIssueCode.custom,message:s})}))}(e,t)})),he=oe.z.object({generatorDegrees:oe.z.null(),generatorNames:oe.z.null()}),be=oe.z.object({generatorArray:xe,_global_errors:he.optional()}).superRefine(((e,t)=>{!function(e,t){const r=function(e){const t=e.filter((e=>e.degree>0)).length,r=e.filter((e=>e.degree<0)).length;return!(t>0&&r>0)||"Cannot mix generators of positive and negative degrees."}(e);"string"==typeof r&&t.addIssue({path:["_global_errors","generatorDegrees"],code:oe.z.ZodIssueCode.custom,message:r})}(e.generatorArray,t),function(e,t){const r=function(e){const t=e.map((e=>e.name)),r=new Map;return t.forEach(((e,n)=>{const s=t.indexOf(e);s!==n&&(r.set(n,`Generator names must be unique, but ${e} is already used.`),r.set(s,V))})),r}(e);r.forEach(((e,r)=>{t.addIssue({path:["generatorArray",r,"name"],code:oe.z.ZodIssueCode.custom,message:e})}))}(e.generatorArray,t)}));function ye(e){let{register:t,errors:r,fields:n,append:s,remove:o,getValues:a,trigger:i,move:l,onSubmit:u}=e;const c={register:t,remove:o,errors:r,getValues:a,trigger:i};return(0,j.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),await u(e)},children:[(0,j.jsxs)(d.A,{spacing:2,sx:{marginTop:1},children:[(0,j.jsx)(K,{RowComponent:te,Container:Ae,externalData:void 0,fields:n,move:l,formData:c}),(0,j.jsx)(p.A,{variant:"outlined",onClick:()=>s({name:je(a().generatorArray),degree:1,differentialValue:"0"}),startIcon:(0,j.jsx)(H.A,{}),sx:{textTransform:"none"},children:"Add a generator"}),ve(r)]}),(0,j.jsx)("button",{hidden:!0,type:"submit"})]})}function je(e){const t=e.map((e=>e.name)),r="xyzuvwabc".split("");for(const n of r)if(!t.includes(n))return n;return""}function ve(e){const t=function(e){let{errors:t}=e;const r=t._global_errors;if(void 0===r)return[];return Object.keys(he.shape).map((e=>r[e]))}({errors:e});return(0,j.jsx)(L,{fieldErrorArray:t})}function Ae(e){let{children:t}=e;return(0,j.jsx)(d.A,{spacing:2,children:t})}var we=r(8871),Ce=r(9785);function Se(e){const{label:t,editorWithoutRender:r,arrayEditorPropsExceptOnSubmit:n}=function(e){const t={generatorArray:fe(e.json)},{handleSubmit:r,register:n,getValues:s,reset:o,trigger:a,control:i,formState:{errors:l}}=(0,Ce.mN)({mode:"onBlur",reValidateMode:"onBlur",criteriaMode:"all",defaultValues:t,resolver:(0,we.u)(be)}),{fields:u,append:c,remove:d,move:g}=(0,Ce.jz)({control:i,name:"generatorArray"});return{label:"Array",editorWithoutRender:{getOnSubmit:function(t){return r((r=>{let{generatorArray:n}=r;e.updateDgaWrapper(me(n)),t()}))},beforeOpen:function(){const t=fe(e.json);o({generatorArray:t})},preventQuit:function(){return me(s().generatorArray)!==e.json?"Your input is not saved. Are you sure you want to quit?":void 0},disableSubmit:function(){return void 0!==l.generatorArray}},arrayEditorPropsExceptOnSubmit:{register:n,errors:l,fields:u,append:c,remove:d,getValues:s,trigger:a,move:g}}}(e);return{label:t,editor:{...r,renderContent:e=>(0,j.jsx)(ye,{onSubmit:r.getOnSubmit(e),...n})}}}var ke=r(1729),Te=r(8440),De=r(9368),Ie=r(421),Ee=r(5044),Oe=r(6978);function Je(e){let{containerClass:t,handleClick:r,handleClose:n,open:o,anchorEl:a,options:i}=e;return(0,j.jsxs)(s.Fragment,{children:[(0,j.jsx)(Y.A,{size:"small",onClick:r,sx:{paddingTop:0,paddingBottom:0,position:"absolute",bottom:"4px",right:0,visibility:"hidden",[`.${t}:hover &`]:{visibility:"visible"}},children:(0,j.jsx)(Ee.A,{fontSize:"small"})}),(0,j.jsxs)(Oe.A,{anchorEl:a,open:o,onClose:n,children:[(0,j.jsx)(Ne,{text:i.plainString,label:"Copy this line",handleClose:n}),(0,j.jsx)(Ne,{text:i.dgaJson,label:"Copy this DGA as JSON",handleClose:n})]})]})}function Ne(e){let{text:t,label:r,handleClose:n}=e;return(0,j.jsx)(Ie.A,{onClick:async()=>{null!==t&&(await navigator.clipboard.writeText(t),console.log("Copied:",t)),n()},disabled:null===t,children:r})}function Pe(e){let{content:t}=e;const r=t.split("\n");return(0,j.jsx)("span",{children:r.map(((e,t)=>t<r.length-1?(0,j.jsxs)(s.Fragment,{children:[e,(0,j.jsx)("br",{})]},t):(0,j.jsx)(s.Fragment,{children:e},t)))})}function _e(e){let{styledString:t}=e;const r={"\\deg":"|#1|"};switch(t.stringType){case"text":return(0,j.jsx)(Pe,{content:t.content});case"math":return(0,j.jsx)(u.A,{math:t.content,settings:{output:"html",macros:r}})}}function Me(e,t){if(t)return{background:"aquamarine"};switch(e){case"success":return{};case"error":return{background:"peachpuff"}}}function ze(e){let{styledMessage:t}=e;const r="show-styled-message",{optionsButtonProps:n,open:o}=function(e,t){const[r,n]=(0,s.useState)(null),o=Boolean(r);return{optionsButtonProps:{containerClass:e,handleClick:e=>{n(e.currentTarget)},handleClose:()=>{n(null)},open:o,anchorEl:r,options:t},open:o}}(r,t.options);return(0,j.jsxs)("div",{className:r,"data-styled-message":t.plainString,"data-testid":"show-styled-message",style:{...Me(t.messageType,o),borderBottom:"1px solid lightGray",position:"relative"},children:[t.strings.map(((e,t)=>(0,j.jsx)(_e,{styledString:e},t))),(0,j.jsx)(Je,{...n})]})}const Re=["text","math"],Ve=["success","error"];function Le(e,t){return{messageType:e,strings:[{stringType:"text",content:t}],plainString:t,options:{dgaJson:null,plainString:t}}}function $e(e){const t=e.stringType;if(!Re.includes(t))throw new Error(`Invalid stringType: ${t}`);return{stringType:t,content:e.content}}function Fe(e){const t=e.messageType;if(!Ve.includes(t))throw new Error(`Invalid messageType: ${t}`);return{messageType:t,strings:e.strings.map($e),plainString:e.plainString,options:(r=e.options,{dgaJson:r.dgaJson??null,plainString:r.plainString})};var r}function We(e){if(!Number.isInteger(e))throw new Error("dim must be an integer");if(e<=0)throw new Error("dim must be positive");return e%2==0?`[\n  ["x", ${e}, "0"],\n  ["y", ${2*e-1}, "x^2"]\n]`:`[\n  ["x", ${e}, "0"]\n]`}function Ge(e){if(!Number.isInteger(e))throw new Error("dim must be an integer");if(e<=0)throw new Error("dim must be positive");return`[\n  ["c", 2, "0"],\n  ["x", ${2*e+1}, "c^${e+1}"]\n]`}const Be=["S^n","CP^3","7-mfd","arkowitz-lupton"];function Qe(e){try{return e()}catch{return}}function Ke(e,t){const[r,n]=(0,s.useState)(2);return{json:Qe((()=>e(r))),renderSelectItem:t,renderForm:()=>(0,j.jsx)(Z.A,{label:"n",value:r,type:"number",onChange:e=>n(parseInt(e.target.value)),sx:{width:100},size:"small"})}}function He(e){if(void 0===e)return[Le("error","Error")];return new ae.FreeDGAWrapper(e).dgaInfo().map(Fe)}function qe(e){const[t,r]=(0,s.useState)(""),n={"S^n":Ke(We,(()=>(0,j.jsx)(u.A,{math:"S^n"}))),"CP^3":Ke(Ge,(()=>(0,j.jsx)(u.A,{math:"\\mathbb CP^n"}))),"7-mfd":{json:'[\n  ["a", 2, "0"],\n  ["b", 2, "0"],\n  ["x", 3, "a^2"],\n  ["y", 3, "a*b"],\n  ["z", 3, "b^2"]\n]',renderSelectItem:()=>(0,j.jsx)("span",{children:"a 7-manifold"})},"arkowitz-lupton":{json:'[\n  ["x_1", 10, "0"],\n  ["x_2", 12, "0"],\n  ["y_1", 41, "x_1^3 * x_2"],\n  ["y_2", 43, "x_1^2 * x_2^2"],\n  ["y_3", 45, "x_1 * x_2^3"],\n  ["z", 119, "x_2 * (y_1*x_2 - x_1*y_2) * (y_2*x_2 - x_1*y_3) + x_1^12 + x_2^10"]\n]',renderSelectItem:()=>(0,j.jsx)("span",{children:"Arkowitz-Lupton's example"})}},o=""===t?void 0:n[t],a=o?.json;const i="Select an example",l="label-select-dga-example";return{label:"Examples",editor:{getOnSubmit:function(t){return async r=>{void 0!==a&&(e.updateDgaWrapper(a),t())}},beforeOpen:function(){r("")},disableSubmit:function(){return void 0===a},renderContent:e=>(0,j.jsxs)(d.A,{spacing:2,sx:{marginTop:1},children:[(0,j.jsxs)(ke.A,{children:[(0,j.jsx)(Te.A,{id:l,children:i}),(0,j.jsx)(De.A,{labelId:l,label:i,value:t,onChange:e=>r(e.target.value),sx:{width:300},children:Be.map((e=>(0,j.jsx)(Ie.A,{value:e,children:n[e].renderSelectItem()},e)))})]}),o?.renderForm?.(),void 0!==o&&(0,j.jsx)(d.A,{children:He(o.json).map(((e,r)=>(0,j.jsx)(ze,{styledMessage:e},`${t}-${r}`)))})]})}}}function Ue(e){let{register:t,errors:r,fieldLabel:n,fieldTestid:o,validate:a,trigger:i}=e;const l=ee(),u=(0,s.useCallback)((()=>l((async()=>await i()),1e3)),[l,i]);return(0,j.jsxs)(d.A,{spacing:2,sx:{marginTop:1},children:[(0,j.jsx)(Z.A,{label:n,multiline:!0,inputProps:{"data-testid":o},...t("text",{validate:a,onChange:u}),error:void 0!==r.text}),(0,j.jsx)(L,{fieldErrorArray:Ze(r)})]})}function Ze(e){const t=e.text;return void 0===t?[]:[t]}function Xe(e){const t=function(e){let{text:t,setText:r,preventPrompt:n,fieldLabel:s,fieldTestid:o,validate:a}=e;const{register:i,handleSubmit:l,getValues:u,reset:c,trigger:d,formState:{errors:g}}=(0,Ce.mN)({mode:"onBlur",reValidateMode:"onBlur",shouldUnregister:!1,defaultValues:{text:t}}),p={register:i,errors:g,trigger:d,fieldLabel:s,fieldTestid:o,validate:a};return{preventQuit:function(){return u().text!==t?n:void 0},getOnSubmit:function(e){return l((t=>{let{text:n}=t;r(n),e()}))},beforeOpen:function(){c({text:t})},disableSubmit:function(){return void 0!==g.text},renderContent:e=>(0,j.jsx)(Ue,{...p})}}({text:e.json,setText:e.updateDgaWrapper,preventPrompt:"Your JSON is not saved. Are you sure you want to quit?",fieldLabel:"Input your DGA",fieldTestid:"JsonEditorDialog-input-json",validate:Ye});return{label:"JSON",editor:t}}function Ye(e){const t=(0,ae.validateJson)(e);return"success"===t.type||t.message}const et=["array","json","example"];function tt(e,t){return{TabDialog:P,...N({array:Se({json:e,updateDgaWrapper:t}),json:Xe({json:e,updateDgaWrapper:t}),example:qe({updateDgaWrapper:t})},et,"array")}}function rt(e){let{draggableProps:t,index:r,formData:{register:n,errors:o,remove:a,trigger:i}}=e;const l=ee(),u=(0,s.useCallback)((()=>l((async()=>await i()),1e3)),[l,i]);return(0,j.jsxs)(d.A,{spacing:1,children:[(0,j.jsxs)(d.A,{direction:"row",spacing:1,children:[(0,j.jsx)(Z.A,{label:"generator",inputProps:{"data-testid":`IdealEditorItem-input-${r}`},sx:{width:300},size:"small",...n(`generatorArray.${r}.text`,{onChange:u})}),(0,j.jsx)(X.A,{title:"Delete this generator",children:(0,j.jsx)(Y.A,{onClick:async()=>{a(r),await i()},size:"small",children:(0,j.jsx)(q.A,{fontSize:"small"})})}),(0,j.jsx)(Y.A,{...t,style:{cursor:"grab",touchAction:"none"},children:(0,j.jsx)(U.A,{})})]}),(0,j.jsx)(L,{fieldErrorArray:nt({errors:o,index:r})})]})}function nt(e){let{errors:t,index:r}=e;const n=t.generatorArray?.[r]?.text;return void 0===n?[]:[n]}function st(e){let{children:t}=e;return(0,j.jsx)(d.A,{spacing:2,children:t})}function ot(e){let{register:t,getValues:r,errors:n,trigger:s,fields:o,append:a,remove:i,move:l,onSubmit:u}=e;const c={register:t,remove:i,errors:n,getValues:r,trigger:s};return(0,j.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),await u(e)},children:[(0,j.jsxs)(d.A,{spacing:2,sx:{marginTop:1},children:[(0,j.jsx)(K,{RowComponent:rt,Container:st,fields:o,move:l,formData:c,externalData:{}}),(0,j.jsx)(p.A,{variant:"outlined",onClick:()=>a({text:""}),startIcon:(0,j.jsx)(H.A,{}),sx:{textTransform:"none"},children:"Add a generator"}),(0,j.jsx)(L,{fieldErrorArray:at(n)})]}),(0,j.jsx)("button",{hidden:!0,type:"submit"})]})}function at(e){if(void 0!==e.generatorArray)return[];const t=e._global_errors?.validateGeneratorArray;return void 0===t?[]:[t]}function it(e){return oe.z.string().nonempty("Please enter the generator.").superRefine((async(t,r)=>{const n=await e(t);"string"==typeof n&&r.addIssue({path:[],code:oe.z.ZodIssueCode.custom,message:n})}))}function lt(e){return oe.z.object({text:it(e)})}const ut=oe.z.object({validateGeneratorArray:oe.z.null()});function ct(e,t){return function(e,t){return oe.z.object({generatorArray:lt(e).array(),_global_errors:ut.optional()}).superRefine((async(e,r)=>{const n=e.generatorArray.map((e=>e.text)),s=await t(n);"string"==typeof s&&r.addIssue({path:["_global_errors","validateGeneratorArray"],code:oe.z.ZodIssueCode.custom,message:s})}))}(e,t)}function dt(e){return JSON.parse(e).map((e=>({text:e})))}function gt(e){const t=e.map((e=>{let{text:t}=e;return t}));return JSON.stringify(t)}function pt(e){let{setIdealJson:t,idealInfo:r,idealJson:n,validateGenerator:o,validateGeneratorArray:a}=e;const{idealEditorPropsExceptOnSubmit:i,getOnSubmit:l,beforeOpen:u,disableSubmit:c,preventQuit:d}=function(e){let{idealJson:t,setIdealJson:r,validateGenerator:n,validateGeneratorArray:o}=e;const{handleSubmit:a,register:i,getValues:l,reset:u,trigger:c,control:d,formState:{errors:g}}=(0,Ce.mN)({mode:"onBlur",reValidateMode:"onBlur",criteriaMode:"all",defaultValues:{generatorArray:dt(t)},resolver:(0,we.u)(ct(n,o),void 0,{mode:"async"})}),{fields:p,append:m,remove:f,move:x}=(0,Ce.jz)({control:d,name:"generatorArray"}),h=(0,s.useCallback)((e=>a((t=>{let{generatorArray:n}=t;r(gt(n)),e()}))),[r,a]),b=(0,s.useCallback)((()=>{const e=dt(t);u({generatorArray:e})}),[t,u]);return{idealEditorPropsExceptOnSubmit:{register:i,getValues:l,errors:g,trigger:c,fields:p,append:m,remove:f,move:x},getOnSubmit:h,beforeOpen:b,disableSubmit:(0,s.useCallback)((()=>void 0!==g.generatorArray||void 0!==g._global_errors),[g]),preventQuit:(0,s.useCallback)((()=>gt(l().generatorArray)!==t?"Your input is not saved. Are you sure you want to quit?":void 0),[l,t])}}({idealJson:n,setIdealJson:t,validateGenerator:o,validateGeneratorArray:a}),g=(0,s.useMemo)((()=>({getOnSubmit:l,preventQuit:d,disableSubmit:c,beforeOpen:u,renderContent:e=>(0,j.jsx)(ot,{...i,onSubmit:l(e)})})),[i,l,d,c,u]),{editorDialogProps:m,openDialog:f}=w({editor:g});return(0,j.jsxs)("div",{children:[(0,j.jsx)(ze,{styledMessage:r}),(0,j.jsx)(p.A,{onClick:f,variant:"contained",sx:{textTransform:"none"},children:"Edit ideal"}),(0,j.jsx)(T,{...m})]})}const mt={dgaJson:"dgaJson",dgaDsv:"dgaDsv",idealDsv:"idealDsv",taretName:"target"},ft={parse:e=>e.split("."),stringify:e=>e.join(".")};function xt(e){const t=JSON.parse(e);if(!function(e){if(!Array.isArray(e))return!1;for(const t of e)if(!Array.isArray(t)||3!==t.length||"string"!=typeof t[0]||"number"!=typeof t[1]||"string"!=typeof t[2]||t[0].includes(".")||t[2].includes("."))return!1;return!0}(t))return null;const r=t.map((e=>{let[t,r,n]=e;return[t,r.toString(),n]})).flat();return ft.stringify(r)}function ht(e){const t=function(e){const t=e.length/3;if(e.length%3!=0)throw new Error(`Invalid data from URL: "${e}"\nIts length must be divisible by 3, but was ${e.length}`);const r=[];for(let n=0;n<t;n++)r.push([e[3*n],parseInt(e[3*n+1]),e[3*n+2]]);return r}(ft.parse(e));return JSON.stringify(t)}function bt(e){const t=JSON.parse(e);return function(e){if(!Array.isArray(e))return!1;for(const t of e)if("string"!=typeof t)return!1;return!0}(t)?ft.stringify(t):null}function yt(e,t){switch(t){case"json":{const t=function(e){try{const t=JSON.parse(e);return JSON.stringify(t,null,void 0)}catch(t){if(t instanceof SyntaxError)return null;throw t}}(e);return null===t?null:[mt.dgaJson,t]}case"dsv":{const t=xt(e);return null===t?null:[mt.dgaDsv,t]}case"auto":{const t=yt(e,"dsv");if(null!==t)return t;const r=yt(e,"json");return null!==r?r:null}}}var jt=r(6347);function vt(){const{search:e}=(0,jt.zy)();return(0,s.useMemo)((()=>new URLSearchParams(e)),[e])}function At(){const e=vt();try{const t=function(e){const t=e.get(mt.dgaJson);if(null!==t)return t;const r=e.get(mt.dgaDsv);return null!==r?ht(r):null}(e);return null===t?{type:"unspecified"}:{type:"success",value:ge(t)}}catch(t){return t instanceof SyntaxError?{type:"error",message:`[Error] Invalid JSON is given as URL parameter.\n${t.message}`}:t instanceof Error?{type:"error",message:t.message}:(console.error(t),{type:"error",message:"[Error] Some error occurred while parsing URL parameter"})}}const wt=["self","freeLoopSpace","cyclic","derivation","idealQuot"],Ct=["basis","dim"];function St(e,t,r){return(0,s.useEffect)((()=>{"error"===e.type&&r(e.message)}),[r,e.type,e.message]),"success"===e.type?e.value:t}function kt(e){const t=e.get(mt.idealDsv);return null===t||""===t?null:function(e){const t=ft.parse(e);return JSON.stringify(t)}(t)}var Tt=r(8011),Dt=r(3246);function It(e){let{value:t}=e;return null===t?(0,j.jsx)(Dt.A,{size:20}):(0,j.jsx)(Dt.A,{variant:"determinate",value:t,size:20})}function Et(e,t){return e?null===t?"Computing":`Computing (${t}%)`:"Compute"}function Ot(e){let{computing:t,progress:r,message:n,...s}=e;const o=s.disabled??!1,a=null===(i=r)?null:Math.floor(100*i);var i;return(0,j.jsxs)(d.A,{children:[(0,j.jsxs)(p.A,{...s,disabled:o||t,children:[Et(t,a),t&&(0,j.jsx)(It,{value:a})]}),n]})}function Jt(e){let{label:t,value:r,setValue:n,width:s,disabled:o}=e;return(0,j.jsx)(Z.A,{label:t,value:r,type:"number",onChange:e=>n(e.target.value),sx:{width:s},size:"small",disabled:o})}function Nt(e){let{label:t,defaultValue:r,width:n,disabled:o}=e;const[a,i]=(0,s.useState)(r.toString()),l={label:t,value:a,setValue:i,width:void 0!==n?n:70,disabled:void 0!==o&&o};return[parseInt(a),l]}function Pt(e){let{label:t,value:r,setValue:n,width:s,disabled:o}=e;return(0,j.jsx)(Z.A,{label:t,value:r,onChange:e=>n(e.target.value),sx:{width:s},size:"small",disabled:o})}function _t(e){switch(e){case"self":return"\\Lambda V";case"freeLoopSpace":return"\\Lambda V \\otimes \\Lambda \\overline{V}";case"cyclic":return"\\Lambda u \\otimes\\Lambda V \\otimes \\Lambda \\overline{V}";case"derivation":return"\\mathrm{Der}(\\Lambda V)";case"idealQuot":return"\\Lambda V / I"}}function Mt(e,t){void 0===t&&(t=void 0);return`H^{${void 0!==t?t:"*"}}(${_t(e)})`}function zt(e){let{targetName:t,degree:r}=e;return(0,j.jsx)(u.A,{math:Mt(t,r)})}function Rt(e){switch(e){case"self":return"H^*(X)";case"freeLoopSpace":return"H^*(LX)";case"cyclic":return"H^*_{S^1}(LX)";case"derivation":return"\\pi_{-*}(\\mathrm{aut}_1(X))\\otimes\\mathbb{Q}";case"idealQuot":return"H^*(\\Lambda V / I)"}}function Vt(e){let{targetName:t}=e;return(0,j.jsx)(u.A,{math:Rt(t)})}function Lt(e){return{computing:"computing"===e.status,workerProgress:"computing"===e.status?e.progress:null,message:"computing"===e.status?e.message:void 0}}function $t(e){let{targetName:t,postMessageToWorker:r,visible:n,workerInfo:o}=e;const[a,i]=Nt({label:"",defaultValue:0}),[l,c]=Nt({label:"",defaultValue:20}),[g,p]=(0,s.useState)("basis"),h=(0,s.useCallback)((e=>{e.preventDefault();r({command:"computeCohomology",targetName:t,minDegree:a,maxDegree:l,showCohomology:g})}),[t,a,l,g,r]);if(!n)return(0,j.jsx)(s.Fragment,{});const b=Gt(t,"cohomology"),{computing:y,workerProgress:v}=Lt(o);return(0,j.jsx)("form",{onSubmit:h,"data-testid":"ComputeCohomologyForm",children:(0,j.jsxs)(d.A,{spacing:1,children:[(0,j.jsxs)("span",{children:["Compute cohomology ",(0,j.jsx)(zt,{targetName:t,degree:"n"})," for"]}),(0,j.jsxs)(d.A,{direction:"row",alignItems:"center",justifyContent:"center",spacing:1,children:[(0,j.jsx)(Jt,{...i}),(0,j.jsx)(u.A,{math:"\\leq n \\leq"}),(0,j.jsx)(Jt,{...c})]}),(0,j.jsx)(m.A,{row:!0,value:g,onChange:e=>p(e.target.value),children:Ct.map((e=>(0,j.jsx)(f.A,{value:e,control:(0,j.jsx)(x.A,{}),label:e},e)))}),(0,j.jsx)(Ot,{type:"submit",variant:"contained",disabled:!b,computing:y,progress:v}),!b&&(0,j.jsx)(_.A,{severity:"info",children:"Currently, this type of computation is not supported."})]})})}function Ft(e){let{targetName:t,postMessageToWorker:r,visible:n,workerInfo:o}=e;const a=Gt(t,"class"),[i,l]=function(e){let{label:t,defaultValue:r,width:n,disabled:o}=e;const[a,i]=(0,s.useState)(r);return[a,{label:t,value:a,setValue:i,width:void 0!==n?n:70,disabled:void 0!==o&&o}]}({label:"",defaultValue:"x^2",width:200,disabled:!a}),[c,g]=(0,s.useState)(!0),p=(0,s.useCallback)((e=>{e.preventDefault();r({command:"computeCohomologyClass",targetName:t,cocycleString:i,showBasis:c})}),[t,i,c,r]);if(!n)return(0,j.jsx)(s.Fragment,{});const{computing:m,workerProgress:x}=Lt(o);return(0,j.jsx)("form",{onSubmit:p,"data-testid":"ComputeClassForm",children:(0,j.jsxs)(d.A,{spacing:1,children:[(0,j.jsxs)("span",{children:["Compute cohomology class ",(0,j.jsx)(u.A,{math:`[\\omega] \\in ${Mt(t)}`})," for"]}),(0,j.jsxs)(d.A,{direction:"row",alignItems:"center",justifyContent:"center",spacing:1,children:[(0,j.jsx)(u.A,{math:"\\omega ="}),(0,j.jsx)(Pt,{...l})]}),(0,j.jsx)(f.A,{control:(0,j.jsx)(Tt.A,{}),label:"Show basis",checked:c,onChange:e=>g(e.target.checked)}),(0,j.jsx)(Ot,{type:"submit",variant:"contained",disabled:!a,computing:m,progress:x}),!a&&(0,j.jsx)(_.A,{severity:"info",children:"Currently, this type of computation is not supported."})]})})}function Wt(e){let{targetName:t,postMessageToWorker:r,visible:n,workerInfo:o}=e;const[a,i]=Nt({label:"",defaultValue:10}),l=(0,s.useCallback)((e=>{e.preventDefault();r({command:"computeMinimalModel",targetName:t,isomorphismUpTo:a})}),[t,a,r]);if(!n)return(0,j.jsx)(s.Fragment,{});const u=Gt(t,"minimal"),{computing:c,workerProgress:g,message:p}=Lt(o);return(0,j.jsx)("form",{onSubmit:l,"data-testid":"ComputeMinimalModel",children:(0,j.jsxs)(d.A,{spacing:1,children:[(0,j.jsxs)(d.A,{direction:"row",alignItems:"center",justifyContent:"center",spacing:1,children:["Compute minimal model until degree",(0,j.jsx)(Jt,{...i})]}),(0,j.jsx)(Ot,{type:"submit",variant:"contained",disabled:!u,computing:c,progress:g,message:p}),!u&&(0,j.jsx)(_.A,{severity:"info",children:"Currently, this type of computation is not supported."})]})})}function Gt(e,t){switch(e){case"self":case"cyclic":case"idealQuot":return!0;case"freeLoopSpace":switch(t){case"cohomology":case"class":return!0;case"minimal":return!1}case"derivation":switch(t){case"cohomology":return!0;case"class":case"minimal":return!1}}}function Bt(e){let{targetName:t,postMessageToWorker:r,workerInfo:n}=e;const[o,a]=(0,s.useState)("cohomology");return(0,j.jsxs)(s.Fragment,{children:[(0,j.jsxs)(E.A,{value:o,onChange:(e,t)=>{a(t)},children:[(0,j.jsx)(O.A,{value:"cohomology",label:"Cohomology group",sx:{textTransform:"none"}}),(0,j.jsx)(O.A,{value:"class",label:"Cohomology class",sx:{textTransform:"none"}}),(0,j.jsx)(O.A,{value:"minimal",label:"Minimal model",sx:{textTransform:"none"}})]}),(0,j.jsx)($t,{targetName:t,postMessageToWorker:r,visible:"cohomology"===o,workerInfo:n}),(0,j.jsx)(Ft,{targetName:t,postMessageToWorker:r,visible:"class"===o,workerInfo:n}),(0,j.jsx)(Wt,{targetName:t,postMessageToWorker:r,visible:"minimal"===o,workerInfo:n})]})}function Qt(e){let{setOpen:t}=e;return(0,j.jsx)(p.A,{variant:"contained",size:"small",onClick:()=>t(!0),children:"Restart"})}function Kt(e){let{open:t,setOpen:r,restart:n}=e;return(0,j.jsxs)(h.A,{open:t,onClose:()=>r(!1),children:[(0,j.jsx)(b.A,{children:"Are you sure to restart the background process (WebWorker)? This will stop the current computation (if exists) and clear the cache."}),(0,j.jsxs)(y.A,{children:[(0,j.jsx)(p.A,{onClick:()=>{n(),r(!1)},variant:"contained",children:"Restart"}),(0,j.jsx)(p.A,{onClick:()=>r(!1),variant:"outlined",children:"Cancel"})]})]})}var Ht=r(9030),qt=r(797),Ut=r(1826);function Zt(e){let{setOpen:t}=e;return(0,j.jsx)(p.A,{onClick:()=>t(!0),sx:{textTransform:"none"},variant:"outlined",size:"small",children:"Share this DGA"})}function Xt(e){let{text:t}=e;const[r,n]=(0,s.useState)(!1);return(0,j.jsx)(X.A,{title:"Copied",open:r,onClose:()=>n(!1),children:(0,j.jsx)(p.A,{onClick:async()=>{await navigator.clipboard.writeText(t),n(!0)},variant:"contained",size:"small",children:"copy"})})}function Yt(e){let{dgaJson:t,idealJson:r,targetName:n}=e;const o=function(e){let{dgaJson:t,format:r,idealJson:n,targetName:s}=e;const o=new URLSearchParams,a=yt(t,r);if(null!==a){const[e,t]=a;o.append(e,t)}const i=bt(n);return null!==i&&""!==i&&o.append(mt.idealDsv,i),o.append(mt.taretName,s),o}({dgaJson:t,format:"auto",idealJson:r,targetName:n}),a=`${function(){const e=(0,qt.A)();return(0,Ut.D)()?window.location.origin:e.siteConfig.url}()}${(0,Ht.Ay)("calculator")}?${o.toString()}`;return(0,j.jsxs)(s.Fragment,{children:[(0,j.jsx)(Z.A,{label:"url",value:a,sx:{width:300},size:"small",InputProps:{readOnly:!0},multiline:!0}),(0,j.jsx)(Xt,{text:a})]})}function er(e){let{open:t,setOpen:r,dgaJson:n,idealJson:s,targetName:o}=e;const a=k();return(0,j.jsxs)(h.A,{open:t,onClose:()=>r(!1),PaperProps:{sx:{[a]:{margin:0,width:"calc(100% - 5pt)"}}},children:[(0,j.jsx)(b.A,{children:(0,j.jsx)(Yt,{dgaJson:n,idealJson:s,targetName:o})}),(0,j.jsx)(y.A,{children:(0,j.jsx)(p.A,{onClick:()=>r(!1),variant:"outlined",children:"Close"})})]})}var tr=r(1278);function rr(e){let{messages:t}=e;const[r,n]=(0,s.useState)(!0);if(0===t.length)return(0,j.jsx)(s.Fragment,{});const o=(e,t)=>{"clickaway"!==t&&n(!1)};return(0,j.jsx)(tr.A,{open:r,anchorOrigin:{vertical:"top",horizontal:"center"},onClose:o,children:(0,j.jsx)(_.A,{severity:"error",onClose:o,variant:"filled",elevation:6,children:t.map(((e,t)=>(0,j.jsx)("div",{style:{whiteSpace:"pre-wrap"},children:e},t)))})})}var nr=r(8453);function sr(e){const t={p:"p",...(0,nr.R)(),...e.components};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(t.p,{children:'Input a Sullivan algebra from the "Edit DGA" button'}),"\n",(0,j.jsx)(t.p,{children:"This calculator can compute the cohomology of the Sullivan algebra, its Hochschild homology (cohomology of the free loop space), and its cyclic homology (equivariant cohomology of the free loop space)."}),"\n",(0,j.jsx)(t.p,{children:'Note that "u" cannot be used as a generator when "cyclic" is selected, since "u" is reserved for the model of the cyclic homology.'})]})}function or(e={}){const{wrapper:t}={...(0,nr.R)(),...e.components};return t?(0,j.jsx)(t,{...e,children:(0,j.jsx)(sr,{...e})}):sr(e)}function ar(e){let{setOpen:t}=e;return(0,j.jsx)(p.A,{onClick:()=>t(!0),sx:{textTransform:"none"},variant:"outlined",size:"small",children:"Show usage"})}function ir(e){let{open:t,setOpen:r}=e;return(0,j.jsxs)(h.A,{open:t,onClose:()=>r(!1),children:[(0,j.jsx)(b.A,{children:(0,j.jsx)(or,{})}),(0,j.jsx)(y.A,{children:(0,j.jsx)(p.A,{onClick:()=>r(!1),variant:"outlined",children:"Close"})})]})}var lr=r(9888);function ur(e){const t=(0,s.useContext)(e.reactContext),[r,n]=(0,s.useContext)(e.stateContext);(0,s.useEffect)((()=>{t.subscribe("__set_worker_state__",(e=>{const t=function(e){return"updateState"===e.type}(r=e)?{[r.key]:r.value}:null;var r;null!==t&&n((e=>({...e,...t})))}))}),[t,n]);const o=(0,s.useCallback)((e=>{const r="__useSyncExternalStore__";return t.subscribe(r,e),()=>t.unsubscribe(r)}),[t]),a=(0,s.useCallback)((()=>t.workerOutputLog),[t]),i=(0,lr.useSyncExternalStore)(o,a),l=(0,s.useCallback)((e=>{const r={type:"input",value:e};t.postMessage(r)}),[t]),u=(0,s.useCallback)(((e,r)=>{t.subscribe(e,(e=>{"output"===e.type&&r(e.value)}))}),[t]),c=(0,s.useCallback)(((e,r)=>{t.subscribeRestart(e,r)}),[t]);return{postMessage:l,workerOutputLog:i,addListener:u,restart:(0,s.useCallback)((()=>t.restart()),[t]),addRestartListener:c,state:r,runAsync:(0,s.useCallback)((async(e,r)=>{const n=function(){const e=20,t=cr.length,r=[];for(let n=0;n<e;n++)r.push(cr.charAt(Math.floor(Math.random()*t)));return r.join("")}(),s={type:"callFunc",key:e,args:r,id:n},o=`runAsync-${n}`,a=new Promise(((r,s)=>{t.subscribe(o,(s=>{"funcResult"===s.type&&s.key===e&&s.id===n&&(t.unsubscribe(o),r(s.result))}))}));return t.postMessage(s),a}),[t])}}const cr="0123456789abcdef";class dr{onmessageFunctions=(()=>new Map)();onRestartFunctions=(()=>new Map)();workerOutputLog=[];constructor(e){this.createWorker=e,this.worker=this.createWorker(),this.worker.onmessage=e=>this.onmessage(e.data)}log(){"undefined"==typeof jest&&console.log(...arguments)}subscribe(e,t){this.onmessageFunctions.set(e,t),this.log(`subscribe: ${e}`)}unsubscribe(e){this.onmessageFunctions.delete(e),this.log(`unsubscribe: ${e}`)}subscribeRestart(e,t){this.onRestartFunctions.set(e,t),this.log(`subscribe restart: ${e}`)}unsubscribeRestart(e){this.onRestartFunctions.delete(e)}postMessage(e){this.worker.postMessage(e)}onmessage(e){this.workerOutputLog=[...this.workerOutputLog,e],this.onmessageFunctions.forEach((t=>t(e)))}terminate(){console.log("Worker terminated"),this.worker.terminate()}restart(){this.worker.terminate(),this.worker=this.createWorker(),this.worker.onmessage=e=>this.onmessage(e.data),this.onRestartFunctions.forEach((e=>e()))}static default(){return new dr((()=>({})))}}function gr(e){const t=(0,s.useRef)(null);null===t.current&&(t.current=new dr(e.createWorker));const r=(0,s.useState)(e.defaultState),n=e.context,o=e.stateContext;return(0,j.jsx)(n.Provider,{value:t.current,children:(0,j.jsx)(o.Provider,{value:r,children:e.children})})}const pr=function(){const e=(0,s.createContext)(dr.default()),t=(0,s.createContext)([void 0,e=>{throw new Error("Not wrapped by provider")}]),r=function(e,t){return r=>{const n="defaultState"in r?r.defaultState:{};return(0,j.jsx)(gr,{context:e,stateContext:t,createWorker:r.createWorker,defaultState:n,children:r.children})}}(e,t);return{reactContext:e,stateContext:t,Provider:r}}();function mr(e){let{children:t,"data-testid":r}=e;return(0,j.jsx)("span",{"data-testid":r,children:(0,j.jsx)(c.A,{disableGutters:!0,sx:{paddingLeft:1,paddingRight:1},children:t})})}function fr(){const{array:e,push:t}=function(){const[e,t]=(0,s.useState)([]);return{array:e,push:(0,s.useCallback)((e=>{t((t=>[...t,e]))}),[t])}}(),r=St(At(),We(2),t),n=St(function(){const e=vt();try{const t=kt(e);return null===t?{type:"unspecified"}:{type:"success",value:t}}catch(t){return t instanceof Error?{type:"error",message:t.message}:(console.error(t),{type:"error",message:"[Error] Some error occurred while parsing URL parameter"})}}(),"[]",t),o=St(function(){const e=vt().get(mt.taretName);return null===e?{type:"unspecified"}:wt.includes(e)?{type:"success",value:e}:{type:"error",message:`Invalid target name: ${e}`}}(),"self",t),{json:a,setJson:i,idealJson:l,setIdealJson:c,dgaInfo:h,idealInfo:b,workerInfo:y,postMessage:v,restart:A,runAsync:w}=function(e){let{defaultJson:t,defaultIdealJson:r,onmessage:n}=e;const{postMessage:o,addListener:a,addRestartListener:i,restart:l,state:{json:u,dgaInfo:c,idealJson:d,idealInfo:g,workerInfo:p},runAsync:m}=ur(pr),f=(0,s.useCallback)((e=>{o({command:"updateJson",json:e})}),[o]),x=(0,s.useCallback)((e=>{o({command:"updateIdealJson",idealJson:e})}),[o]);return(0,s.useEffect)((()=>{a("useKohomologyWorker",n)}),[a,n]),(0,s.useEffect)((()=>{i("useKohomologyWorker",(()=>{f(u)}))}),[i,f,u]),(0,s.useEffect)((()=>{f(t),x(r)}),[f,t,x,r]),{json:u,setJson:f,idealJson:d,setIdealJson:x,dgaInfo:c,idealInfo:g,workerInfo:p,postMessage:o,restart:l,runAsync:m}}({defaultJson:r,defaultIdealJson:n,onmessage:e=>{}}),[C,S]=(0,s.useState)(o),{usageDialogProps:k,usageButtonProps:T}=function(){const[e,t]=(0,s.useState)(!1);return{usageDialogProps:{open:e,setOpen:t},usageButtonProps:{setOpen:t}}}(),{restartDialogProps:D,restartButtonProps:I}=function(e){const[t,r]=(0,s.useState)(!1);return{restartDialogProps:{open:t,setOpen:r,restart:e},restartButtonProps:{setOpen:r}}}((()=>{A()})),{shareDGADialogProps:E,shareDGAButtonProps:O}=function(e){let{dgaJson:t,idealJson:r,targetName:n}=e;const[o,a]=(0,s.useState)(!1);return{shareDGADialogProps:{open:o,setOpen:a,dgaJson:t,idealJson:r,targetName:n},shareDGAButtonProps:{setOpen:a}}}({dgaJson:a,idealJson:l,targetName:C}),{TabDialog:J,tabDialogProps:N,openDialog:P}=tt(a,i),_=(0,s.useCallback)((async e=>await w("validateIdealGenerator",[e])),[w]),M=(0,s.useCallback)((async e=>await w("validateIdealGeneratorArray",[e])),[w]);return(0,j.jsxs)(s.Fragment,{children:[(0,j.jsx)(rr,{messages:e}),(0,j.jsxs)(d.A,{direction:"column",spacing:2,divider:(0,j.jsx)(g.A,{orientation:"horizontal"}),sx:{width:400,margin:1},children:[(0,j.jsx)(mr,{children:(0,j.jsxs)(d.A,{direction:"row",spacing:2,children:[(0,j.jsx)(ar,{...T}),(0,j.jsx)(ir,{...k}),(0,j.jsx)(Qt,{...I}),(0,j.jsx)(Kt,{...D})]})}),(0,j.jsxs)(mr,{"data-testid":"CalculatorForm-StackItem-DGA",children:["Input a Sullivan model of a space ",(0,j.jsx)(u.A,{math:"X"}),":",(0,j.jsx)("div",{"data-testid":"CalculatorForm-dga-info","data-dga-json":a,children:h.map(((e,t)=>(0,j.jsx)(ze,{styledMessage:e},t)))}),(0,j.jsxs)(d.A,{direction:"row",spacing:2,sx:{marginTop:.5},children:[(0,j.jsx)(p.A,{variant:"contained",size:"small",onClick:P,sx:{textTransform:"none"},children:"Edit DGA"}),(0,j.jsx)(J,{...N}),(0,j.jsx)(Zt,{...O}),(0,j.jsx)(er,{...E})]})]}),(0,j.jsxs)(mr,{"data-testid":"CalculatorForm-StackItem-SelectTarget",children:[(0,j.jsx)(m.A,{row:!0,value:C,onChange:e=>S(e.target.value),children:wt.map((e=>(0,j.jsx)(f.A,{value:e,control:(0,j.jsx)(x.A,{size:"small"}),label:(0,j.jsx)(Vt,{targetName:e})},e)))}),(0,j.jsx)(u.A,{math:`\\cong ${Mt(C)}`}),"idealQuot"===C&&(0,j.jsx)(pt,{setIdealJson:c,idealInfo:b,idealJson:l,validateGenerator:_,validateGeneratorArray:M})]}),(0,j.jsx)(mr,{children:(0,j.jsx)(Bt,{targetName:C,postMessageToWorker:e=>{v(e)},workerInfo:y})})]})]})}var xr=r(7416);function hr(e){const t=(0,s.useRef)(null);return(0,s.useEffect)((()=>{(()=>{const e=t.current;null!==e&&void 0!==e.scrollTo&&function(e){return e.scrollTop+50>=e.scrollHeight-e.clientHeight}(e)&&setTimeout((()=>{e.scrollTo({top:e.scrollHeight,behavior:"smooth"})}))})()}),e),t}function br(e){let{messages:t}=e;const r=hr([t]);return(0,j.jsx)(xr.A,{elevation:0,variant:"outlined",ref:r,"data-testid":"calculator-results",sx:{width:"700px",height:"700px",overflowY:"scroll",padding:"5px","@media screen and (max-width: 700px)":{width:"100%",height:"50vh",margin:"3px"}},children:t.map(((e,t)=>(0,j.jsx)(ze,{styledMessage:e},t)))})}function yr(){const{addListener:e,addRestartListener:t}=ur(pr),r=[Le("success","Computation results will be shown here")],[n,o]=(0,s.useState)(r),a=(0,s.useCallback)((e=>{o(e instanceof Array?t=>t.concat(e):t=>t.concat([e]))}),[o]),i=(0,s.useCallback)((e=>{"printMessages"===e.command&&a(e.messages)}),[a]);return(0,s.useEffect)((()=>{e("MessageBoxForWorker",i)}),[e,i]),(0,s.useEffect)((()=>{t("MessageBoxForWorker",(()=>{a(Le("success","The background process is restarted."))}))}),[t,a]),(0,j.jsx)(br,{messages:n})}var jr=r(8532),vr=r(467);function Ar(){const e=function(){const{colorMode:e}=(0,jr.G)();return(0,s.useMemo)((()=>(0,vr.A)({palette:{mode:e,primary:{main:"#7e6ca8"}}})),[e])}();return(0,j.jsx)(a.A,{theme:e,children:(0,j.jsx)(i.A,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"center",paddingTop:"10px",paddingBottom:"10px"},children:(0,j.jsxs)(pr.Provider,{createWorker:()=>new l,defaultState:{json:"[]",idealJson:"[]",dgaInfo:[],idealInfo:Le("success",""),workerInfo:{status:"idle"}},children:[(0,j.jsx)(fr,{}),(0,j.jsx)(yr,{})]})})})}function wr(){return(0,j.jsx)(o.A,{fallback:(0,j.jsx)("div",{children:"Loading..."}),children:()=>(0,j.jsx)(Ar,{})})}function Cr(){return(0,j.jsx)(n.A,{title:"Calculator",children:(0,j.jsx)(wr,{})})}}}]);