"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[842],{4380:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Sr});var n=r(2954),s=r(6540),o=r(9888);function a(e){const t=(0,s.useContext)(e.reactContext),[r,n]=(0,s.useContext)(e.stateContext);(0,s.useEffect)((()=>{t.subscribe("__set_worker_state__",(e=>{const t=function(e){return"updateState"===e.type}(r=e)?{[r.key]:r.value}:null;var r;null!==t&&n((e=>({...e,...t})))}))}),[t,n]);const a=(0,s.useCallback)((e=>{const r="__useSyncExternalStore__";return t.subscribe(r,e),()=>t.unsubscribe(r)}),[t]),l=(0,s.useCallback)((()=>t.workerOutputLog),[t]),u=(0,o.useSyncExternalStore)(a,l),c=(0,s.useCallback)((e=>{const r={type:"input",value:e};t.postMessage(r)}),[t]),d=(0,s.useCallback)(((e,r)=>{t.subscribe(e,(e=>{"output"===e.type&&r(e.value)}))}),[t]),g=(0,s.useCallback)(((e,r)=>{t.subscribeRestart(e,r)}),[t]);return{postMessage:c,workerOutputLog:u,addListener:d,restart:(0,s.useCallback)((()=>t.restart()),[t]),addRestartListener:g,state:r,runAsync:(0,s.useCallback)((async(e,r)=>{const n=function(){const e=20,t=i.length,r=[];for(let n=0;n<e;n++)r.push(i.charAt(Math.floor(Math.random()*t)));return r.join("")}(),s={type:"callFunc",key:e,args:r,id:n},o=`runAsync-${n}`,a=new Promise(((r,s)=>{t.subscribe(o,(s=>{"funcResult"===s.type&&s.key===e&&s.id===n&&(t.unsubscribe(o),r(s.result))}))}));return t.postMessage(s),a}),[t])}}const i="0123456789abcdef";class l{onmessageFunctions=(()=>new Map)();onRestartFunctions=(()=>new Map)();workerOutputLog=[];constructor(e){this.createWorker=e,this.worker=this.createWorker(),this.worker.onmessage=e=>this.onmessage(e.data)}log(){"undefined"==typeof jest&&console.log(...arguments)}subscribe(e,t){this.onmessageFunctions.set(e,t),this.log(`subscribe: ${e}`)}unsubscribe(e){this.onmessageFunctions.delete(e),this.log(`unsubscribe: ${e}`)}subscribeRestart(e,t){this.onRestartFunctions.set(e,t),this.log(`subscribe restart: ${e}`)}unsubscribeRestart(e){this.onRestartFunctions.delete(e)}postMessage(e){this.worker.postMessage(e)}onmessage(e){this.workerOutputLog=[...this.workerOutputLog,e],this.onmessageFunctions.forEach((t=>t(e)))}terminate(){console.log("Worker terminated"),this.worker.terminate()}restart(){this.worker.terminate(),this.worker=this.createWorker(),this.worker.onmessage=e=>this.onmessage(e.data),this.onRestartFunctions.forEach((e=>e()))}static default(){return new l((()=>({})))}}var u=r(4848);function c(e){const t=(0,s.useRef)(null);null===t.current&&(t.current=new l(e.createWorker));const r=(0,s.useState)(e.defaultState),n=e.context,o=e.stateContext;return(0,u.jsx)(n.Provider,{value:t.current,children:(0,u.jsx)(o.Provider,{value:r,children:e.children})})}const d=["text","math"],g=["success","error"];function p(e,t){return{messageType:e,strings:[{stringType:"text",content:t}],plainString:t,options:[{text:t,label:"Copy this line"}]}}var m=r(7416),f=r(2259),x=r(5044),h=r(4671),b=r(6978),y=r(421);function j(e){let{containerClass:t,handleClick:r,handleClose:n,open:o,anchorEl:a,options:i}=e;return(0,u.jsxs)(s.Fragment,{children:[(0,u.jsx)(h.A,{size:"small",onClick:r,sx:{paddingTop:0,paddingBottom:0,position:"absolute",bottom:"4px",right:0,visibility:"hidden",[`.${t}:hover &`]:{visibility:"visible"}},children:(0,u.jsx)(x.A,{fontSize:"small"})}),(0,u.jsx)(b.A,{anchorEl:a,open:o,onClose:n,children:i.map((e=>(0,u.jsx)(v,{text:e.text,label:e.label,handleClose:n})))})]})}function v(e){let{text:t,label:r,handleClose:n}=e;return(0,u.jsx)(y.A,{onClick:async()=>{null!==t&&(await navigator.clipboard.writeText(t),console.log("Copied:",t)),n()},disabled:null===t,children:r})}function A(e){let{content:t}=e;const r=t.split("\n");return(0,u.jsx)("span",{children:r.map(((e,t)=>t<r.length-1?(0,u.jsxs)(s.Fragment,{children:[e,(0,u.jsx)("br",{})]},t):(0,u.jsx)(s.Fragment,{children:e},t)))})}function w(e){let{styledString:t}=e;const r={"\\deg":"|#1|"};switch(t.stringType){case"text":return(0,u.jsx)(A,{content:t.content});case"math":return(0,u.jsx)(f.A,{math:t.content,settings:{output:"html",macros:r}})}}function C(e,t){if(t)return{background:"aquamarine"};switch(e){case"success":return{};case"error":return{background:"peachpuff"}}}function S(e){let{styledMessage:t}=e;const r="show-styled-message",{optionsButtonProps:n,open:o}=function(e,t){const[r,n]=(0,s.useState)(null),o=Boolean(r);return{optionsButtonProps:{containerClass:e,handleClick:e=>{n(e.currentTarget)},handleClose:()=>{n(null)},open:o,anchorEl:r,options:t},open:o}}(r,t.options);return(0,u.jsxs)("div",{className:r,"data-styled-message":t.plainString,"data-testid":"show-styled-message",style:{...C(t.messageType,o),borderBottom:"1px solid lightGray",position:"relative"},children:[t.strings.map(((e,t)=>(0,u.jsx)(w,{styledString:e},t))),(0,u.jsx)(j,{...n})]})}function k(e){const t=(0,s.useRef)(null);return(0,s.useEffect)((()=>{(()=>{const e=t.current;null!==e&&void 0!==e.scrollTo&&function(e){return e.scrollTop+50>=e.scrollHeight-e.clientHeight}(e)&&setTimeout((()=>{e.scrollTo({top:e.scrollHeight,behavior:"smooth"})}))})()}),e),t}function T(e){let{messages:t}=e;const r=k([t]);return(0,u.jsx)(m.A,{elevation:0,variant:"outlined",ref:r,"data-testid":"calculator-results",sx:{width:"700px",height:"700px",overflowY:"scroll",padding:"5px","@media screen and (max-width: 700px)":{width:"100%",height:"50vh",margin:"3px"}},children:t.map(((e,t)=>(0,u.jsx)(S,{styledMessage:e},t)))})}function D(e){let{context:t}=e;const{addListener:r,addRestartListener:n}=a(t),o=[p("success","Computation results will be shown here")],[i,l]=(0,s.useState)(o),c=(0,s.useCallback)((e=>{l(e instanceof Array?t=>t.concat(e):t=>t.concat([e]))}),[l]),d=(0,s.useCallback)((e=>{"printMessages"===e.command&&c(e.messages)}),[c]);return(0,s.useEffect)((()=>{r("MessageBoxForWorker",d)}),[r,d]),(0,s.useEffect)((()=>{n("MessageBoxForWorker",(()=>{c(p("success","The background process is restarted."))}))}),[n,c]),(0,u.jsx)(T,{messages:i})}var I=r(5363),E=r(5916),O=r(7733);function J(){return new Worker(r.p+"assets/js/kohomology.worker.c0d64ad8.worker.js")}var N=r(6132),P=r(2007),_=r(1543),M=r(7512),z=r(8228),R=r(6071),V=r(1303),L=r(3051),$=r(8968),F=r(5993);function W(e){let{open:t,resolveConfirm:r,prompt:n,trueText:s,falseText:o}=e;return(0,u.jsxs)(L.A,{open:t,onClose:()=>r?.(!1),children:[(0,u.jsx)($.A,{children:n}),(0,u.jsxs)(F.A,{children:[(0,u.jsx)(M.A,{onClick:()=>r?.(!0),variant:"contained",children:s}),(0,u.jsx)(M.A,{onClick:()=>r?.(!1),variant:"outlined",children:o})]})]})}function G(e){const{confirm:t,confirmDialog:r}=function(e){let{trueText:t,falseText:r}=e;const[n,o]=(0,s.useState)(!1),[a,i]=(0,s.useState)(null),[l,c]=(0,s.useState)("__DEFAULT_PROMPT__"),d={open:n,resolveConfirm:a,prompt:l,trueText:t,falseText:r};return{confirm:function(e){return c(e),o(!0),new Promise((e=>{i((t=>t=>{e(t),o(!1)}))}))},confirmDialog:(0,u.jsx)(W,{...d})}}(e);return{canQuit:async e=>{const r=e?.();return void 0===r||t(r)},confirmDialog:r}}function B(e){let{editor:{renderContent:t,renderTitle:r,getOnSubmit:n,preventQuit:o,disableSubmit:a,beforeOpen:i,onQuit:l}}=e;const[u,c]=(0,s.useState)(!1),{canQuit:d,confirmDialog:g}=G({trueText:"Quit",falseText:"Resume"});const p=()=>c(!1);return{editorDialogProps:{renderContent:t,renderTitle:r,open:u,closeDialog:p,tryToQuit:async function(){await d(o)&&(l?.(),c(!1))},disableSubmit:a,onSubmit:n(p),confirmDialog:g},openDialog:function(){i?.(),c(!0)}}}var Q=r(6831),K=r(4675);function H(){return(0,K.A)().breakpoints.down("sm")}function q(e){let{renderContent:t,renderTitle:r,open:n,closeDialog:s,tryToQuit:o,disableSubmit:a,onSubmit:i,confirmDialog:l}=e;const c=H();return(0,u.jsxs)(L.A,{open:n,onClose:o,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{[c]:{margin:0,width:"calc(100% - 5pt)"}}},children:[void 0!==r&&(0,u.jsx)(Q.A,{children:r()}),(0,u.jsx)($.A,{sx:{[c]:{padding:1}},children:t(s)}),(0,u.jsxs)(F.A,{children:[(0,u.jsx)(M.A,{onClick:i,variant:"contained",disabled:a?.(),children:"Apply"}),(0,u.jsx)(M.A,{onClick:o,variant:"outlined",children:"Cancel"})]}),l]})}function U(e){let{tabItems:t,tabKeys:r,currentTabKey:n,closeDialog:o}=e;return(0,u.jsx)(s.Fragment,{children:r.map((e=>(0,u.jsx)(Z,{currentTabKey:n,tabKeyForPanel:e,children:t[e].editor.renderContent(o)},e)))})}function Z(e){let{currentTabKey:t,tabKeyForPanel:r,children:n}=e;return(0,u.jsx)("div",{hidden:t!==r,children:n})}var X=r(5611),Y=r(6786);function ee(e){let{tabItems:t,tabKeys:r,currentTabKey:n,setCurrentTabKey:o}=e;const{canQuit:a,confirmDialog:i}=G({trueText:"Quit",falseText:"Resume"});return(0,u.jsxs)(s.Fragment,{children:[(0,u.jsx)(X.A,{value:n,onChange:async(e,r)=>await async function(e){await a(t[n].editor.preventQuit)&&(o(e),t[e].editor.beforeOpen?.())}(r),children:r.map((e=>(0,u.jsx)(Y.A,{value:e,label:t[e].label,sx:{textTransform:"none"}},e)))}),i]})}function te(e,t,r){const{editor:n}=function(e){let{tabItems:t,tabKeys:r,defaultTabKey:n}=e;const[o,a]=(0,s.useState)(n),i=t[o],l=(0,s.useCallback)((e=>(0,u.jsx)(U,{tabItems:t,tabKeys:r,currentTabKey:o,closeDialog:e})),[t,r,o]),c=(0,s.useCallback)((()=>(0,u.jsx)(ee,{tabItems:t,tabKeys:r,currentTabKey:o,setCurrentTabKey:a})),[t,r,o,a]);return{editor:(0,s.useMemo)((()=>({renderContent:l,renderTitle:c,getOnSubmit:i.editor.getOnSubmit,preventQuit:i.editor.preventQuit,disableSubmit:i.editor.disableSubmit,beforeOpen:i.editor.beforeOpen,onQuit:i.editor.onQuit})),[l,c,i])}}({tabItems:e,tabKeys:t,defaultTabKey:r}),{editorDialogProps:o,openDialog:a}=B({editor:n});return{tabDialogProps:o,openDialog:a}}function re(e){return(0,u.jsx)(q,{...e})}var ne=r(8486),se=r(4660),oe=r(4368);function ae(e){if(void 0===e)return[];const t=e?.message;if(void 0===t)return[];return[{type:e.type,message:t}]}const ie="_HIDE_THIS_ERROR_";function le(e){let{fieldErrorArray:t,criteriaMode:r="firstError"}=e;const n=function(e){let{fieldErrorArray:t,criteriaMode:r}=e;switch(r){case"all":return t.flatMap((e=>{const t=e?.types;return void 0===t?ae(e):Object.entries(t).map((e=>{let[t,r]=e;return{type:t,message:r}}))}));case"firstError":return t.flatMap(ae)}}({fieldErrorArray:t,criteriaMode:r});return(0,u.jsx)(se.N,{mode:"sync",children:n.map((e=>{let{message:t,type:r}=e;if(void 0!==t&&t!==ie)return(0,u.jsx)(oe.P.div,{...ue,children:(0,u.jsx)(ne.A,{severity:"error",sx:{whiteSpace:"pre-wrap",paddingTop:0,paddingBottom:0,paddingLeft:"5px",paddingRight:"5px"},children:t})},`motion-${r}-${t}`)}))})}const ue={initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},style:{overflow:"hidden",color:"red",marginTop:4}};var ce=r(2790),de=r(8831),ge=r(3627),pe=r(4979);function me(e){let{id:t,RowComponent:r,index:n,formData:s,externalData:o}=e;const{attributes:a,listeners:i,setNodeRef:l,transform:c,transition:d}=(0,ge.gl)({id:t}),g={transform:pe.Ks.Transform.toString(c),transition:d},p={draggableProps:{...a,...i},index:n,formData:s,externalData:o};return(0,u.jsx)("div",{ref:l,style:g,children:(0,u.jsx)(r,{...p})})}function fe(e){let{fields:t,move:r,formData:n,RowComponent:s,Container:o,externalData:a}=e;const i=(0,ce.FR)((0,ce.MS)(ce.AN),(0,ce.MS)(ce.uN,{coordinateGetter:ge.JR})),{trigger:l}=n;return(0,u.jsx)(o,{children:(0,u.jsx)(ce.Mp,{sensors:i,collisionDetection:ce.fp,onDragEnd:async function(e){let{active:n,over:s}=e;if(null===s)throw new Error("over is null");if(n.id!==s.id){console.log(`replace: ${n.id}, ${s.id}`);const e=t.map((e=>e.id)).indexOf(n.id),o=t.map((e=>e.id)).indexOf(s.id);r(e,o)}await l()},modifiers:[de.gj],children:(0,u.jsx)(ge.gB,{items:t,strategy:ge._G,children:t.map(((e,t)=>(0,u.jsx)(me,{id:e.id,index:t,formData:n,RowComponent:s,externalData:a},e.id)))})})})}var xe=r(9682),he=r(7110),be=r(3178),ye=r(3581),je=r(1922);function ve(){const e=(0,s.useRef)(null);return(0,s.useCallback)(((t,r)=>{null!==e.current&&clearTimeout(e.current);const n=setTimeout(t,r);e.current=n}),[])}function Ae(e){let{draggableProps:t,index:r,formData:{register:n,errors:o,remove:a,getValues:i,trigger:l}}=e;const c=i().generatorArray[r].name,d=ve(),g=(0,s.useCallback)((()=>d((async()=>await l()),1e3)),[d,l]);return(0,u.jsx)("div",{"data-testid":"ArrayEditor-row",children:(0,u.jsxs)(P.A,{spacing:1,children:[(0,u.jsxs)(P.A,{direction:"row",spacing:1,children:[(0,u.jsx)(ye.A,{label:"generator",sx:{width:90},size:"small",...n(`generatorArray.${r}.name`,{onChange:g}),onBlur:()=>l(),error:Ce({errors:o,index:r,key:"name"}),inputProps:{"data-testid":"ArrayEditor-input-name"}}),(0,u.jsx)(ye.A,{label:`deg(${c})`,type:"number",sx:{width:80},size:"small",...n(`generatorArray.${r}.degree`,{valueAsNumber:!0,onChange:g}),onBlur:()=>l(),error:Ce({errors:o,index:r,key:"degree"})||Se({errors:o}),inputProps:{"data-testid":"ArrayEditor-input-degree"}}),(0,u.jsx)(ye.A,{label:`d(${c})`,sx:{width:200},size:"small",...n(`generatorArray.${r}.differentialValue`,{onChange:g}),onBlur:()=>l(),error:Ce({errors:o,index:r,key:"differentialValue"}),inputProps:{"data-testid":"ArrayEditor-input-differentialValue"}}),(0,u.jsx)(je.A,{title:"Delete this generator",children:(0,u.jsx)(h.A,{onClick:async()=>{a(r),await l()},size:"small",children:(0,u.jsx)(he.A,{fontSize:"small"})})}),(0,u.jsx)(h.A,{...t,style:{cursor:"grab",touchAction:"none"},children:(0,u.jsx)(be.A,{})})]}),(0,u.jsx)(we,{errors:o,index:r})]})})}function we(e){let{errors:t,index:r}=e;const n=t.generatorArray?.[r],s=function(e){let{error:t}=e;if(void 0===t)return[];return["name","degree","differentialValue"].flatMap((e=>t[e]))}({error:n});return(0,u.jsx)(le,{fieldErrorArray:s})}function Ce(e){let{errors:t,index:r,key:n}=e;const s=t.generatorArray?.[r]?.[n];return void 0!==s}function Se(e){let{errors:t}=e;return void 0!==t._global_errors?.generatorDegrees}var ke=r(4476),Te=r(4921);const De=ke.z.string().min(1,"Please enter the name.").superRefine(((e,t)=>{const r=(0,Te.validateGeneratorName)(e);switch(r.type){case"success":return;case"error":return void t.addIssue({code:ke.z.ZodIssueCode.custom,message:r.message});default:throw new Error("This can't happen!")}})),Ie=(Ee="Please enter the degree.",ke.z.preprocess((e=>{if(!Number.isNaN(e))return e}),ke.z.number({required_error:Ee}))).refine((e=>0!==e),"The degree cannot be 0.");var Ee;const Oe=ke.z.string().min(1,"Please enter the value of the differential."),Je=ke.z.object({name:De,degree:Ie,differentialValue:Oe});function Ne(e){return Pe(JSON.parse(e))}function Pe(e){return`[\n${e.map((e=>`  ["${e[0]}", ${e[1]}, "${e[2]}"]`)).join(",\n")}\n]`}function _e(e){return Pe(e.map((e=>{let{name:t,degree:r,differentialValue:n}=e;return[t,Number.isNaN(r)?1:r,n]})))}function Me(e){return JSON.parse(e).map((e=>{let[t,r,n]=e;return{name:t,degree:r,differentialValue:n}}))}const ze=ke.z.array(Je).superRefine(((e,t)=>{!function(e,t){e.forEach(((r,n)=>{const s=function(e,t,r){if(e[t].differentialValue!==r)throw new Error("generatorArray[index] and value do not match.");const n=_e(e.slice(0,t+1)),s=(0,Te.validateDifferentialValueOfTheLast)(n);switch(s.type){case"success":case"N/A":return!0;default:return s.message}}(e,n,r.differentialValue);"string"==typeof s&&t.addIssue({path:[n,"differentialValue"],code:ke.z.ZodIssueCode.custom,message:s})}))}(e,t)})),Re=ke.z.object({generatorDegrees:ke.z.null(),generatorNames:ke.z.null()}),Ve=ke.z.object({generatorArray:ze,_global_errors:Re.optional()}).superRefine(((e,t)=>{!function(e,t){const r=function(e){const t=e.filter((e=>e.degree>0)).length,r=e.filter((e=>e.degree<0)).length;return!(t>0&&r>0)||"Cannot mix generators of positive and negative degrees."}(e);"string"==typeof r&&t.addIssue({path:["_global_errors","generatorDegrees"],code:ke.z.ZodIssueCode.custom,message:r})}(e.generatorArray,t),function(e,t){const r=function(e){const t=e.map((e=>e.name)),r=new Map;return t.forEach(((e,n)=>{const s=t.indexOf(e);s!==n&&(r.set(n,`Generator names must be unique, but ${e} is already used.`),r.set(s,ie))})),r}(e);r.forEach(((e,r)=>{t.addIssue({path:["generatorArray",r,"name"],code:ke.z.ZodIssueCode.custom,message:e})}))}(e.generatorArray,t)}));function Le(e){let{register:t,errors:r,fields:n,append:s,remove:o,getValues:a,trigger:i,move:l,onSubmit:c}=e;const d={register:t,remove:o,errors:r,getValues:a,trigger:i};return(0,u.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),await c(e)},children:[(0,u.jsxs)(P.A,{spacing:2,sx:{marginTop:1},children:[(0,u.jsx)(fe,{RowComponent:Ae,Container:We,externalData:void 0,fields:n,move:l,formData:d}),(0,u.jsx)(M.A,{variant:"outlined",onClick:()=>s({name:$e(a().generatorArray),degree:1,differentialValue:"0"}),startIcon:(0,u.jsx)(xe.A,{}),sx:{textTransform:"none"},children:"Add a generator"}),Fe(r)]}),(0,u.jsx)("button",{hidden:!0,type:"submit"})]})}function $e(e){const t=e.map((e=>e.name)),r="xyzuvwabc".split("");for(const n of r)if(!t.includes(n))return n;return""}function Fe(e){const t=function(e){let{errors:t}=e;const r=t._global_errors;if(void 0===r)return[];return Object.keys(Re.shape).map((e=>r[e]))}({errors:e});return(0,u.jsx)(le,{fieldErrorArray:t})}function We(e){let{children:t}=e;return(0,u.jsx)(P.A,{spacing:2,children:t})}var Ge=r(8871),Be=r(9785);function Qe(e){const{label:t,editorWithoutRender:r,arrayEditorPropsExceptOnSubmit:n}=function(e){const t={generatorArray:Me(e.json)},{handleSubmit:r,register:n,getValues:s,reset:o,trigger:a,control:i,formState:{errors:l}}=(0,Be.mN)({mode:"onBlur",reValidateMode:"onBlur",criteriaMode:"all",defaultValues:t,resolver:(0,Ge.u)(Ve)}),{fields:u,append:c,remove:d,move:g}=(0,Be.jz)({control:i,name:"generatorArray"});return{label:"Array",editorWithoutRender:{getOnSubmit:function(t){return r((r=>{let{generatorArray:n}=r;e.updateDgaWrapper(_e(n)),t()}))},beforeOpen:function(){const t=Me(e.json);o({generatorArray:t})},preventQuit:function(){return _e(s().generatorArray)!==e.json?"Your input is not saved. Are you sure you want to quit?":void 0},disableSubmit:function(){return void 0!==l.generatorArray}},arrayEditorPropsExceptOnSubmit:{register:n,errors:l,fields:u,append:c,remove:d,getValues:s,trigger:a,move:g}}}(e);return{label:t,editor:{...r,renderContent:e=>(0,u.jsx)(Le,{onSubmit:r.getOnSubmit(e),...n})}}}var Ke=r(1729),He=r(8440),qe=r(9368);function Ue(e){const t=e.stringType;if(!d.includes(t))throw new Error(`Invalid stringType: ${t}`);return{stringType:t,content:e.content}}function Ze(e){const t=[{text:e.plainString,label:"Copy this line"}];return null!==e.dgaJson&&void 0!==e.dgaJson&&t.push({text:e.dgaJson,label:"Copy this DGA as JSON"}),t}function Xe(e){const t=e.messageType;if(!g.includes(t))throw new Error(`Invalid messageType: ${t}`);return{messageType:t,strings:e.strings.map(Ue),plainString:e.plainString,options:Ze(e.options)}}function Ye(e){if(!Number.isInteger(e))throw new Error("dim must be an integer");if(e<=0)throw new Error("dim must be positive");return e%2==0?`[\n  ["x", ${e}, "0"],\n  ["y", ${2*e-1}, "x^2"]\n]`:`[\n  ["x", ${e}, "0"]\n]`}function et(e){if(!Number.isInteger(e))throw new Error("dim must be an integer");if(e<=0)throw new Error("dim must be positive");return`[\n  ["c", 2, "0"],\n  ["x", ${2*e+1}, "c^${e+1}"]\n]`}const tt=["S^n","CP^3","7-mfd","arkowitz-lupton"];function rt(e){try{return e()}catch{return}}function nt(e,t){const[r,n]=(0,s.useState)(2);return{json:rt((()=>e(r))),renderSelectItem:t,renderForm:()=>(0,u.jsx)(ye.A,{label:"n",value:r,type:"number",onChange:e=>n(parseInt(e.target.value)),sx:{width:100},size:"small"})}}function st(e){if(void 0===e)return[p("error","Error")];return new Te.FreeDGAWrapper(e).dgaInfo().map(Xe)}function ot(e){const[t,r]=(0,s.useState)(""),n={"S^n":nt(Ye,(()=>(0,u.jsx)(f.A,{math:"S^n"}))),"CP^3":nt(et,(()=>(0,u.jsx)(f.A,{math:"\\mathbb CP^n"}))),"7-mfd":{json:'[\n  ["a", 2, "0"],\n  ["b", 2, "0"],\n  ["x", 3, "a^2"],\n  ["y", 3, "a*b"],\n  ["z", 3, "b^2"]\n]',renderSelectItem:()=>(0,u.jsx)("span",{children:"a 7-manifold"})},"arkowitz-lupton":{json:'[\n  ["x_1", 10, "0"],\n  ["x_2", 12, "0"],\n  ["y_1", 41, "x_1^3 * x_2"],\n  ["y_2", 43, "x_1^2 * x_2^2"],\n  ["y_3", 45, "x_1 * x_2^3"],\n  ["z", 119, "x_2 * (y_1*x_2 - x_1*y_2) * (y_2*x_2 - x_1*y_3) + x_1^12 + x_2^10"]\n]',renderSelectItem:()=>(0,u.jsx)("span",{children:"Arkowitz-Lupton's example"})}},o=""===t?void 0:n[t],a=o?.json;const i="Select an example",l="label-select-dga-example";return{label:"Examples",editor:{getOnSubmit:function(t){return async r=>{void 0!==a&&(e.updateDgaWrapper(a),t())}},beforeOpen:function(){r("")},disableSubmit:function(){return void 0===a},renderContent:e=>(0,u.jsxs)(P.A,{spacing:2,sx:{marginTop:1},children:[(0,u.jsxs)(Ke.A,{children:[(0,u.jsx)(He.A,{id:l,children:i}),(0,u.jsx)(qe.A,{labelId:l,label:i,value:t,onChange:e=>r(e.target.value),sx:{width:300},children:tt.map((e=>(0,u.jsx)(y.A,{value:e,children:n[e].renderSelectItem()},e)))})]}),o?.renderForm?.(),void 0!==o&&(0,u.jsx)(P.A,{children:st(o.json).map(((e,r)=>(0,u.jsx)(S,{styledMessage:e},`${t}-${r}`)))})]})}}}function at(e){let{register:t,errors:r,fieldLabel:n,fieldTestid:o,validate:a,trigger:i}=e;const l=ve(),c=(0,s.useCallback)((()=>l((async()=>await i()),1e3)),[l,i]);return(0,u.jsxs)(P.A,{spacing:2,sx:{marginTop:1},children:[(0,u.jsx)(ye.A,{label:n,multiline:!0,inputProps:{"data-testid":o},...t("text",{validate:a,onChange:c}),error:void 0!==r.text}),(0,u.jsx)(le,{fieldErrorArray:it(r)})]})}function it(e){const t=e.text;return void 0===t?[]:[t]}function lt(e){const t=function(e){let{text:t,setText:r,preventPrompt:n,fieldLabel:s,fieldTestid:o,validate:a}=e;const{register:i,handleSubmit:l,getValues:c,reset:d,trigger:g,formState:{errors:p}}=(0,Be.mN)({mode:"onBlur",reValidateMode:"onBlur",shouldUnregister:!1,defaultValues:{text:t}}),m={register:i,errors:p,trigger:g,fieldLabel:s,fieldTestid:o,validate:a};return{preventQuit:function(){return c().text!==t?n:void 0},getOnSubmit:function(e){return l((t=>{let{text:n}=t;r(n),e()}))},beforeOpen:function(){d({text:t})},disableSubmit:function(){return void 0!==p.text},renderContent:e=>(0,u.jsx)(at,{...m})}}({text:e.json,setText:e.updateDgaWrapper,preventPrompt:"Your JSON is not saved. Are you sure you want to quit?",fieldLabel:"Input your DGA",fieldTestid:"JsonEditorDialog-input-json",validate:ut});return{label:"JSON",editor:t}}function ut(e){const t=(0,Te.validateJson)(e);return"success"===t.type||t.message}const ct=["array","json","example"];function dt(e,t){return{TabDialog:re,...te({array:Qe({json:e,updateDgaWrapper:t}),json:lt({json:e,updateDgaWrapper:t}),example:ot({updateDgaWrapper:t})},ct,"array")}}function gt(e){let{draggableProps:t,index:r,formData:{register:n,errors:o,remove:a,trigger:i}}=e;const l=ve(),c=(0,s.useCallback)((()=>l((async()=>await i()),1e3)),[l,i]);return(0,u.jsxs)(P.A,{spacing:1,children:[(0,u.jsxs)(P.A,{direction:"row",spacing:1,children:[(0,u.jsx)(ye.A,{label:"generator",inputProps:{"data-testid":`IdealEditorItem-input-${r}`},sx:{width:300},size:"small",...n(`generatorArray.${r}.text`,{onChange:c})}),(0,u.jsx)(je.A,{title:"Delete this generator",children:(0,u.jsx)(h.A,{onClick:async()=>{a(r),await i()},size:"small",children:(0,u.jsx)(he.A,{fontSize:"small"})})}),(0,u.jsx)(h.A,{...t,style:{cursor:"grab",touchAction:"none"},children:(0,u.jsx)(be.A,{})})]}),(0,u.jsx)(le,{fieldErrorArray:pt({errors:o,index:r})})]})}function pt(e){let{errors:t,index:r}=e;const n=t.generatorArray?.[r]?.text;return void 0===n?[]:[n]}function mt(e){let{children:t}=e;return(0,u.jsx)(P.A,{spacing:2,children:t})}function ft(e){let{register:t,getValues:r,errors:n,trigger:s,fields:o,append:a,remove:i,move:l,onSubmit:c}=e;const d={register:t,remove:i,errors:n,getValues:r,trigger:s};return(0,u.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),await c(e)},children:[(0,u.jsxs)(P.A,{spacing:2,sx:{marginTop:1},children:[(0,u.jsx)(fe,{RowComponent:gt,Container:mt,fields:o,move:l,formData:d,externalData:{}}),(0,u.jsx)(M.A,{variant:"outlined",onClick:()=>a({text:""}),startIcon:(0,u.jsx)(xe.A,{}),sx:{textTransform:"none"},children:"Add a generator"}),(0,u.jsx)(le,{fieldErrorArray:xt(n)})]}),(0,u.jsx)("button",{hidden:!0,type:"submit"})]})}function xt(e){if(void 0!==e.generatorArray)return[];const t=e._global_errors?.validateGeneratorArray;return void 0===t?[]:[t]}function ht(e){return ke.z.string().nonempty("Please enter the generator.").superRefine((async(t,r)=>{const n=await e(t);"string"==typeof n&&r.addIssue({path:[],code:ke.z.ZodIssueCode.custom,message:n})}))}function bt(e){return ke.z.object({text:ht(e)})}const yt=ke.z.object({validateGeneratorArray:ke.z.null()});function jt(e,t){return function(e,t){return ke.z.object({generatorArray:bt(e).array(),_global_errors:yt.optional()}).superRefine((async(e,r)=>{const n=e.generatorArray.map((e=>e.text)),s=await t(n);"string"==typeof s&&r.addIssue({path:["_global_errors","validateGeneratorArray"],code:ke.z.ZodIssueCode.custom,message:s})}))}(e,t)}function vt(e){return JSON.parse(e).map((e=>({text:e})))}function At(e){const t=e.map((e=>{let{text:t}=e;return t}));return JSON.stringify(t)}function wt(e){let{setIdealJson:t,idealInfo:r,idealJson:n,validateGenerator:o,validateGeneratorArray:a}=e;const{idealEditorPropsExceptOnSubmit:i,getOnSubmit:l,beforeOpen:c,disableSubmit:d,preventQuit:g}=function(e){let{idealJson:t,setIdealJson:r,validateGenerator:n,validateGeneratorArray:o}=e;const{handleSubmit:a,register:i,getValues:l,reset:u,trigger:c,control:d,formState:{errors:g}}=(0,Be.mN)({mode:"onBlur",reValidateMode:"onBlur",criteriaMode:"all",defaultValues:{generatorArray:vt(t)},resolver:(0,Ge.u)(jt(n,o),void 0,{mode:"async"})}),{fields:p,append:m,remove:f,move:x}=(0,Be.jz)({control:d,name:"generatorArray"}),h=(0,s.useCallback)((e=>a((t=>{let{generatorArray:n}=t;r(At(n)),e()}))),[r,a]),b=(0,s.useCallback)((()=>{const e=vt(t);u({generatorArray:e})}),[t,u]);return{idealEditorPropsExceptOnSubmit:{register:i,getValues:l,errors:g,trigger:c,fields:p,append:m,remove:f,move:x},getOnSubmit:h,beforeOpen:b,disableSubmit:(0,s.useCallback)((()=>void 0!==g.generatorArray||void 0!==g._global_errors),[g]),preventQuit:(0,s.useCallback)((()=>At(l().generatorArray)!==t?"Your input is not saved. Are you sure you want to quit?":void 0),[l,t])}}({idealJson:n,setIdealJson:t,validateGenerator:o,validateGeneratorArray:a}),p=(0,s.useMemo)((()=>({getOnSubmit:l,preventQuit:g,disableSubmit:d,beforeOpen:c,renderContent:e=>(0,u.jsx)(ft,{...i,onSubmit:l(e)})})),[i,l,g,d,c]),{editorDialogProps:m,openDialog:f}=B({editor:p});return(0,u.jsxs)("div",{children:[(0,u.jsx)(S,{styledMessage:r}),(0,u.jsx)(M.A,{onClick:f,variant:"contained",sx:{textTransform:"none"},children:"Edit ideal"}),(0,u.jsx)(q,{...m})]})}const Ct={dgaJson:"dgaJson",dgaDsv:"dgaDsv",idealDsv:"idealDsv",taretName:"target"},St={parse:e=>e.split("."),stringify:e=>e.join(".")};function kt(e){const t=JSON.parse(e);if(!function(e){if(!Array.isArray(e))return!1;for(const t of e)if(!Array.isArray(t)||3!==t.length||"string"!=typeof t[0]||"number"!=typeof t[1]||"string"!=typeof t[2]||t[0].includes(".")||t[2].includes("."))return!1;return!0}(t))return null;const r=t.map((e=>{let[t,r,n]=e;return[t,r.toString(),n]})).flat();return St.stringify(r)}function Tt(e){const t=function(e){const t=e.length/3;if(e.length%3!=0)throw new Error(`Invalid data from URL: "${e}"\nIts length must be divisible by 3, but was ${e.length}`);const r=[];for(let n=0;n<t;n++)r.push([e[3*n],parseInt(e[3*n+1]),e[3*n+2]]);return r}(St.parse(e));return JSON.stringify(t)}function Dt(e){const t=JSON.parse(e);return function(e){if(!Array.isArray(e))return!1;for(const t of e)if("string"!=typeof t)return!1;return!0}(t)?St.stringify(t):null}function It(e,t){switch(t){case"json":{const t=function(e){try{const t=JSON.parse(e);return JSON.stringify(t,null,void 0)}catch(t){if(t instanceof SyntaxError)return null;throw t}}(e);return null===t?null:[Ct.dgaJson,t]}case"dsv":{const t=kt(e);return null===t?null:[Ct.dgaDsv,t]}case"auto":{const t=It(e,"dsv");if(null!==t)return t;const r=It(e,"json");return null!==r?r:null}}}var Et=r(6347);function Ot(){const{search:e}=(0,Et.zy)();return(0,s.useMemo)((()=>new URLSearchParams(e)),[e])}function Jt(){const e=Ot();try{const t=function(e){const t=e.get(Ct.dgaJson);if(null!==t)return t;const r=e.get(Ct.dgaDsv);return null!==r?Tt(r):null}(e);return null===t?{type:"unspecified"}:{type:"success",value:Ne(t)}}catch(t){return t instanceof SyntaxError?{type:"error",message:`[Error] Invalid JSON is given as URL parameter.\n${t.message}`}:t instanceof Error?{type:"error",message:t.message}:(console.error(t),{type:"error",message:"[Error] Some error occurred while parsing URL parameter"})}}const Nt=["self","freeLoopSpace","cyclic","derivation","idealQuot"],Pt=["basis","dim"];function _t(e,t,r){return(0,s.useEffect)((()=>{"error"===e.type&&r(e.message)}),[r,e.type,e.message]),"success"===e.type?e.value:t}function Mt(e){const t=e.get(Ct.idealDsv);return null===t||""===t?null:function(e){const t=St.parse(e);return JSON.stringify(t)}(t)}var zt=r(8011),Rt=r(3246);function Vt(e){let{value:t}=e;return null===t?(0,u.jsx)(Rt.A,{size:20}):(0,u.jsx)(Rt.A,{variant:"determinate",value:t,size:20})}function Lt(e,t){return e?null===t?"Computing":`Computing (${t}%)`:"Compute"}function $t(e){let{computing:t,progress:r,message:n,...s}=e;const o=s.disabled??!1,a=null===(i=r)?null:Math.floor(100*i);var i;return(0,u.jsxs)(P.A,{children:[(0,u.jsxs)(M.A,{...s,disabled:o||t,children:[Lt(t,a),t&&(0,u.jsx)(Vt,{value:a})]}),n]})}function Ft(e){let{label:t,value:r,setValue:n,width:s,disabled:o}=e;return(0,u.jsx)(ye.A,{label:t,value:r,type:"number",onChange:e=>n(e.target.value),sx:{width:s},size:"small",disabled:o})}function Wt(e){let{label:t,defaultValue:r,width:n,disabled:o}=e;const[a,i]=(0,s.useState)(r.toString()),l={label:t,value:a,setValue:i,width:void 0!==n?n:70,disabled:void 0!==o&&o};return[parseInt(a),l]}function Gt(e){let{label:t,value:r,setValue:n,width:s,disabled:o}=e;return(0,u.jsx)(ye.A,{label:t,value:r,onChange:e=>n(e.target.value),sx:{width:s},size:"small",disabled:o})}function Bt(e){switch(e){case"self":return"\\Lambda V";case"freeLoopSpace":return"\\Lambda V \\otimes \\Lambda \\overline{V}";case"cyclic":return"\\Lambda u \\otimes\\Lambda V \\otimes \\Lambda \\overline{V}";case"derivation":return"\\mathrm{Der}(\\Lambda V)";case"idealQuot":return"\\Lambda V / I"}}function Qt(e,t){void 0===t&&(t=void 0);return`H^{${void 0!==t?t:"*"}}(${Bt(e)})`}function Kt(e){let{targetName:t,degree:r}=e;return(0,u.jsx)(f.A,{math:Qt(t,r)})}function Ht(e){switch(e){case"self":return"H^*(X)";case"freeLoopSpace":return"H^*(LX)";case"cyclic":return"H^*_{S^1}(LX)";case"derivation":return"\\pi_{-*}(\\mathrm{aut}_1(X))\\otimes\\mathbb{Q}";case"idealQuot":return"H^*(\\Lambda V / I)"}}function qt(e){let{targetName:t}=e;return(0,u.jsx)(f.A,{math:Ht(t)})}function Ut(e){return{computing:"computing"===e.status,workerProgress:"computing"===e.status?e.progress:null,message:"computing"===e.status?e.message:void 0}}function Zt(e){let{targetName:t,postMessageToWorker:r,visible:n,workerInfo:o}=e;const[a,i]=Wt({label:"",defaultValue:0}),[l,c]=Wt({label:"",defaultValue:20}),[d,g]=(0,s.useState)("basis"),p=(0,s.useCallback)((e=>{e.preventDefault();r({command:"computeCohomology",targetName:t,minDegree:a,maxDegree:l,showCohomology:d})}),[t,a,l,d,r]);if(!n)return(0,u.jsx)(s.Fragment,{});const m=er(t,"cohomology"),{computing:x,workerProgress:h}=Ut(o);return(0,u.jsx)("form",{onSubmit:p,"data-testid":"ComputeCohomologyForm",children:(0,u.jsxs)(P.A,{spacing:1,children:[(0,u.jsxs)("span",{children:["Compute cohomology ",(0,u.jsx)(Kt,{targetName:t,degree:"n"})," for"]}),(0,u.jsxs)(P.A,{direction:"row",alignItems:"center",justifyContent:"center",spacing:1,children:[(0,u.jsx)(Ft,{...i}),(0,u.jsx)(f.A,{math:"\\leq n \\leq"}),(0,u.jsx)(Ft,{...c})]}),(0,u.jsx)(z.A,{row:!0,value:d,onChange:e=>g(e.target.value),children:Pt.map((e=>(0,u.jsx)(R.A,{value:e,control:(0,u.jsx)(V.A,{}),label:e},e)))}),(0,u.jsx)($t,{type:"submit",variant:"contained",disabled:!m,computing:x,progress:h}),!m&&(0,u.jsx)(ne.A,{severity:"info",children:"Currently, this type of computation is not supported."})]})})}function Xt(e){let{targetName:t,postMessageToWorker:r,visible:n,workerInfo:o}=e;const a=er(t,"class"),[i,l]=function(e){let{label:t,defaultValue:r,width:n,disabled:o}=e;const[a,i]=(0,s.useState)(r);return[a,{label:t,value:a,setValue:i,width:void 0!==n?n:70,disabled:void 0!==o&&o}]}({label:"",defaultValue:"x^2",width:200,disabled:!a}),[c,d]=(0,s.useState)(!0),g=(0,s.useCallback)((e=>{e.preventDefault();r({command:"computeCohomologyClass",targetName:t,cocycleString:i,showBasis:c})}),[t,i,c,r]);if(!n)return(0,u.jsx)(s.Fragment,{});const{computing:p,workerProgress:m}=Ut(o);return(0,u.jsx)("form",{onSubmit:g,"data-testid":"ComputeClassForm",children:(0,u.jsxs)(P.A,{spacing:1,children:[(0,u.jsxs)("span",{children:["Compute cohomology class ",(0,u.jsx)(f.A,{math:`[\\omega] \\in ${Qt(t)}`})," for"]}),(0,u.jsxs)(P.A,{direction:"row",alignItems:"center",justifyContent:"center",spacing:1,children:[(0,u.jsx)(f.A,{math:"\\omega ="}),(0,u.jsx)(Gt,{...l})]}),(0,u.jsx)(R.A,{control:(0,u.jsx)(zt.A,{}),label:"Show basis",checked:c,onChange:e=>d(e.target.checked)}),(0,u.jsx)($t,{type:"submit",variant:"contained",disabled:!a,computing:p,progress:m}),!a&&(0,u.jsx)(ne.A,{severity:"info",children:"Currently, this type of computation is not supported."})]})})}function Yt(e){let{targetName:t,postMessageToWorker:r,visible:n,workerInfo:o}=e;const[a,i]=Wt({label:"",defaultValue:10}),l=(0,s.useCallback)((e=>{e.preventDefault();r({command:"computeMinimalModel",targetName:t,isomorphismUpTo:a})}),[t,a,r]);if(!n)return(0,u.jsx)(s.Fragment,{});const c=er(t,"minimal"),{computing:d,workerProgress:g,message:p}=Ut(o);return(0,u.jsx)("form",{onSubmit:l,"data-testid":"ComputeMinimalModel",children:(0,u.jsxs)(P.A,{spacing:1,children:[(0,u.jsxs)(P.A,{direction:"row",alignItems:"center",justifyContent:"center",spacing:1,children:["Compute minimal model until degree",(0,u.jsx)(Ft,{...i})]}),(0,u.jsx)($t,{type:"submit",variant:"contained",disabled:!c,computing:d,progress:g,message:p}),!c&&(0,u.jsx)(ne.A,{severity:"info",children:"Currently, this type of computation is not supported."})]})})}function er(e,t){switch(e){case"self":case"cyclic":case"idealQuot":return!0;case"freeLoopSpace":switch(t){case"cohomology":case"class":return!0;case"minimal":return!1}case"derivation":switch(t){case"cohomology":return!0;case"class":case"minimal":return!1}}}function tr(e){let{targetName:t,postMessageToWorker:r,workerInfo:n}=e;const[o,a]=(0,s.useState)("cohomology");return(0,u.jsxs)(s.Fragment,{children:[(0,u.jsxs)(X.A,{value:o,onChange:(e,t)=>{a(t)},children:[(0,u.jsx)(Y.A,{value:"cohomology",label:"Cohomology group",sx:{textTransform:"none"}}),(0,u.jsx)(Y.A,{value:"class",label:"Cohomology class",sx:{textTransform:"none"}}),(0,u.jsx)(Y.A,{value:"minimal",label:"Minimal model",sx:{textTransform:"none"}})]}),(0,u.jsx)(Zt,{targetName:t,postMessageToWorker:r,visible:"cohomology"===o,workerInfo:n}),(0,u.jsx)(Xt,{targetName:t,postMessageToWorker:r,visible:"class"===o,workerInfo:n}),(0,u.jsx)(Yt,{targetName:t,postMessageToWorker:r,visible:"minimal"===o,workerInfo:n})]})}function rr(e){let{setOpen:t}=e;return(0,u.jsx)(M.A,{variant:"contained",size:"small",onClick:()=>t(!0),children:"Restart"})}function nr(e){let{open:t,setOpen:r,restart:n}=e;return(0,u.jsxs)(L.A,{open:t,onClose:()=>r(!1),children:[(0,u.jsx)($.A,{children:"Are you sure to restart the background process (WebWorker)? This will stop the current computation (if exists) and clear the cache."}),(0,u.jsxs)(F.A,{children:[(0,u.jsx)(M.A,{onClick:()=>{n(),r(!1)},variant:"contained",children:"Restart"}),(0,u.jsx)(M.A,{onClick:()=>r(!1),variant:"outlined",children:"Cancel"})]})]})}var sr=r(9030),or=r(797),ar=r(1826);function ir(e){let{setOpen:t}=e;return(0,u.jsx)(M.A,{onClick:()=>t(!0),sx:{textTransform:"none"},variant:"outlined",size:"small",children:"Share this DGA"})}function lr(e){let{text:t}=e;const[r,n]=(0,s.useState)(!1);return(0,u.jsx)(je.A,{title:"Copied",open:r,onClose:()=>n(!1),children:(0,u.jsx)(M.A,{onClick:async()=>{await navigator.clipboard.writeText(t),n(!0)},variant:"contained",size:"small",children:"copy"})})}function ur(e){let{dgaJson:t,idealJson:r,targetName:n}=e;const o=function(e){let{dgaJson:t,format:r,idealJson:n,targetName:s}=e;const o=new URLSearchParams,a=It(t,r);if(null!==a){const[e,t]=a;o.append(e,t)}const i=Dt(n);return null!==i&&""!==i&&o.append(Ct.idealDsv,i),o.append(Ct.taretName,s),o}({dgaJson:t,format:"auto",idealJson:r,targetName:n}),a=`${function(){const e=(0,or.A)();return(0,ar.D)()?window.location.origin:e.siteConfig.url}()}${(0,sr.Ay)("calculator")}?${o.toString()}`;return(0,u.jsxs)(s.Fragment,{children:[(0,u.jsx)(ye.A,{label:"url",value:a,sx:{width:300},size:"small",InputProps:{readOnly:!0},multiline:!0}),(0,u.jsx)(lr,{text:a})]})}function cr(e){let{open:t,setOpen:r,dgaJson:n,idealJson:s,targetName:o}=e;const a=H();return(0,u.jsxs)(L.A,{open:t,onClose:()=>r(!1),PaperProps:{sx:{[a]:{margin:0,width:"calc(100% - 5pt)"}}},children:[(0,u.jsx)($.A,{children:(0,u.jsx)(ur,{dgaJson:n,idealJson:s,targetName:o})}),(0,u.jsx)(F.A,{children:(0,u.jsx)(M.A,{onClick:()=>r(!1),variant:"outlined",children:"Close"})})]})}var dr=r(1278);function gr(e){let{messages:t}=e;const[r,n]=(0,s.useState)(!0);if(0===t.length)return(0,u.jsx)(s.Fragment,{});const o=(e,t)=>{"clickaway"!==t&&n(!1)};return(0,u.jsx)(dr.A,{open:r,anchorOrigin:{vertical:"top",horizontal:"center"},onClose:o,children:(0,u.jsx)(ne.A,{severity:"error",onClose:o,variant:"filled",elevation:6,children:t.map(((e,t)=>(0,u.jsx)("div",{style:{whiteSpace:"pre-wrap"},children:e},t)))})})}var pr=r(8453);function mr(e){const t={p:"p",...(0,pr.R)(),...e.components};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(t.p,{children:'Input a Sullivan algebra from the "Edit DGA" button'}),"\n",(0,u.jsx)(t.p,{children:"This calculator can compute the cohomology of the Sullivan algebra, its Hochschild homology (cohomology of the free loop space), and its cyclic homology (equivariant cohomology of the free loop space)."}),"\n",(0,u.jsx)(t.p,{children:'Note that "u" cannot be used as a generator when "cyclic" is selected, since "u" is reserved for the model of the cyclic homology.'})]})}function fr(e={}){const{wrapper:t}={...(0,pr.R)(),...e.components};return t?(0,u.jsx)(t,{...e,children:(0,u.jsx)(mr,{...e})}):mr(e)}function xr(e){let{setOpen:t}=e;return(0,u.jsx)(M.A,{onClick:()=>t(!0),sx:{textTransform:"none"},variant:"outlined",size:"small",children:"Show usage"})}function hr(e){let{open:t,setOpen:r}=e;return(0,u.jsxs)(L.A,{open:t,onClose:()=>r(!1),children:[(0,u.jsx)($.A,{children:(0,u.jsx)(fr,{})}),(0,u.jsx)(F.A,{children:(0,u.jsx)(M.A,{onClick:()=>r(!1),variant:"outlined",children:"Close"})})]})}const br=function(){const e=(0,s.createContext)(l.default()),t=(0,s.createContext)([void 0,e=>{throw new Error("Not wrapped by provider")}]),r=function(e,t){return r=>{const n="defaultState"in r?r.defaultState:{};return(0,u.jsx)(c,{context:e,stateContext:t,createWorker:r.createWorker,defaultState:n,children:r.children})}}(e,t);return{reactContext:e,stateContext:t,Provider:r}}();function yr(e){let{children:t,"data-testid":r}=e;return(0,u.jsx)("span",{"data-testid":r,children:(0,u.jsx)(N.A,{disableGutters:!0,sx:{paddingLeft:1,paddingRight:1},children:t})})}function jr(){const{array:e,push:t}=function(){const[e,t]=(0,s.useState)([]);return{array:e,push:(0,s.useCallback)((e=>{t((t=>[...t,e]))}),[t])}}(),r=_t(Jt(),Ye(2),t),n=_t(function(){const e=Ot();try{const t=Mt(e);return null===t?{type:"unspecified"}:{type:"success",value:t}}catch(t){return t instanceof Error?{type:"error",message:t.message}:(console.error(t),{type:"error",message:"[Error] Some error occurred while parsing URL parameter"})}}(),"[]",t),o=_t(function(){const e=Ot().get(Ct.taretName);return null===e?{type:"unspecified"}:Nt.includes(e)?{type:"success",value:e}:{type:"error",message:`Invalid target name: ${e}`}}(),"self",t),{json:i,setJson:l,idealJson:c,setIdealJson:d,dgaInfo:g,idealInfo:p,workerInfo:m,postMessage:x,restart:h,runAsync:b}=function(e){let{defaultJson:t,defaultIdealJson:r,onmessage:n}=e;const{postMessage:o,addListener:i,addRestartListener:l,restart:u,state:{json:c,dgaInfo:d,idealJson:g,idealInfo:p,workerInfo:m},runAsync:f}=a(br),x=(0,s.useCallback)((e=>{o({command:"updateJson",json:e})}),[o]),h=(0,s.useCallback)((e=>{o({command:"updateIdealJson",idealJson:e})}),[o]);return(0,s.useEffect)((()=>{i("useKohomologyWorker",n)}),[i,n]),(0,s.useEffect)((()=>{l("useKohomologyWorker",(()=>{x(c)}))}),[l,x,c]),(0,s.useEffect)((()=>{x(t),h(r)}),[x,t,h,r]),{json:c,setJson:x,idealJson:g,setIdealJson:h,dgaInfo:d,idealInfo:p,workerInfo:m,postMessage:o,restart:u,runAsync:f}}({defaultJson:r,defaultIdealJson:n,onmessage:e=>{}}),[y,j]=(0,s.useState)(o),{usageDialogProps:v,usageButtonProps:A}=function(){const[e,t]=(0,s.useState)(!1);return{usageDialogProps:{open:e,setOpen:t},usageButtonProps:{setOpen:t}}}(),{restartDialogProps:w,restartButtonProps:C}=function(e){const[t,r]=(0,s.useState)(!1);return{restartDialogProps:{open:t,setOpen:r,restart:e},restartButtonProps:{setOpen:r}}}((()=>{h()})),{shareDGADialogProps:k,shareDGAButtonProps:T}=function(e){let{dgaJson:t,idealJson:r,targetName:n}=e;const[o,a]=(0,s.useState)(!1);return{shareDGADialogProps:{open:o,setOpen:a,dgaJson:t,idealJson:r,targetName:n},shareDGAButtonProps:{setOpen:a}}}({dgaJson:i,idealJson:c,targetName:y}),{TabDialog:D,tabDialogProps:I,openDialog:E}=dt(i,l),O=(0,s.useCallback)((async e=>await b("validateIdealGenerator",[e])),[b]),J=(0,s.useCallback)((async e=>await b("validateIdealGeneratorArray",[e])),[b]);return(0,u.jsxs)(s.Fragment,{children:[(0,u.jsx)(gr,{messages:e}),(0,u.jsxs)(P.A,{direction:"column",spacing:2,divider:(0,u.jsx)(_.A,{orientation:"horizontal"}),sx:{width:400,margin:1},children:[(0,u.jsx)(yr,{children:(0,u.jsxs)(P.A,{direction:"row",spacing:2,children:[(0,u.jsx)(xr,{...A}),(0,u.jsx)(hr,{...v}),(0,u.jsx)(rr,{...C}),(0,u.jsx)(nr,{...w})]})}),(0,u.jsxs)(yr,{"data-testid":"CalculatorForm-StackItem-DGA",children:["Input a Sullivan model of a space ",(0,u.jsx)(f.A,{math:"X"}),":",(0,u.jsx)("div",{"data-testid":"CalculatorForm-dga-info","data-dga-json":i,children:g.map(((e,t)=>(0,u.jsx)(S,{styledMessage:e},t)))}),(0,u.jsxs)(P.A,{direction:"row",spacing:2,sx:{marginTop:.5},children:[(0,u.jsx)(M.A,{variant:"contained",size:"small",onClick:E,sx:{textTransform:"none"},children:"Edit DGA"}),(0,u.jsx)(D,{...I}),(0,u.jsx)(ir,{...T}),(0,u.jsx)(cr,{...k})]})]}),(0,u.jsxs)(yr,{"data-testid":"CalculatorForm-StackItem-SelectTarget",children:[(0,u.jsx)(z.A,{row:!0,value:y,onChange:e=>j(e.target.value),children:Nt.map((e=>(0,u.jsx)(R.A,{value:e,control:(0,u.jsx)(V.A,{size:"small"}),label:(0,u.jsx)(qt,{targetName:e})},e)))}),(0,u.jsx)(f.A,{math:`\\cong ${Qt(y)}`}),"idealQuot"===y&&(0,u.jsx)(wt,{setIdealJson:d,idealInfo:p,idealJson:c,validateGenerator:O,validateGeneratorArray:J})]}),(0,u.jsx)(yr,{children:(0,u.jsx)(tr,{targetName:y,postMessageToWorker:e=>{x(e)},workerInfo:m})})]})]})}var vr=r(8532),Ar=r(467);function wr(){const e=function(){const{colorMode:e}=(0,vr.G)();return(0,s.useMemo)((()=>(0,Ar.A)({palette:{mode:e,primary:{main:"#7e6ca8"}}})),[e])}();return(0,u.jsx)(E.A,{theme:e,children:(0,u.jsx)(O.A,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"center",paddingTop:"10px",paddingBottom:"10px"},children:(0,u.jsxs)(br.Provider,{createWorker:()=>new J,defaultState:{json:"[]",idealJson:"[]",dgaInfo:[],idealInfo:p("success",""),workerInfo:{status:"idle"}},children:[(0,u.jsx)(jr,{}),(0,u.jsx)(D,{context:br})]})})})}function Cr(){return(0,u.jsx)(I.A,{fallback:(0,u.jsx)("div",{children:"Loading..."}),children:()=>(0,u.jsx)(wr,{})})}function Sr(){return(0,u.jsx)(n.A,{title:"Calculator",children:(0,u.jsx)(Cr,{})})}}}]);