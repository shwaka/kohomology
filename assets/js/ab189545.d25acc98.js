"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[842],{4941:(e,r,t)=>{t.r(r),t.d(r,{default:()=>mt});var n=t(2954),s=t(6540),o=t(5363),a=t(5916),i=t(7733);function l(){return new Worker(t.p+"assets/js/kohomology.worker.f6d2e60a.worker.js")}var c=t(2259),u=t(6132),d=t(2007),g=t(1543),p=t(7512),m=t(8228),f=t(6071),h=t(1303),x=t(3051),j=t(6831),b=t(5611),v=t(6786),y=t(8968),A=t(5993),w=t(4675);function C(){return(0,w.A)().breakpoints.down("sm")}var k=t(4848);function S(e){let{currentTabKey:r,tabKeyForPanel:t,children:n}=e;return(0,k.jsx)("div",{hidden:r!==t,children:n})}function D(e){let{tabItems:r,tabKeys:t,currentTabKey:n,handleChangeTabKey:s,submit:o,tryToQuit:a,open:i,closeDialog:l}=e;const c=C();return(0,k.jsxs)(x.A,{open:i,onClose:a,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{[c]:{margin:0,width:"calc(100% - 5pt)"}}},children:[(0,k.jsx)(j.A,{children:(0,k.jsx)(b.A,{value:n,onChange:(e,r)=>s(r),children:t.map((e=>(0,k.jsx)(v.A,{value:e,label:r[e].label,sx:{textTransform:"none"}},e)))})}),(0,k.jsx)(y.A,{sx:{[c]:{padding:1}},children:t.map((e=>(0,k.jsx)(S,{currentTabKey:n,tabKeyForPanel:e,children:r[e].render(l)},e)))}),(0,k.jsxs)(A.A,{children:[(0,k.jsx)(p.A,{onClick:o,variant:"contained",disabled:r[n].disableSubmit?.(),children:"Apply"}),(0,k.jsx)(p.A,{onClick:a,variant:"outlined",children:"Cancel"})]})]})}var I=t(2790),T=t(8831),J=t(3627),E=t(4979);function N(e){let{id:r,RowComponent:t,index:n,formData:s,externalData:o}=e;const{attributes:a,listeners:i,setNodeRef:l,transform:c,transition:u}=(0,J.gl)({id:r}),d={transform:E.Ks.Transform.toString(c),transition:u},g={draggableProps:{...a,...i},index:n,formData:s,externalData:o};return(0,k.jsx)("div",{ref:l,style:d,children:(0,k.jsx)(t,{...g})})}function P(e){let{fields:r,move:t,formData:n,RowComponent:s,Container:o,externalData:a}=e;const i=(0,I.FR)((0,I.MS)(I.AN),(0,I.MS)(I.uN,{coordinateGetter:J.JR})),{trigger:l}=n;return(0,k.jsx)(o,{children:(0,k.jsx)(I.Mp,{sensors:i,collisionDetection:I.fp,onDragEnd:function(e){let{active:n,over:s}=e;if(null===s)throw new Error("over is null");if(n.id!==s.id){console.log(`replace: ${n.id}, ${s.id}`);const e=r.map((e=>e.id)).indexOf(n.id),o=r.map((e=>e.id)).indexOf(s.id);t(e,o)}l()},modifiers:[T.gj],children:(0,k.jsx)(J.gB,{items:r,strategy:J._G,children:r.map(((e,r)=>(0,k.jsx)(N,{id:e.id,index:r,formData:n,RowComponent:s,externalData:a},e.id)))})})})}var M=t(9682),O=t(7110),_=t(3178),z=t(3581),V=t(1922),$=t(4671),R=t(4660);function G(){const e=(0,s.useRef)(null);return(0,s.useCallback)(((r,t)=>{null!==e.current&&clearTimeout(e.current);const n=setTimeout(r,t);e.current=n}),[])}var L=t(8486),W=t(1987),F=t(4921);function B(e){return Q(JSON.parse(e))}function Q(e){return`[\n${e.map((e=>`  ["${e[0]}", ${e[1]}, "${e[2]}"]`)).join(",\n")}\n]`}function K(e){return Q(e.map((e=>{let{name:r,degree:t,differentialValue:n}=e;return[r,isNaN(t)?1:t,n]})))}function H(e){return JSON.parse(e).map((e=>{let[r,t,n]=e;return{name:r,degree:t,differentialValue:n}}))}const q="_HIDE_THIS_ERROR_";function U(e){let{fieldErrors:r,showAllErrors:t=!1}=e;const n=t?function(e){let{fieldErrors:r}=e;return r.flatMap((e=>{const r=e.types;return void 0===r?[]:Object.entries(r).map((e=>{let[r,t]=e;return{errorType:r,message:t}}))}))}({fieldErrors:r}):function(e){let{fieldErrors:r}=e;return r.flatMap((e=>{const r=e.message;if(void 0===r)return[];return[{errorType:"",message:r}]}))}({fieldErrors:r});return(0,k.jsx)(R.N,{mode:"sync",children:n.map((e=>{let{message:r,errorType:t}=e;if(void 0!==r&&r!==q)return(0,k.jsx)(W.P.div,{...X,children:(0,k.jsx)(L.A,{severity:"error",sx:{whiteSpace:"pre-wrap"},children:r})},`motion-${t}-${r}`)}))})}const X={initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},style:{overflow:"hidden",color:"red",marginTop:4}};function Y(e){let{draggableProps:r,index:t,formData:{register:n,errors:o,remove:a,getValues:i,trigger:l}}=e;const c=i().generatorArray[t].name,u=G(),g=(0,s.useCallback)((()=>u((async()=>await l()),1e3)),[u,l]);return(0,k.jsx)("div",{"data-testid":"ArrayEditor-row",children:(0,k.jsxs)(d.A,{spacing:1,children:[(0,k.jsxs)(d.A,{direction:"row",spacing:1,children:[(0,k.jsx)(z.A,{label:"generator",sx:{width:90},size:"small",...n(`generatorArray.${t}.name`,{onChange:g}),onBlur:()=>l(),error:re({errors:o,index:t,key:"name"}),inputProps:{"data-testid":"ArrayEditor-input-name"}}),(0,k.jsx)(z.A,{label:`deg(${c})`,type:"number",sx:{width:80},size:"small",...n(`generatorArray.${t}.degree`,{valueAsNumber:!0,onChange:g}),onBlur:()=>l(),error:re({errors:o,index:t,key:"degree"})||te({errors:o}),inputProps:{"data-testid":"ArrayEditor-input-degree"}}),(0,k.jsx)(z.A,{label:`d(${c})`,sx:{width:200},size:"small",...n(`generatorArray.${t}.differentialValue`,{onChange:g}),onBlur:()=>l(),error:re({errors:o,index:t,key:"differentialValue"}),inputProps:{"data-testid":"ArrayEditor-input-differentialValue"}}),(0,k.jsx)(V.A,{title:"Delete this generator",children:(0,k.jsx)($.A,{onClick:()=>{a(t),l()},size:"small",children:(0,k.jsx)(O.A,{fontSize:"small"})})}),(0,k.jsx)($.A,{...r,style:{cursor:"grab",touchAction:"none"},children:(0,k.jsx)(_.A,{})})]}),(0,k.jsx)(Z,{errors:o,index:t})]})})}function Z(e){let{errors:r,index:t}=e;const n=r.generatorArray?.[t];return(0,k.jsx)(ee,{error:n})}function ee(e){let{error:r}=e;const t=function(e){let{error:r}=e;if(void 0===r)return[];return["name","degree","differentialValue"].flatMap((e=>{const t=r[e];return void 0===t?[]:[t]}))}({error:r});return(0,k.jsx)(R.N,{mode:"sync",children:(0,k.jsx)(U,{fieldErrors:t})})}function re(e){let{errors:r,index:t,key:n}=e;const s=r.generatorArray?.[t]?.[n];return void 0!==s}function te(e){let{errors:r}=e;return void 0!==r._global_errors?.generatorDegrees}var ne=t(4476);const se=ne.z.string().min(1,"Please enter the name.").superRefine(((e,r)=>{const t=(0,F.validateGeneratorName)(e);switch(t.type){case"success":return;case"error":return void r.addIssue({code:ne.z.ZodIssueCode.custom,message:t.message});default:throw new Error("This can't happen!")}})),oe=(ae="Please enter the degree.",ne.z.preprocess((e=>{if(!Number.isNaN(e))return e}),ne.z.number({required_error:ae}))).refine((e=>0!==e),"The degree cannot be 0.");var ae;const ie=ne.z.string().min(1,"Please enter the value of the differential."),le=ne.z.object({name:se,degree:oe,differentialValue:ie}),ce=ne.z.array(le).superRefine(((e,r)=>{!function(e,r){e.forEach(((t,n)=>{const s=function(e,r,t){if(e[r].differentialValue!==t)throw new Error("generatorArray[index] and value do not match.");const n=K(e.slice(0,r+1)),s=(0,F.validateDifferentialValueOfTheLast)(n);switch(s.type){case"success":case"N/A":return!0;default:return s.message}}(e,n,t.differentialValue);"string"==typeof s&&r.addIssue({path:[n,"differentialValue"],code:ne.z.ZodIssueCode.custom,message:s})}))}(e,r)})),ue=ne.z.object({generatorDegrees:ne.z.null(),generatorNames:ne.z.null()}),de=ne.z.object({generatorArray:ce,_global_errors:ue.optional()}).superRefine(((e,r)=>{!function(e,r){const t=function(e){const r=e.filter((e=>e.degree>0)).length,t=e.filter((e=>e.degree<0)).length;return!(r>0&&t>0)||"Cannot mix generators of positive and negative degrees."}(e);"string"==typeof t&&r.addIssue({path:["_global_errors","generatorDegrees"],code:ne.z.ZodIssueCode.custom,message:t})}(e.generatorArray,r),function(e,r){const t=function(e){const r=e.map((e=>e.name)),t=new Map;return r.forEach(((e,n)=>{const s=r.indexOf(e);s!==n&&(t.set(n,`Generator names must be unique, but ${e} is already used.`),t.set(s,q))})),t}(e);t.forEach(((e,t)=>{r.addIssue({path:["generatorArray",t,"name"],code:ne.z.ZodIssueCode.custom,message:e})}))}(e.generatorArray,r)}));function ge(e){let{register:r,errors:t,fields:n,append:s,remove:o,getValues:a,trigger:i,move:l,submit:c}=e;const u={register:r,remove:o,errors:t,getValues:a,trigger:i};return(0,k.jsxs)("form",{onSubmit:e=>{e.preventDefault(),c()},children:[(0,k.jsxs)(d.A,{spacing:2,sx:{marginTop:1},children:[(0,k.jsx)(P,{RowComponent:Y,Container:fe,externalData:void 0,fields:n,move:l,formData:u}),(0,k.jsx)(p.A,{variant:"outlined",onClick:()=>s({name:pe(a().generatorArray),degree:1,differentialValue:"0"}),startIcon:(0,k.jsx)(M.A,{}),sx:{textTransform:"none"},children:"Add a generator"}),me(t)]}),(0,k.jsx)("button",{hidden:!0,type:"submit"})]})}function pe(e){const r=e.map((e=>e.name)),t="xyzuvwabc".split("");for(const n of t)if(!r.includes(n))return n;return""}function me(e){const r=function(e){let{errors:r}=e;const t=r._global_errors;if(void 0===t)return[];return Object.keys(ue.shape).flatMap((e=>{const r=t[e];return void 0===r?[]:[r]}))}({errors:e});return(0,k.jsx)(U,{fieldErrors:r})}function fe(e){let{children:r}=e;return(0,k.jsx)(d.A,{spacing:2,children:r})}var he=t(8871),xe=t(9785);function je(e){const{arrayEditorPropsExceptSubmit:r,...t}=function(e){const r={generatorArray:H(e.json)},{handleSubmit:t,register:n,getValues:s,reset:o,trigger:a,control:i,formState:{errors:l}}=(0,xe.mN)({mode:"onBlur",reValidateMode:"onBlur",criteriaMode:"all",defaultValues:r,resolver:(0,he.u)(de)}),{fields:c,append:u,remove:d,move:g}=(0,xe.jz)({control:i,name:"generatorArray"});return{label:"Array",onSubmit:function(r){t((t=>{let{generatorArray:n}=t;e.updateDgaWrapper(K(n)),r()}))()},beforeOpen:function(){const r=H(e.json);o({generatorArray:r})},preventQuit:function(){return K(s().generatorArray)!==e.json?"Your input is not saved. Are you sure you want to quit?":void 0},disableSubmit:function(){return void 0!==l.generatorArray},arrayEditorPropsExceptSubmit:{register:n,errors:l,fields:c,append:u,remove:d,getValues:s,trigger:a,move:g}}}(e);return{...t,render:e=>(0,k.jsx)(ge,{submit:()=>t.onSubmit(e),...r})}}var be=t(1729),ve=t(8440),ye=t(9368),Ae=t(421),we=t(5044),Ce=t(6978);function ke(e){let{containerClass:r,handleClick:t,handleClose:n,open:o,anchorEl:a,options:i}=e;return(0,k.jsxs)(s.Fragment,{children:[(0,k.jsx)($.A,{size:"small",onClick:t,sx:{paddingTop:0,paddingBottom:0,position:"absolute",bottom:"4px",right:0,visibility:"hidden",[`.${r}:hover &`]:{visibility:"visible"}},children:(0,k.jsx)(we.A,{fontSize:"small"})}),(0,k.jsxs)(Ce.A,{anchorEl:a,open:o,onClose:n,children:[(0,k.jsx)(Se,{text:i.plainString,label:"Copy this line",handleClose:n}),(0,k.jsx)(Se,{text:i.dgaJson,label:"Copy this DGA as JSON",handleClose:n})]})]})}function Se(e){let{text:r,label:t,handleClose:n}=e;return(0,k.jsx)(Ae.A,{onClick:()=>{null!==r&&(navigator.clipboard.writeText(r),console.log("Copied:",r)),n()},disabled:null===r,children:t})}function De(e){let{content:r}=e;const t=r.split("\n");return(0,k.jsx)("span",{children:t.map(((e,r)=>r<t.length-1?(0,k.jsxs)(s.Fragment,{children:[e,(0,k.jsx)("br",{})]},r):(0,k.jsx)(s.Fragment,{children:e},r)))})}function Ie(e){let{styledString:r}=e;const t={"\\deg":"|#1|"};switch(r.stringType){case"text":return(0,k.jsx)(De,{content:r.content});case"math":return(0,k.jsx)(c.A,{math:r.content,settings:{output:"html",macros:t}})}}function Te(e,r){if(r)return{background:"aquamarine"};switch(e){case"success":return{};case"error":return{background:"peachpuff"}}}function Je(e){let{styledMessage:r}=e;const t="show-styled-message",{optionsButtonProps:n,open:o}=function(e,r){const[t,n]=(0,s.useState)(null),o=Boolean(t);return{optionsButtonProps:{containerClass:e,handleClick:e=>{n(e.currentTarget)},handleClose:()=>{n(null)},open:o,anchorEl:t,options:r},open:o}}(t,r.options);return(0,k.jsxs)("div",{className:t,"data-styled-message":r.plainString,style:{...Te(r.messageType,o),borderBottom:"1px solid lightGray",position:"relative"},children:[r.strings.map(((e,r)=>(0,k.jsx)(Ie,{styledString:e},r))),(0,k.jsx)(ke,{...n})]})}const Ee=["text","math"],Ne=["success","error"];function Pe(e,r){return{messageType:e,strings:[{stringType:"text",content:r}],plainString:r,options:{dgaJson:null,plainString:r}}}function Me(e){const r=e.stringType;if(!Ee.includes(r))throw new Error(`Invalid stringType: ${r}`);return{stringType:r,content:e.content}}function Oe(e){const r=e.messageType;if(!Ne.includes(r))throw new Error(`Invalid messageType: ${r}`);return{messageType:r,strings:e.strings.map(Me),plainString:e.plainString,options:(t=e.options,{dgaJson:t.dgaJson??null,plainString:t.plainString})};var t}function _e(e){if(!Number.isInteger(e))throw new Error("dim must be an integer");if(e<=0)throw new Error("dim must be positive");return e%2==0?`[\n  ["x", ${e}, "0"],\n  ["y", ${2*e-1}, "x^2"]\n]`:`[\n  ["x", ${e}, "0"]\n]`}function ze(e){if(!Number.isInteger(e))throw new Error("dim must be an integer");if(e<=0)throw new Error("dim must be positive");return`[\n  ["c", 2, "0"],\n  ["x", ${2*e+1}, "c^${e+1}"]\n]`}const Ve=["S^n","CP^3","7-mfd","arkowitz-lupton"];function $e(e){try{return e()}catch(r){return}}function Re(e,r){const[t,n]=(0,s.useState)(2);return{json:$e((()=>e(t))),renderSelectItem:r,renderForm:()=>(0,k.jsx)(z.A,{label:"n",value:t,type:"number",onChange:e=>n(parseInt(e.target.value)),sx:{width:100},size:"small"})}}function Ge(e){if(void 0===e)return[Pe("error","Error")];return new F.FreeDGAWrapper(e).dgaInfo().map(Oe)}function Le(e){const[r,t]=(0,s.useState)(""),n={"S^n":Re(_e,(()=>(0,k.jsx)(c.A,{math:"S^n"}))),"CP^3":Re(ze,(()=>(0,k.jsx)(c.A,{math:"\\mathbb CP^n"}))),"7-mfd":{json:'[\n  ["a", 2, "0"],\n  ["b", 2, "0"],\n  ["x", 3, "a^2"],\n  ["y", 3, "a*b"],\n  ["z", 3, "b^2"]\n]',renderSelectItem:()=>(0,k.jsx)("span",{children:"a 7-manifold"})},"arkowitz-lupton":{json:'[\n  ["x_1", 10, "0"],\n  ["x_2", 12, "0"],\n  ["y_1", 41, "x_1^3 * x_2"],\n  ["y_2", 43, "x_1^2 * x_2^2"],\n  ["y_3", 45, "x_1 * x_2^3"],\n  ["z", 119, "x_2 * (y_1*x_2 - x_1*y_2) * (y_2*x_2 - x_1*y_3) + x_1^12 + x_2^10"]\n]',renderSelectItem:()=>(0,k.jsx)("span",{children:"Arkowitz-Lupton's example"})}},o=""===r?void 0:n[r],a=o?.json;const i="Select an example",l="label-select-dga-example";return{label:"Examples",onSubmit:function(r){void 0!==a&&(e.updateDgaWrapper(a),r())},beforeOpen:function(){t("")},disableSubmit:function(){return void 0===a},render:e=>(0,k.jsxs)(d.A,{spacing:2,sx:{marginTop:1},children:[(0,k.jsxs)(be.A,{children:[(0,k.jsx)(ve.A,{id:l,children:i}),(0,k.jsx)(ye.A,{labelId:l,label:i,value:r,onChange:e=>t(e.target.value),sx:{width:300},children:Ve.map((e=>(0,k.jsx)(Ae.A,{value:e,children:n[e].renderSelectItem()},e)))})]}),o?.renderForm?.(),void 0!==o&&(0,k.jsx)(d.A,{children:Ge(o.json).map(((e,t)=>(0,k.jsx)(Je,{styledMessage:e},`${r}-${t}`)))})]})}}function We(e){const{register:r,handleSubmit:t,getValues:n,reset:s,formState:{errors:o}}=(0,xe.mN)({mode:"onBlur",reValidateMode:"onBlur",shouldUnregister:!1,defaultValues:{json:e.json}});const a={register:r,errors:o};return{label:"JSON",preventQuit:function(){return n().json!==e.json?"Your JSON is not saved. Are you sure you want to quit?":void 0},onSubmit:function(r){t((t=>{let{json:n}=t;e.updateDgaWrapper(n),r()}))()},beforeOpen:function(){s({json:e.json})},disableSubmit:function(){return void 0!==o.json},render:e=>(0,k.jsx)(Be,{...a})}}function Fe(e){const r=(0,F.validateJson)(e);return"success"===r.type||r.message}function Be(e){let{register:r,errors:t}=e;return(0,k.jsxs)(d.A,{spacing:2,sx:{marginTop:1},children:[(0,k.jsx)(z.A,{label:"Input your DGA",multiline:!0,inputProps:{"data-testid":"JsonEditorDialog-input-json"},...r("json",{validate:Fe}),error:void 0!==t.json}),void 0!==t.json&&(0,k.jsx)(L.A,{severity:"error",children:t.json.message})]})}const Qe=["array","json","example"];function Ke(e,r){const t=function(e,r,t){const[n,o]=(0,s.useState)(!1),[a,i]=(0,s.useState)(t),l=e[a],c=()=>o(!1);function u(){if(void 0===l.preventQuit)return!0;const e=l.preventQuit();return void 0===e||window.confirm(e)}return{tabDialogProps:{tabItems:e,tabKeys:r,currentTabKey:a,handleChangeTabKey:function(r){u()&&(i(r),e[r].beforeOpen?.())},tryToQuit:function(){u()&&(l.onQuit?.(),o(!1))},submit:function(){l.onSubmit(c)},open:n,closeDialog:c},openDialog:function(){l.beforeOpen?.(),o(!0)}}}({array:je({json:e,updateDgaWrapper:r}),json:We({json:e,updateDgaWrapper:r}),example:Le({updateDgaWrapper:r})},Qe,"array");return{TabDialog:D,...t}}function He(e){let{errors:r,index:t}=e;const n=r.generatorArray?.[t];if(void 0===n)return;const s=n.text?.message;return void 0!==s?(0,k.jsx)(L.A,{severity:"error",sx:{whiteSpace:"pre-wrap"},children:s}):void 0}function qe(e){let{draggableProps:r,index:t,formData:{register:n,errors:o,remove:a,trigger:i},externalData:{validateGenerator:l}}=e;const c=G(),u=(0,s.useCallback)((()=>c((async()=>await i()),1e3)),[c,i]);return(0,k.jsxs)(d.A,{spacing:1,children:[(0,k.jsxs)(d.A,{direction:"row",spacing:1,children:[(0,k.jsx)(z.A,{label:"generator",sx:{width:300},size:"small",...n(`generatorArray.${t}.text`,{required:"Please enter the generator.",validate:l,onChange:u})}),(0,k.jsx)(V.A,{title:"Delete this generator",children:(0,k.jsx)($.A,{onClick:()=>{a(t),i()},size:"small",children:(0,k.jsx)(O.A,{fontSize:"small"})})}),(0,k.jsx)($.A,{...r,style:{cursor:"grab",touchAction:"none"},children:(0,k.jsx)(_.A,{})})]}),He({errors:o,index:t})]})}function Ue(e){return JSON.parse(e).map((e=>({text:e})))}function Xe(e){const r=e.map((e=>{let{text:r}=e;return r}));return JSON.stringify(r)}function Ye(e){let{children:r}=e;return(0,k.jsx)(d.A,{spacing:2,children:r})}function Ze(e){if(void 0!==e.generatorArray)return;const r=e.dummy;if(void 0===r)return;const t=r.types;return void 0!==t?(0,k.jsx)(s.Fragment,{children:Object.entries(t).map((e=>{let[r,t]=e;return(0,k.jsx)(L.A,{severity:"error",children:t},r)}))}):void 0}function er(e){let{register:r,getValues:t,errors:n,trigger:s,control:o,validateGenerator:a,validateGeneratorArray:i}=e;const{fields:l,append:c,remove:u,move:g}=(0,xe.jz)({control:o,name:"generatorArray"}),m={register:r,remove:u,errors:n,getValues:t,trigger:s},f={validateGenerator:a};return(0,k.jsx)("div",{children:(0,k.jsxs)(d.A,{spacing:2,sx:{marginTop:1},children:[(0,k.jsx)(P,{RowComponent:qe,Container:Ye,fields:l,move:g,formData:m,externalData:f}),(0,k.jsx)(p.A,{variant:"outlined",onClick:()=>c({text:""}),startIcon:(0,k.jsx)(M.A,{}),sx:{textTransform:"none"},children:"Add a generator"}),(0,k.jsx)("input",{hidden:!0,value:"dummy",...r("dummy",{validate:e=>{const r=t().generatorArray.map((e=>e.text));return i(r)}})}),Ze(n)]})})}function rr(e){let{idealJson:r,setIdealJson:t,validateGenerator:n,validateGeneratorArray:o}=e;const[a,i]=(0,s.useState)(!1),{idealEditorProps:l,getOnSubmit:c,beforeOpen:u,disableSubmit:d,preventQuit:g}=function(e){let{idealJson:r,setIdealJson:t,validateGenerator:n,validateGeneratorArray:o}=e;const{handleSubmit:a,register:i,getValues:l,reset:c,trigger:u,control:d,formState:{errors:g}}=(0,xe.mN)({mode:"onBlur",reValidateMode:"onBlur",criteriaMode:"all",defaultValues:{generatorArray:Ue(r)}}),p=(0,s.useCallback)((e=>{a((r=>{let{generatorArray:n}=r;t(Xe(n)),e()}))()}),[t,a]),m=(0,s.useCallback)((()=>{const e=Ue(r);c({generatorArray:e})}),[r,c]);return{idealEditorProps:{register:i,getValues:l,errors:g,trigger:u,control:d,validateGenerator:n,validateGeneratorArray:o},getOnSubmit:p,beforeOpen:m,disableSubmit:(0,s.useCallback)((()=>void 0!==g.generatorArray||void 0!==g.dummy),[g]),preventQuit:(0,s.useCallback)((()=>Xe(l().generatorArray)!==r?"Your input is not saved. Are you sure you want to quit?":void 0),[l,r])}}({idealJson:r,setIdealJson:t,validateGenerator:n,validateGeneratorArray:o}),p=(0,s.useCallback)((()=>{u(),i(!0)}),[i,u]),m=(0,s.useCallback)((()=>{i(!1)}),[i]),f=(0,s.useCallback)((()=>{c(m)}),[c,m]),h=(0,s.useCallback)((()=>{const e=g();return void 0===e||window.confirm(e)}),[g]),x=(0,s.useCallback)((()=>{h()&&m()}),[h,m]);return{openDialog:p,idealEditorDialogProps:(0,s.useMemo)((()=>({open:a,onSubmit:f,tryToQuit:x,idealEditorProps:l,disableSubmit:d})),[a,f,x,l,d])}}function tr(e){let{open:r,onSubmit:t,tryToQuit:n,idealEditorProps:s,disableSubmit:o}=e;const a=C();return(0,k.jsxs)(x.A,{open:r,onClose:n,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{[a]:{margin:0,width:"calc(100% - 5pt)"}}},children:[(0,k.jsx)(y.A,{children:(0,k.jsx)(er,{...s})}),(0,k.jsxs)(A.A,{children:[(0,k.jsx)(p.A,{onClick:t,variant:"contained",sx:{textTransform:"none"},disabled:o(),children:"Apply"}),(0,k.jsx)(p.A,{onClick:n,variant:"outlined",children:"Cancel"})]})]})}function nr(e){let{setIdealJson:r,idealInfo:t,idealJson:n,validateGenerator:s,validateGeneratorArray:o}=e;const{openDialog:a,idealEditorDialogProps:i}=rr({setIdealJson:r,idealJson:n,validateGenerator:s,validateGeneratorArray:o});return(0,k.jsxs)("div",{children:[(0,k.jsx)(Je,{styledMessage:t}),(0,k.jsx)(p.A,{onClick:a,variant:"contained",sx:{textTransform:"none"},children:"Edit ideal"}),(0,k.jsx)(tr,{...i})]})}const sr={dgaJson:"dgaJson",dgaDsv:"dgaDsv",idealDsv:"idealDsv",taretName:"target"},or={parse:e=>e.split("."),stringify:e=>e.join(".")};function ar(e){const r=JSON.parse(e);if(!function(e){if(!Array.isArray(e))return!1;for(const r of e)if(!Array.isArray(r)||3!==r.length||"string"!=typeof r[0]||"number"!=typeof r[1]||"string"!=typeof r[2]||r[0].includes(".")||r[2].includes("."))return!1;return!0}(r))return null;const t=r.map((e=>{let[r,t,n]=e;return[r,t.toString(),n]})).flat();return or.stringify(t)}function ir(e){const r=function(e){const r=e.length/3;if(e.length%3!=0)throw new Error(`Invalid data from URL: "${e}"\nIts length must be divisible by 3, but was ${e.length}`);const t=[];for(let n=0;n<r;n++)t.push([e[3*n],parseInt(e[3*n+1]),e[3*n+2]]);return t}(or.parse(e));return JSON.stringify(r)}function lr(e){const r=JSON.parse(e);return function(e){if(!Array.isArray(e))return!1;for(const r of e)if("string"!=typeof r)return!1;return!0}(r)?or.stringify(r):null}function cr(e,r){switch(r){case"json":{const r=function(e){try{const r=JSON.parse(e);return JSON.stringify(r,null,void 0)}catch(r){if(r instanceof SyntaxError)return null;throw r}}(e);return null===r?null:[sr.dgaJson,r]}case"dsv":{const r=ar(e);return null===r?null:[sr.dgaDsv,r]}case"auto":{const r=cr(e,"dsv");if(null!==r)return r;const t=cr(e,"json");return null!==t?t:null}}}var ur=t(6347);function dr(){const{search:e}=(0,ur.zy)();return(0,s.useMemo)((()=>new URLSearchParams(e)),[e])}function gr(){const e=dr();try{const r=function(e){const r=e.get(sr.dgaJson);if(null!==r)return r;const t=e.get(sr.dgaDsv);return null!==t?ir(t):null}(e);return null===r?{type:"unspecified"}:{type:"success",value:B(r)}}catch(r){return r instanceof SyntaxError?{type:"error",message:`[Error] Invalid JSON is given as URL parameter.\n${r.message}`}:r instanceof Error?{type:"error",message:r.message}:(console.error(r),{type:"error",message:"[Error] Some error occurred while parsing URL parameter"})}}const pr=["self","freeLoopSpace","cyclic","derivation","idealQuot"],mr=["basis","dim"];function fr(e,r,t){return(0,s.useEffect)((()=>{"error"===e.type&&t(e.message)}),[t,e.type,e.message]),"success"===e.type?e.value:r}function hr(e){const r=e.get(sr.idealDsv);return null===r||""===r?null:function(e){const r=or.parse(e);return JSON.stringify(r)}(r)}var xr=t(8011),jr=t(3246);function br(e){let{value:r}=e;return null===r?(0,k.jsx)(jr.A,{size:20}):(0,k.jsx)(jr.A,{variant:"determinate",value:r,size:20})}function vr(e,r){return e?null===r?"Computing":`Computing (${r}%)`:"Compute"}function yr(e){let{computing:r,progress:t,message:n,...s}=e;const o=s.disabled??!1,a=null===(i=t)?null:Math.floor(100*i);var i;return(0,k.jsxs)(d.A,{children:[(0,k.jsxs)(p.A,{...s,disabled:o||r,children:[vr(r,a),r&&(0,k.jsx)(br,{value:a})]}),n]})}function Ar(e){let{label:r,value:t,setValue:n,width:s,disabled:o}=e;return(0,k.jsx)(z.A,{label:r,value:t,type:"number",onChange:e=>n(e.target.value),sx:{width:s},size:"small",disabled:o})}function wr(e){let{label:r,defaultValue:t,width:n,disabled:o}=e;const[a,i]=(0,s.useState)(t.toString()),l={label:r,value:a,setValue:i,width:void 0!==n?n:70,disabled:void 0!==o&&o};return[parseInt(a),l]}function Cr(e){let{label:r,value:t,setValue:n,width:s,disabled:o}=e;return(0,k.jsx)(z.A,{label:r,value:t,onChange:e=>n(e.target.value),sx:{width:s},size:"small",disabled:o})}function kr(e){switch(e){case"self":return"\\Lambda V";case"freeLoopSpace":return"\\Lambda V \\otimes \\Lambda \\overline{V}";case"cyclic":return"\\Lambda u \\otimes\\Lambda V \\otimes \\Lambda \\overline{V}";case"derivation":return"\\mathrm{Der}(\\Lambda V)";case"idealQuot":return"\\Lambda V / I"}}function Sr(e,r){void 0===r&&(r=void 0);return`H^{${void 0!==r?r:"*"}}(${kr(e)})`}function Dr(e){let{targetName:r,degree:t}=e;return(0,k.jsx)(c.A,{math:Sr(r,t)})}function Ir(e){switch(e){case"self":return"H^*(X)";case"freeLoopSpace":return"H^*(LX)";case"cyclic":return"H^*_{S^1}(LX)";case"derivation":return"\\pi_{-*}(\\mathrm{aut}_1(X))\\otimes\\mathbb{Q}";case"idealQuot":return"H^*(\\Lambda V / I)"}}function Tr(e){let{targetName:r}=e;return(0,k.jsx)(c.A,{math:Ir(r)})}function Jr(e){return{computing:"computing"===e.status,workerProgress:"computing"===e.status?e.progress:null,message:"computing"===e.status?e.message:void 0}}function Er(e){let{targetName:r,postMessageToWorker:t,visible:n,workerInfo:o}=e;const[a,i]=wr({label:"",defaultValue:0}),[l,u]=wr({label:"",defaultValue:20}),[g,p]=(0,s.useState)("basis"),x=(0,s.useCallback)((e=>{e.preventDefault();t({command:"computeCohomology",targetName:r,minDegree:a,maxDegree:l,showCohomology:g})}),[r,a,l,g,t]);if(!n)return(0,k.jsx)(s.Fragment,{});const j=Mr(r,"cohomology"),{computing:b,workerProgress:v}=Jr(o);return(0,k.jsx)("form",{onSubmit:x,"data-testid":"ComputeCohomologyForm",children:(0,k.jsxs)(d.A,{spacing:1,children:[(0,k.jsxs)("span",{children:["Compute cohomology ",(0,k.jsx)(Dr,{targetName:r,degree:"n"})," for"]}),(0,k.jsxs)(d.A,{direction:"row",alignItems:"center",justifyContent:"center",spacing:1,children:[(0,k.jsx)(Ar,{...i}),(0,k.jsx)(c.A,{math:"\\leq n \\leq"}),(0,k.jsx)(Ar,{...u})]}),(0,k.jsx)(m.A,{row:!0,value:g,onChange:e=>p(e.target.value),children:mr.map((e=>(0,k.jsx)(f.A,{value:e,control:(0,k.jsx)(h.A,{}),label:e},e)))}),(0,k.jsx)(yr,{type:"submit",variant:"contained",disabled:!j,computing:b,progress:v}),!j&&(0,k.jsx)(L.A,{severity:"info",children:"Currently, this type of computation is not supported."})]})})}function Nr(e){let{targetName:r,postMessageToWorker:t,visible:n,workerInfo:o}=e;const a=Mr(r,"class"),[i,l]=function(e){let{label:r,defaultValue:t,width:n,disabled:o}=e;const[a,i]=(0,s.useState)(t);return[a,{label:r,value:a,setValue:i,width:void 0!==n?n:70,disabled:void 0!==o&&o}]}({label:"",defaultValue:"x^2",width:200,disabled:!a}),[u,g]=(0,s.useState)(!0),p=(0,s.useCallback)((e=>{e.preventDefault();t({command:"computeCohomologyClass",targetName:r,cocycleString:i,showBasis:u})}),[r,i,u,t]);if(!n)return(0,k.jsx)(s.Fragment,{});const{computing:m,workerProgress:h}=Jr(o);return(0,k.jsx)("form",{onSubmit:p,"data-testid":"ComputeClassForm",children:(0,k.jsxs)(d.A,{spacing:1,children:[(0,k.jsxs)("span",{children:["Compute cohomology class ",(0,k.jsx)(c.A,{math:`[\\omega] \\in ${Sr(r)}`})," for"]}),(0,k.jsxs)(d.A,{direction:"row",alignItems:"center",justifyContent:"center",spacing:1,children:[(0,k.jsx)(c.A,{math:"\\omega ="}),(0,k.jsx)(Cr,{...l})]}),(0,k.jsx)(f.A,{control:(0,k.jsx)(xr.A,{}),label:"Show basis",checked:u,onChange:e=>g(e.target.checked)}),(0,k.jsx)(yr,{type:"submit",variant:"contained",disabled:!a,computing:m,progress:h}),!a&&(0,k.jsx)(L.A,{severity:"info",children:"Currently, this type of computation is not supported."})]})})}function Pr(e){let{targetName:r,postMessageToWorker:t,visible:n,workerInfo:o}=e;const[a,i]=wr({label:"",defaultValue:10}),l=(0,s.useCallback)((e=>{e.preventDefault();t({command:"computeMinimalModel",targetName:r,isomorphismUpTo:a})}),[r,a,t]);if(!n)return(0,k.jsx)(s.Fragment,{});const c=Mr(r,"minimal"),{computing:u,workerProgress:g,message:p}=Jr(o);return(0,k.jsx)("form",{onSubmit:l,"data-testid":"ComputeMinimalModel",children:(0,k.jsxs)(d.A,{spacing:1,children:[(0,k.jsxs)(d.A,{direction:"row",alignItems:"center",justifyContent:"center",spacing:1,children:["Compute minimal model until degree",(0,k.jsx)(Ar,{...i})]}),(0,k.jsx)(yr,{type:"submit",variant:"contained",disabled:!c,computing:u,progress:g,message:p}),!c&&(0,k.jsx)(L.A,{severity:"info",children:"Currently, this type of computation is not supported."})]})})}function Mr(e,r){switch(e){case"self":case"cyclic":case"idealQuot":return!0;case"freeLoopSpace":switch(r){case"cohomology":case"class":return!0;case"minimal":return!1}case"derivation":switch(r){case"cohomology":return!0;case"class":case"minimal":return!1}}}function Or(e){let{targetName:r,postMessageToWorker:t,workerInfo:n}=e;const[o,a]=(0,s.useState)("cohomology");return(0,k.jsxs)(s.Fragment,{children:[(0,k.jsxs)(b.A,{value:o,onChange:(e,r)=>{a(r)},children:[(0,k.jsx)(v.A,{value:"cohomology",label:"Cohomology group",sx:{textTransform:"none"}}),(0,k.jsx)(v.A,{value:"class",label:"Cohomology class",sx:{textTransform:"none"}}),(0,k.jsx)(v.A,{value:"minimal",label:"Minimal model",sx:{textTransform:"none"}})]}),(0,k.jsx)(Er,{targetName:r,postMessageToWorker:t,visible:"cohomology"===o,workerInfo:n}),(0,k.jsx)(Nr,{targetName:r,postMessageToWorker:t,visible:"class"===o,workerInfo:n}),(0,k.jsx)(Pr,{targetName:r,postMessageToWorker:t,visible:"minimal"===o,workerInfo:n})]})}function _r(e){let{setOpen:r}=e;return(0,k.jsx)(p.A,{variant:"contained",size:"small",onClick:()=>r(!0),children:"Restart"})}function zr(e){let{open:r,setOpen:t,restart:n}=e;return(0,k.jsxs)(x.A,{open:r,onClose:()=>t(!1),children:[(0,k.jsx)(y.A,{children:"Are you sure to restart the background process (WebWorker)? This will stop the current computation (if exists) and clear the cache."}),(0,k.jsxs)(A.A,{children:[(0,k.jsx)(p.A,{onClick:()=>{n(),t(!1)},variant:"contained",children:"Restart"}),(0,k.jsx)(p.A,{onClick:()=>t(!1),variant:"outlined",children:"Cancel"})]})]})}var Vr=t(9030),$r=t(797),Rr=t(1826);function Gr(e){let{setOpen:r}=e;return(0,k.jsx)(p.A,{onClick:()=>r(!0),sx:{textTransform:"none"},variant:"outlined",size:"small",children:"Share this DGA"})}function Lr(e){let{text:r}=e;const[t,n]=(0,s.useState)(!1);return(0,k.jsx)(V.A,{title:"Copied",open:t,onClose:()=>n(!1),children:(0,k.jsx)(p.A,{onClick:()=>{navigator.clipboard.writeText(r),n(!0)},variant:"contained",size:"small",children:"copy"})})}function Wr(e){let{dgaJson:r,idealJson:t,targetName:n}=e;const o=function(e){let{dgaJson:r,format:t,idealJson:n,targetName:s}=e;const o=new URLSearchParams,a=cr(r,t);if(null!==a){const[e,r]=a;o.append(e,r)}const i=lr(n);return null!==i&&""!==i&&o.append(sr.idealDsv,i),o.append(sr.taretName,s),o}({dgaJson:r,format:"auto",idealJson:t,targetName:n}),a=`${function(){const e=(0,$r.A)();return(0,Rr.D)()?window.location.origin:e.siteConfig.url}()}${(0,Vr.Ay)("calculator")}?${o.toString()}`;return(0,k.jsxs)(s.Fragment,{children:[(0,k.jsx)(z.A,{label:"url",value:a,sx:{width:300},size:"small",InputProps:{readOnly:!0},multiline:!0}),(0,k.jsx)(Lr,{text:a})]})}function Fr(e){let{open:r,setOpen:t,dgaJson:n,idealJson:s,targetName:o}=e;const a=C();return(0,k.jsxs)(x.A,{open:r,onClose:()=>t(!1),PaperProps:{sx:{[a]:{margin:0,width:"calc(100% - 5pt)"}}},children:[(0,k.jsx)(y.A,{children:(0,k.jsx)(Wr,{dgaJson:n,idealJson:s,targetName:o})}),(0,k.jsx)(A.A,{children:(0,k.jsx)(p.A,{onClick:()=>t(!1),variant:"outlined",children:"Close"})})]})}var Br=t(1278);function Qr(e){let{messages:r}=e;const[t,n]=(0,s.useState)(!0);if(0===r.length)return(0,k.jsx)(s.Fragment,{});const o=(e,r)=>{"clickaway"!==r&&n(!1)};return(0,k.jsx)(Br.A,{open:t,anchorOrigin:{vertical:"top",horizontal:"center"},onClose:o,children:(0,k.jsx)(L.A,{severity:"error",onClose:o,variant:"filled",elevation:6,children:r.map(((e,r)=>(0,k.jsx)("div",{style:{whiteSpace:"pre-wrap"},children:e},r)))})})}var Kr=t(8453);function Hr(e){const r={p:"p",...(0,Kr.R)(),...e.components};return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(r.p,{children:'Input a Sullivan algebra from the "Edit DGA" button'}),"\n",(0,k.jsx)(r.p,{children:"This calculator can compute the cohomology of the Sullivan algebra, its Hochschild homology (cohomology of the free loop space), and its cyclic homology (equivariant cohomology of the free loop space)."}),"\n",(0,k.jsx)(r.p,{children:'Note that "u" cannot be used as a generator when "cyclic" is selected, since "u" is reserved for the model of the cyclic homology.'})]})}function qr(e={}){const{wrapper:r}={...(0,Kr.R)(),...e.components};return r?(0,k.jsx)(r,{...e,children:(0,k.jsx)(Hr,{...e})}):Hr(e)}function Ur(e){let{setOpen:r}=e;return(0,k.jsx)(p.A,{onClick:()=>r(!0),sx:{textTransform:"none"},variant:"outlined",size:"small",children:"Show usage"})}function Xr(e){let{open:r,setOpen:t}=e;return(0,k.jsxs)(x.A,{open:r,onClose:()=>t(!1),children:[(0,k.jsx)(y.A,{children:(0,k.jsx)(qr,{})}),(0,k.jsx)(A.A,{children:(0,k.jsx)(p.A,{onClick:()=>t(!1),variant:"outlined",children:"Close"})})]})}var Yr=t(9888);function Zr(e){const r=(0,s.useContext)(e.reactContext),[t,n]=(0,s.useContext)(e.stateContext);(0,s.useEffect)((()=>{r.subscribe("__set_worker_state__",(e=>{const r=function(e){return"updateState"===e.type}(t=e)?{[t.key]:t.value}:null;var t;null!==r&&n((e=>({...e,...r})))}))}),[r,n]);const o=(0,s.useCallback)((e=>{const t="__useSyncExternalStore__";return r.subscribe(t,e),()=>r.unsubscribe(t)}),[r]),a=(0,s.useCallback)((()=>r.workerOutputLog),[r]),i=(0,Yr.useSyncExternalStore)(o,a),l=(0,s.useCallback)((e=>{const t={type:"input",value:e};r.postMessage(t)}),[r]),c=(0,s.useCallback)(((e,t)=>{r.subscribe(e,(e=>{"output"===e.type&&t(e.value)}))}),[r]),u=(0,s.useCallback)(((e,t)=>{r.subscribeRestart(e,t)}),[r]);return{postMessage:l,workerOutputLog:i,addListener:c,restart:(0,s.useCallback)((()=>r.restart()),[r]),addRestartListener:u,state:t,runAsync:(0,s.useCallback)((async(e,t)=>{const n=function(){const e=20,r=et.length,t=[];for(let n=0;n<e;n++)t.push(et.charAt(Math.floor(Math.random()*r)));return t.join("")}(),s={type:"callFunc",key:e,args:t,id:n},o=`runAsync-${n}`;return r.postMessage(s),new Promise(((t,s)=>{r.subscribe(o,(s=>{"funcResult"===s.type&&s.key===e&&s.id===n&&(r.unsubscribe(o),t(s.result))}))}))}),[r])}}const et="0123456789abcdef";class rt{onmessageFunctions=(()=>new Map)();onRestartFunctions=(()=>new Map)();workerOutputLog=[];constructor(e){this.createWorker=e,this.worker=this.createWorker(),this.worker.onmessage=e=>this.onmessage(e.data)}log(){"undefined"==typeof jest&&console.log(...arguments)}subscribe(e,r){this.onmessageFunctions.set(e,r),this.log(`subscribe: ${e}`)}unsubscribe(e){this.onmessageFunctions.delete(e),this.log(`unsubscribe: ${e}`)}subscribeRestart(e,r){this.onRestartFunctions.set(e,r),this.log(`subscribe restart: ${e}`)}unsubscribeRestart(e){this.onRestartFunctions.delete(e)}postMessage(e){this.worker.postMessage(e)}onmessage(e){this.workerOutputLog=[...this.workerOutputLog,e],this.onmessageFunctions.forEach((r=>r(e)))}terminate(){console.log("Worker terminated"),this.worker.terminate()}restart(){this.worker.terminate(),this.worker=this.createWorker(),this.worker.onmessage=e=>this.onmessage(e.data),this.onRestartFunctions.forEach((e=>e()))}static default(){return new rt((()=>({})))}}function tt(e){const r=(0,s.useRef)(null);null===r.current&&(r.current=new rt(e.createWorker));const t=(0,s.useState)(e.defaultState),n=e.context,o=e.stateContext;return(0,k.jsx)(n.Provider,{value:r.current,children:(0,k.jsx)(o.Provider,{value:t,children:e.children})})}const nt=function(){const e=(0,s.createContext)(rt.default()),r=(0,s.createContext)([void 0,e=>{throw new Error("Not wrapped by provider")}]),t=function(e,r){return t=>{const n="defaultState"in t?t.defaultState:{};return(0,k.jsx)(tt,{context:e,stateContext:r,createWorker:t.createWorker,defaultState:n,children:t.children})}}(e,r);return{reactContext:e,stateContext:r,Provider:t}}();function st(e){let{children:r,"data-testid":t}=e;return(0,k.jsx)("span",{"data-testid":t,children:(0,k.jsx)(u.A,{disableGutters:!0,sx:{paddingLeft:1,paddingRight:1},children:r})})}function ot(){const{array:e,push:r}=function(){const[e,r]=(0,s.useState)([]);return{array:e,push:(0,s.useCallback)((e=>{r((r=>[...r,e]))}),[r])}}(),t=fr(gr(),_e(2),r),n=fr(function(){const e=dr();try{const r=hr(e);return null===r?{type:"unspecified"}:{type:"success",value:r}}catch(r){return r instanceof Error?{type:"error",message:r.message}:(console.error(r),{type:"error",message:"[Error] Some error occurred while parsing URL parameter"})}}(),"[]",r),o=fr(function(){const e=dr().get(sr.taretName);return null===e?{type:"unspecified"}:pr.includes(e)?{type:"success",value:e}:{type:"error",message:`Invalid target name: ${e}`}}(),"self",r),{json:a,setJson:i,idealJson:l,setIdealJson:u,dgaInfo:x,idealInfo:j,workerInfo:b,postMessage:v,restart:y,runAsync:A}=function(e){let{defaultJson:r,defaultIdealJson:t,onmessage:n}=e;const{postMessage:o,addListener:a,addRestartListener:i,restart:l,state:{json:c,dgaInfo:u,idealJson:d,idealInfo:g,workerInfo:p},runAsync:m}=Zr(nt),f=(0,s.useCallback)((e=>{o({command:"updateJson",json:e})}),[o]),h=(0,s.useCallback)((e=>{o({command:"updateIdealJson",idealJson:e})}),[o]);return(0,s.useEffect)((()=>{a("useKohomologyWorker",n)}),[a,n]),(0,s.useEffect)((()=>{i("useKohomologyWorker",(()=>{f(c)}))}),[i,f,c]),(0,s.useEffect)((()=>{f(r),h(t)}),[f,r,h,t]),{json:c,setJson:f,idealJson:d,setIdealJson:h,dgaInfo:u,idealInfo:g,workerInfo:p,postMessage:o,restart:l,runAsync:m}}({defaultJson:t,defaultIdealJson:n,onmessage:e=>{}}),[w,C]=(0,s.useState)(o),{usageDialogProps:S,usageButtonProps:D}=function(){const[e,r]=(0,s.useState)(!1);return{usageDialogProps:{open:e,setOpen:r},usageButtonProps:{setOpen:r}}}(),{restartDialogProps:I,restartButtonProps:T}=function(e){const[r,t]=(0,s.useState)(!1);return{restartDialogProps:{open:r,setOpen:t,restart:e},restartButtonProps:{setOpen:t}}}((()=>{y()})),{shareDGADialogProps:J,shareDGAButtonProps:E}=function(e){let{dgaJson:r,idealJson:t,targetName:n}=e;const[o,a]=(0,s.useState)(!1);return{shareDGADialogProps:{open:o,setOpen:a,dgaJson:r,idealJson:t,targetName:n},shareDGAButtonProps:{setOpen:a}}}({dgaJson:a,idealJson:l,targetName:w}),{TabDialog:N,tabDialogProps:P,openDialog:M}=Ke(a,i),O=(0,s.useCallback)((async e=>await A("validateIdealGenerator",[e])),[A]),_=(0,s.useCallback)((async e=>await A("validateIdealGeneratorArray",[e])),[A]);return(0,k.jsxs)(s.Fragment,{children:[(0,k.jsx)(Qr,{messages:e}),(0,k.jsxs)(d.A,{direction:"column",spacing:2,divider:(0,k.jsx)(g.A,{orientation:"horizontal"}),sx:{width:400,margin:1},children:[(0,k.jsx)(st,{children:(0,k.jsxs)(d.A,{direction:"row",spacing:2,children:[(0,k.jsx)(Ur,{...D}),(0,k.jsx)(Xr,{...S}),(0,k.jsx)(_r,{...T}),(0,k.jsx)(zr,{...I})]})}),(0,k.jsxs)(st,{"data-testid":"CalculatorForm-StackItem-DGA",children:["Input a Sullivan model of a space ",(0,k.jsx)(c.A,{math:"X"}),":",(0,k.jsx)("div",{children:x.map(((e,r)=>(0,k.jsx)(Je,{styledMessage:e},r)))}),(0,k.jsxs)(d.A,{direction:"row",spacing:2,sx:{marginTop:.5},children:[(0,k.jsx)(p.A,{variant:"contained",size:"small",onClick:M,sx:{textTransform:"none"},children:"Edit DGA"}),(0,k.jsx)(N,{...P}),(0,k.jsx)(Gr,{...E}),(0,k.jsx)(Fr,{...J})]})]}),(0,k.jsxs)(st,{children:[(0,k.jsx)(m.A,{row:!0,value:w,onChange:e=>C(e.target.value),children:pr.map((e=>(0,k.jsx)(f.A,{value:e,control:(0,k.jsx)(h.A,{size:"small"}),label:(0,k.jsx)(Tr,{targetName:e})},e)))}),(0,k.jsx)(c.A,{math:`\\cong ${Sr(w)}`}),"idealQuot"===w&&(0,k.jsx)(nr,{setIdealJson:u,idealInfo:j,idealJson:l,validateGenerator:O,validateGeneratorArray:_})]}),(0,k.jsx)(st,{children:(0,k.jsx)(Or,{targetName:w,postMessageToWorker:e=>{v(e)},workerInfo:b})})]})]})}var at=t(7416);function it(e){const r=(0,s.useRef)(null);return(0,s.useEffect)((()=>{(()=>{const e=r.current;null!==e&&void 0!==e.scrollTo&&function(e){return e.scrollTop+50>=e.scrollHeight-e.clientHeight}(e)&&setTimeout((()=>{e.scrollTo({top:e.scrollHeight,behavior:"smooth"})}))})()}),e),r}function lt(e){let{messages:r}=e;const t=it([r]);return(0,k.jsx)(at.A,{elevation:0,variant:"outlined",ref:t,"data-testid":"calculator-results",sx:{width:"700px",height:"700px",overflowY:"scroll",padding:"5px","@media screen and (max-width: 700px)":{width:"100%",height:"50vh",margin:"3px"}},children:r.map(((e,r)=>(0,k.jsx)(Je,{styledMessage:e},r)))})}function ct(){const{addListener:e,addRestartListener:r}=Zr(nt),t=[Pe("success","Computation results will be shown here")],[n,o]=(0,s.useState)(t),a=(0,s.useCallback)((e=>{o(e instanceof Array?r=>r.concat(e):r=>r.concat([e]))}),[o]),i=(0,s.useCallback)((e=>{"printMessages"===e.command&&a(e.messages)}),[a]);return(0,s.useEffect)((()=>{e("MessageBoxForWorker",i)}),[e,i]),(0,s.useEffect)((()=>{r("MessageBoxForWorker",(()=>{a(Pe("success","The background process is restarted."))}))}),[r,a]),(0,k.jsx)(lt,{messages:n})}var ut=t(8532),dt=t(467);function gt(){const e=function(){const{colorMode:e}=(0,ut.G)();return(0,s.useMemo)((()=>(0,dt.A)({palette:{mode:e,primary:{main:"#7e6ca8"}}})),[e])}();return(0,k.jsx)(a.A,{theme:e,children:(0,k.jsx)(i.A,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"center",paddingTop:"10px",paddingBottom:"10px"},children:(0,k.jsxs)(nt.Provider,{createWorker:()=>new l,defaultState:{json:"[]",idealJson:"[]",dgaInfo:[],idealInfo:Pe("success",""),workerInfo:{status:"idle"}},children:[(0,k.jsx)(ot,{}),(0,k.jsx)(ct,{})]})})})}function pt(){return(0,k.jsx)(o.A,{fallback:(0,k.jsx)("div",{children:"Loading..."}),children:()=>(0,k.jsx)(gt,{})})}function mt(){return(0,k.jsx)(n.A,{title:"Calculator",children:(0,k.jsx)(pt,{})})}}}]);